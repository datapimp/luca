/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/
(function(e,t){function n(e){var t=e.length,n=at.type(e);return at.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e){var t=xt[e]={};return at.each(e.match(lt)||[],function(e,n){t[n]=!0}),t}function i(e,n,r,i){if(at.acceptData(e)){var s,o,u=at.expando,a="string"==typeof n,f=e.nodeType,l=f?at.cache:e,c=f?e[u]:e[u]&&u;if(c&&l[c]&&(i||l[c].data)||!a||r!==t)return c||(f?e[u]=c=Z.pop()||at.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=at.noop)),("object"==typeof n||"function"==typeof n)&&(i?l[c]=at.extend(l[c],n):l[c].data=at.extend(l[c].data,n)),s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[at.camelCase(n)]=r),a?(o=s[n],null==o&&(o=s[at.camelCase(n)])):o=s,o}}function s(e,t,n){if(at.acceptData(e)){var r,i,s,o=e.nodeType,a=o?at.cache:e,f=o?e[at.expando]:at.expando;if(a[f]){if(t&&(s=n?a[f]:a[f].data)){at.isArray(t)?t=t.concat(at.map(t,at.camelCase)):t in s?t=[t]:(t=at.camelCase(t),t=t in s?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete s[t[r]];if(!(n?u:at.isEmptyObject)(s))return}(n||(delete a[f].data,u(a[f])))&&(o?at.cleanData([e],!0):at.support.deleteExpando||a!=a.window?delete a[f]:a[f]=null)}}}function o(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(Nt,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:Tt.test(r)?at.parseJSON(r):r}catch(s){}at.data(e,n,r)}else r=t}return r}function u(e){var t;for(t in e)if(("data"!==t||!at.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function a(){return!0}function f(){return!1}function l(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function c(e,t,n){if(t=t||0,at.isFunction(t))return at.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return at.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=at.grep(e,function(e){return 1===e.nodeType});if(zt.test(t))return at.filter(t,r,!n);t=at.filter(t,r)}return at.grep(e,function(e){return at.inArray(e,t)>=0===n})}function h(e){var t=Vt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function p(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function d(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function v(e){var t=sn.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){var n,r=0;for(;null!=(n=e[r]);r++)at._data(n,"globalEval",!t||at._data(t[r],"globalEval"))}function g(e,t){if(1===t.nodeType&&at.hasData(e)){var n,r,i,s=at._data(e),o=at._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;i>r;r++)at.event.add(t,n,u[n][r])}o.data&&(o.data=at.extend({},o.data))}}function y(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!at.support.noCloneEvent&&t[at.expando]){i=at._data(t);for(r in i.events)at.removeEvent(t,r,i.handle);t.removeAttribute(at.expando)}"script"===n&&t.text!==e.text?(d(t).text=e.text,v(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),at.support.html5Clone&&e.innerHTML&&!at.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&tn.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function b(e,n){var r,i,s=0,o=typeof e.getElementsByTagName!==$?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==$?e.querySelectorAll(n||"*"):t;if(!o)for(o=[],r=e.childNodes||e;null!=(i=r[s]);s++)!n||at.nodeName(i,n)?o.push(i):at.merge(o,b(i,n));return n===t||n&&at.nodeName(e,n)?at.merge([e],o):o}function w(e){tn.test(e.type)&&(e.defaultChecked=e.checked)}function E(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Nn.length;while(i--)if(t=Nn[i]+n,t in e)return t;return r}function S(e,t){return e=t||e,"none"===at.css(e,"display")||!at.contains(e.ownerDocument,e)}function x(e,t){var n,r,i,s=[],o=0,u=e.length;for(;u>o;o++)r=e[o],r.style&&(s[o]=at._data(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&S(r)&&(s[o]=at._data(r,"olddisplay",k(r.nodeName)))):s[o]||(i=S(r),(n&&"none"!==n||!i)&&at._data(r,"olddisplay",i?n:at.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[o]||"":"none"));return e}function T(e,t,n){var r=yn.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function N(e,t,n,r,i){var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;for(;4>s;s+=2)"margin"===n&&(o+=at.css(e,n+Tn[s],!0,i)),r?("content"===n&&(o-=at.css(e,"padding"+Tn[s],!0,i)),"margin"!==n&&(o-=at.css(e,"border"+Tn[s]+"Width",!0,i))):(o+=at.css(e,"padding"+Tn[s],!0,i),"padding"!==n&&(o+=at.css(e,"border"+Tn[s]+"Width",!0,i)));return o}function C(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=cn(e),o=at.support.boxSizing&&"border-box"===at.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=hn(e,t,s),(0>i||null==i)&&(i=e.style[t]),bn.test(i))return i;r=o&&(at.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+N(e,t,n||(o?"border":"content"),r,s)+"px"}function k(e){var t=J,n=En[e];return n||(n=L(e,t),"none"!==n&&n||(ln=(ln||at("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(ln[0].contentWindow||ln[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=L(e,t),ln.detach()),En[e]=n),n}function L(e,t){var n=at(t.createElement(e)).appendTo(t.body),r=at.css(n[0],"display");return n.remove(),r}function A(e,t,n,r){var i;if(at.isArray(t))at.each(t,function(t,i){n||kn.test(e)?r(e,i):A(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==at.type(t))r(e,t);else for(i in t)A(e+"["+i+"]",t[i],n,r)}function O(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(lt)||[];if(at.isFunction(n))while(r=s[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function M(e,n,r,i){function s(a){var f;return o[a]=!0,at.each(e[a]||[],function(e,a){var l=a(n,r,i);return"string"!=typeof l||u||o[l]?u?!(f=l):t:(n.dataTypes.unshift(l),s(l),!1)}),f}var o={},u=e===Wn;return s(n.dataTypes[0])||!o["*"]&&s("*")}function _(e,n){var r,i,s=at.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&at.extend(!0,e,r),e}function D(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(u in l)u in r&&(n[l[u]]=r[u]);while("*"===f[0])f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}return o?(o!==f[0]&&f.unshift(o),r[o]):t}function P(e,t){var n,r,i,s,o={},u=0,a=e.dataTypes.slice(),f=a[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a[1])for(i in e.converters)o[i.toLowerCase()]=e.converters[i];for(;r=a[++u];)if("*"!==r){if("*"!==f&&f!==r){if(i=o[f+" "+r]||o["* "+r],!i)for(n in o)if(s=n.split(" "),s[1]===r&&(i=o[f+" "+s[0]]||o["* "+s[0]])){i===!0?i=o[n]:o[n]!==!0&&(r=s[0],a.splice(u--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(l){return{state:"parsererror",error:i?l:"No conversion from "+f+" to "+r}}}f=r}return{state:"success",data:t}}function H(){try{return new e.XMLHttpRequest}catch(t){}}function B(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function j(){return setTimeout(function(){Zn=t}),Zn=at.now()}function F(e,t){at.each(t,function(t,n){var r=(sr[t]||[]).concat(sr["*"]),i=0,s=r.length;for(;s>i;i++)if(r[i].call(e,t,n))return})}function I(e,t,n){var r,i,s=0,o=ir.length,u=at.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Zn||j(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:at.extend({},t),opts:at.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Zn||j(),duration:n.duration,tweens:[],createTween:function(t,n){var r=at.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(q(l,f.opts.specialEasing);o>s;s++)if(r=ir[s].call(f,e,l,f.opts))return r;return F(f,l),at.isFunction(f.opts.start)&&f.opts.start.call(e,f),at.fx.timer(at.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function q(e,t){var n,r,i,s,o;for(i in e)if(r=at.camelCase(i),s=t[r],n=e[i],at.isArray(n)&&(s=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),o=at.cssHooks[r],o&&"expand"in o){n=o.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=s)}else t[r]=s}function R(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},v=[],m=e.nodeType&&S(e);n.queue||(l=at._queueHooks(e,"fx"),null==l.unqueued&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,at.queue(e,"fx").length||l.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===at.css(e,"display")&&"none"===at.css(e,"float")&&(at.support.inlineBlockNeedsLayout&&"inline"!==k(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",at.support.shrinkWrapBlocks||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],tr.exec(o)){if(delete t[i],a=a||"toggle"===o,o===(m?"hide":"show"))continue;v.push(i)}if(s=v.length){u=at._data(e,"fxshow")||at._data(e,"fxshow",{}),"hidden"in u&&(m=u.hidden),a&&(u.hidden=!m),m?at(e).show():h.done(function(){at(e).hide()}),h.done(function(){var t;at._removeData(e,"fxshow");for(t in d)at.style(e,t,d[t])});for(i=0;s>i;i++)r=v[i],f=h.createTween(r,m?u[r]:0),d[r]=u[r]||at.style(e,r),r in u||(u[r]=f.start,m&&(f.end=f.start,f.start="width"===r||"height"===r?1:0))}}function U(e,t,n,r,i){return new U.prototype.init(e,t,n,r,i)}function z(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Tn[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function W(e){return at.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var X,V,$=typeof t,J=e.document,K=e.location,Q=e.jQuery,G=e.$,Y={},Z=[],et="1.9.1",tt=Z.concat,nt=Z.push,rt=Z.slice,it=Z.indexOf,st=Y.toString,ot=Y.hasOwnProperty,ut=et.trim,at=function(e,t){return new at.fn.init(e,t,V)},ft=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,lt=/\S+/g,ct=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ht=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,pt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,dt=/^[\],:{}\s]*$/,vt=/(?:^|:|,)(?:\s*\[)+/g,mt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,gt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,yt=/^-ms-/,bt=/-([\da-z])/gi,wt=function(e,t){return t.toUpperCase()},Et=function(e){(J.addEventListener||"load"===e.type||"complete"===J.readyState)&&(St(),at.ready())},St=function(){J.addEventListener?(J.removeEventListener("DOMContentLoaded",Et,!1),e.removeEventListener("load",Et,!1)):(J.detachEvent("onreadystatechange",Et),e.detachEvent("onload",Et))};at.fn=at.prototype={jquery:et,constructor:at,init:function(e,n,r){var i,s;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ht.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof at?n[0]:n,at.merge(this,at.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:J,!0)),pt.test(i[1])&&at.isPlainObject(n))for(i in n)at.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(s=J.getElementById(i[2]),s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):at.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),at.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return rt.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=at.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return at.each(this,e,t)},ready:function(e){return at.ready.promise().done(e),this},slice:function(){return this.pushStack(rt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(at.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:nt,sort:[].sort,splice:[].splice},at.fn.init.prototype=at.fn,at.extend=at.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[1]||{},a=2),"object"==typeof u||at.isFunction(u)||(u={}),f===a&&(u=this,--a);f>a;a++)if(null!=(s=arguments[a]))for(i in s)e=u[i],r=s[i],u!==r&&(l&&r&&(at.isPlainObject(r)||(n=at.isArray(r)))?(n?(n=!1,o=e&&at.isArray(e)?e:[]):o=e&&at.isPlainObject(e)?e:{},u[i]=at.extend(l,o,r)):r!==t&&(u[i]=r));return u},at.extend({noConflict:function(t){return e.$===at&&(e.$=G),t&&e.jQuery===at&&(e.jQuery=Q),at},isReady:!1,readyWait:1,holdReady:function(e){e?at.readyWait++:at.ready(!0)},ready:function(e){if(e===!0?!--at.readyWait:!at.isReady){if(!J.body)return setTimeout(at.ready);at.isReady=!0,e!==!0&&--at.readyWait>0||(X.resolveWith(J,[at]),at.fn.trigger&&at(J).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===at.type(e)},isArray:Array.isArray||function(e){return"array"===at.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Y[st.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==at.type(e)||e.nodeType||at.isWindow(e))return!1;try{if(e.constructor&&!ot.call(e,"constructor")&&!ot.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||ot.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var r=pt.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=at.buildFragment([e],t,i),i&&at(i).remove(),at.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=at.trim(n),n&&dt.test(n.replace(mt,"@").replace(gt,"]").replace(vt,"")))?Function("return "+n)():(at.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||at.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&at.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(yt,"ms-").replace(bt,wt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,s=0,o=e.length,u=n(e);if(r){if(u){for(;o>s;s++)if(i=t.apply(e[s],r),i===!1)break}else for(s in e)if(i=t.apply(e[s],r),i===!1)break}else if(u){for(;o>s;s++)if(i=t.call(e[s],s,e[s]),i===!1)break}else for(s in e)if(i=t.call(e[s],s,e[s]),i===!1)break;return e},trim:ut&&!ut.call("﻿ ")?function(e){return null==e?"":ut.call(e)}:function(e){return null==e?"":(e+"").replace(ct,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?at.merge(r,"string"==typeof e?[e]:e):nt.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(it)return it.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if("number"==typeof r)for(;r>s;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;for(n=!!n;o>s;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,r){var i,s=0,o=e.length,u=n(e),a=[];if(u)for(;o>s;s++)i=t(e[s],s,r),null!=i&&(a[a.length]=i);else for(s in e)i=t(e[s],s,r),null!=i&&(a[a.length]=i);return tt.apply([],a)},guid:1,proxy:function(e,n){var r,i,s;return"string"==typeof n&&(s=e[n],n=e,e=s),at.isFunction(e)?(r=rt.call(arguments,2),i=function(){return e.apply(n||this,r.concat(rt.call(arguments)))},i.guid=e.guid=e.guid||at.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===at.type(r)){s=!0;for(a in r)at.access(e,n,a,r[a],!0,o,u)}else if(i!==t&&(s=!0,at.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(at(e),n)})),n))for(;f>a;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)));return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),at.ready.promise=function(t){if(!X)if(X=at.Deferred(),"complete"===J.readyState)setTimeout(at.ready);else if(J.addEventListener)J.addEventListener("DOMContentLoaded",Et,!1),e.addEventListener("load",Et,!1);else{J.attachEvent("onreadystatechange",Et),e.attachEvent("onload",Et);var n=!1;try{n=null==e.frameElement&&J.documentElement}catch(r){}n&&n.doScroll&&function i(){if(!at.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}St(),at.ready()}}()}return X.promise(t)},at.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Y["[object "+t+"]"]=t.toLowerCase()}),V=at(J);var xt={};at.Callbacks=function(e){e="string"==typeof e?xt[e]||r(e):at.extend({},e);var n,i,s,o,u,a,f=[],l=!e.once&&[],c=function(t){for(i=e.memory&&t,s=!0,u=a||0,a=0,o=f.length,n=!0;f&&o>u;u++)if(f[u].apply(t[0],t[1])===!1&&e.stopOnFalse){i=!1;break}n=!1,f&&(l?l.length&&c(l.shift()):i?f=[]:h.disable())},h={add:function(){if(f){var t=f.length;(function r(t){at.each(t,function(t,n){var i=at.type(n);"function"===i?e.unique&&h.has(n)||f.push(n):n&&n.length&&"string"!==i&&r(n)})})(arguments),n?o=f.length:i&&(a=t,c(i))}return this},remove:function(){return f&&at.each(arguments,function(e,t){var r;while((r=at.inArray(t,f,r))>-1)f.splice(r,1),n&&(o>=r&&o--,u>=r&&u--)}),this},has:function(e){return e?at.inArray(e,f)>-1:!!f&&!!f.length},empty:function(){return f=[],this},disable:function(){return f=l=i=t,this},disabled:function(){return!f},lock:function(){return l=t,i||h.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!f||s&&!l||(n?l.push(t):c(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!s}};return h},at.extend({Deferred:function(e){var t=[["resolve","done",at.Callbacks("once memory"),"resolved"],["reject","fail",at.Callbacks("once memory"),"rejected"],["notify","progress",at.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return at.Deferred(function(n){at.each(t,function(t,s){var o=s[0],u=at.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&at.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?at.extend(e,r):r}},i={};return r.pipe=r.then,at.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=rt.call(arguments),r=n.length,i=1!==r||e&&at.isFunction(e.promise)?r:0,s=1===i?e:at.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?rt.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1)for(u=Array(r),a=Array(r),f=Array(r);r>t;t++)n[t]&&at.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i;return i||s.resolveWith(f,n),s.promise()}}),at.support=function(){var t,n,r,i,s,o,u,a,f,l,c=J.createElement("div");if(c.setAttribute("className","t"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=c.getElementsByTagName("*"),r=c.getElementsByTagName("a")[0],!n||!r||!n.length)return{};s=J.createElement("select"),u=s.appendChild(J.createElement("option")),i=c.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==c.className,leadingWhitespace:3===c.firstChild.nodeType,tbody:!c.getElementsByTagName("tbody").length,htmlSerialize:!!c.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!i.value,optSelected:u.selected,enctype:!!J.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==J.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===J.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},i.checked=!0,t.noCloneChecked=i.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!u.disabled;try{delete c.test}catch(h){t.deleteExpando=!1}i=J.createElement("input"),i.setAttribute("value",""),t.input=""===i.getAttribute("value"),i.value="t",i.setAttribute("type","radio"),t.radioValue="t"===i.value,i.setAttribute("checked","t"),i.setAttribute("name","t"),o=J.createDocumentFragment(),o.appendChild(i),t.appendChecked=i.checked,t.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,c.attachEvent&&(c.attachEvent("onclick",function(){t.noCloneEvent=!1}),c.cloneNode(!0).click());for(l in{submit:!0,change:!0,focusin:!0})c.setAttribute(a="on"+l,"t"),t[l+"Bubbles"]=a in e||c.attributes[a].expando===!1;return c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===c.style.backgroundClip,at(function(){var n,r,i,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",o=J.getElementsByTagName("body")[0];o&&(n=J.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",o.appendChild(n).appendChild(c),c.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=c.getElementsByTagName("td"),i[0].style.cssText="padding:0;margin:0;border:0;display:none",f=0===i[0].offsetHeight,i[0].style.display="",i[1].style.display="none",t.reliableHiddenOffsets=f&&0===i[0].offsetHeight,c.innerHTML="",c.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===c.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==o.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(c,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(c,null)||{width:"4px"}).width,r=c.appendChild(J.createElement("div")),r.style.cssText=c.style.cssText=s,r.style.marginRight=r.style.width="0",c.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof c.style.zoom!==$&&(c.innerHTML="",c.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===c.offsetWidth,c.style.display="block",c.innerHTML="<div></div>",c.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==c.offsetWidth,t.inlineBlockNeedsLayout&&(o.style.zoom=1)),o.removeChild(n),n=c=i=r=null)}),n=s=o=u=r=i=null,t}();var Tt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Nt=/([A-Z])/g;at.extend({cache:{},expando:"jQuery"+(et+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?at.cache[e[at.expando]]:e[at.expando],!!e&&!u(e)},data:function(e,t,n){return i(e,t,n)},removeData:function(e,t){return s(e,t)},_data:function(e,t,n){return i(e,t,n,!0)},_removeData:function(e,t){return s(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&at.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),at.fn.extend({data:function(e,n){var r,i,s=this[0],u=0,a=null;if(e===t){if(this.length&&(a=at.data(s),1===s.nodeType&&!at._data(s,"parsedAttrs"))){for(r=s.attributes;r.length>u;u++)i=r[u].name,i.indexOf("data-")||(i=at.camelCase(i.slice(5)),o(s,i,a[i]));at._data(s,"parsedAttrs",!0)}return a}return"object"==typeof e?this.each(function(){at.data(this,e)}):at.access(this,function(n){return n===t?s?o(s,e,at.data(s,e)):null:(this.each(function(){at.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){at.removeData(this,e)})}}),at.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=at._data(e,n),r&&(!i||at.isArray(r)?i=at._data(e,n,at.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=at.queue(e,t),r=n.length,i=n.shift(),s=at._queueHooks(e,t),o=function(){at.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),s.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return at._data(e,n)||at._data(e,n,{empty:at.Callbacks("once memory").add(function(){at._removeData(e,t+"queue"),at._removeData(e,n)})})}}),at.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?at.queue(this[0],e):n===t?this:this.each(function(){var t=at.queue(this,e,n);at._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&at.dequeue(this,e)})},dequeue:function(e){return this.each(function(){at.dequeue(this,e)})},delay:function(e,t){return e=at.fx?at.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=at.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(u--)r=at._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var Ct,kt,Lt=/[\t\r\n]/g,At=/\r/g,Ot=/^(?:input|select|textarea|button|object)$/i,Mt=/^(?:a|area)$/i,_t=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Dt=/^(?:checked|selected)$/i,Pt=at.support.getSetAttribute,Ht=at.support.input;at.fn.extend({attr:function(e,t){return at.access(this,at.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){at.removeAttr(this,e)})},prop:function(e,t){return at.access(this,at.prop,e,t,arguments.length>1)},removeProp:function(e){return e=at.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a="string"==typeof e&&e;if(at.isFunction(e))return this.each(function(t){at(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(lt)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Lt," "):" ")){s=0;while(i=t[s++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=at.trim(r)}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=0===arguments.length||"string"==typeof e&&e;if(at.isFunction(e))return this.each(function(t){at(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(lt)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Lt," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?at.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return at.isFunction(e)?this.each(function(n){at(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var i,s=0,o=at(this),u=t,a=e.match(lt)||[];while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else(n===$||"boolean"===n)&&(this.className&&at._data(this,"__className__",this.className),this.className=this.className||e===!1?"":at._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Lt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(arguments.length)return i=at.isFunction(e),this.each(function(n){var s,o=at(this);1===this.nodeType&&(s=i?e.call(this,n,o.val()):e,null==s?s="":"number"==typeof s?s+="":at.isArray(s)&&(s=at.map(s,function(e){return null==e?"":e+""})),r=at.valHooks[this.type]||at.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,s,"value")!==t||(this.value=s))});if(s)return r=at.valHooks[s.type]||at.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,"string"==typeof n?n.replace(At,""):null==n?"":n)}}),at.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;for(;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(at.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&at.nodeName(n.parentNode,"optgroup"))){if(t=at(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n=at.makeArray(t);return at(e).find("option").each(function(){this.selected=at.inArray(at(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===$?at.prop(e,n,r):(s=1!==u||!at.isXMLDoc(e),s&&(n=n.toLowerCase(),i=at.attrHooks[n]||(_t.test(n)?kt:Ct)),r===t?i&&s&&"get"in i&&null!==(o=i.get(e,n))?o:(typeof e.getAttribute!==$&&(o=e.getAttribute(n)),null==o?t:o):null!==r?i&&s&&"set"in i&&(o=i.set(e,r,n))!==t?o:(e.setAttribute(n,r+""),r):(at.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(lt);if(s&&1===e.nodeType)while(n=s[i++])r=at.propFix[n]||n,_t.test(n)?!Pt&&Dt.test(n)?e[at.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:at.attr(e,n,""),e.removeAttribute(Pt?n:r)},attrHooks:{type:{set:function(e,t){if(!at.support.radioValue&&"radio"===t&&at.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!at.isXMLDoc(e),o&&(n=at.propFix[n]||n,s=at.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&null!==(i=s.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):Ot.test(e.nodeName)||Mt.test(e.nodeName)&&e.href?0:t}}}}),kt={get:function(e,n){var r=at.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),s="boolean"==typeof r?Ht&&Pt?null!=i:Dt.test(n)?e[at.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?at.removeAttr(e,n):Ht&&Pt||!Dt.test(n)?e.setAttribute(!Pt&&at.propFix[n]||n,n):e[at.camelCase("default-"+n)]=e[n]=!0,n}},Ht&&Pt||(at.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return at.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return at.nodeName(e,"input")?(e.defaultValue=n,t):Ct&&Ct.set(e,n,r)}}),Pt||(Ct=at.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode
(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},at.attrHooks.contenteditable={get:Ct.get,set:function(e,t,n){Ct.set(e,""===t?!1:t,n)}},at.each(["width","height"],function(e,n){at.attrHooks[n]=at.extend(at.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),at.support.hrefNormalized||(at.each(["href","src","width","height"],function(e,n){at.attrHooks[n]=at.extend(at.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),at.each(["href","src"],function(e,t){at.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),at.support.style||(at.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),at.support.optSelected||(at.propHooks.selected=at.extend(at.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),at.support.enctype||(at.propFix.enctype="encoding"),at.support.checkOn||at.each(["radio","checkbox"],function(){at.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),at.each(["radio","checkbox"],function(){at.valHooks[this]=at.extend(at.valHooks[this],{set:function(e,n){return at.isArray(n)?e.checked=at.inArray(at(e).val(),n)>=0:t}})});var Bt=/^(?:input|select|textarea)$/i,jt=/^key/,Ft=/^(?:mouse|contextmenu)|click/,It=/^(?:focusinfocus|focusoutblur)$/,qt=/^([^.]*)(?:\.(.+)|)$/;at.event={global:{},add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=at._data(e);if(g){r.handler&&(f=r,r=f.handler,s=f.selector),r.guid||(r.guid=at.guid++),(u=g.events)||(u=g.events={}),(c=g.handle)||(c=g.handle=function(e){return typeof at===$||e&&at.event.triggered===e.type?t:at.event.dispatch.apply(c.elem,arguments)},c.elem=e),n=(n||"").match(lt)||[""],a=n.length;while(a--)o=qt.exec(n[a])||[],d=m=o[1],v=(o[2]||"").split(".").sort(),l=at.event.special[d]||{},d=(s?l.delegateType:l.bindType)||d,l=at.event.special[d]||{},h=at.extend({type:d,origType:m,data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&at.expr.match.needsContext.test(s),namespace:v.join(".")},f),(p=u[d])||(p=u[d]=[],p.delegateCount=0,l.setup&&l.setup.call(e,i,v,c)!==!1||(e.addEventListener?e.addEventListener(d,c,!1):e.attachEvent&&e.attachEvent("on"+d,c))),l.add&&(l.add.call(e,h),h.handler.guid||(h.handler.guid=r.guid)),s?p.splice(p.delegateCount++,0,h):p.push(h),at.event.global[d]=!0;e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=at.hasData(e)&&at._data(e);if(m&&(l=m.events)){t=(t||"").match(lt)||[""],f=t.length;while(f--)if(u=qt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort(),p){c=at.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],!i&&v!==o.origType||n&&n.guid!==o.guid||u&&!u.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&(c.teardown&&c.teardown.call(e,d,m.handle)!==!1||at.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)at.event.remove(e,p+t[f],n,r,!0);at.isEmptyObject(l)&&(delete m.handle,at._removeData(e,"events"))}},trigger:function(n,r,i,s){var o,u,a,f,l,c,h,p=[i||J],d=ot.call(n,"type")?n.type:n,v=ot.call(n,"namespace")?n.namespace.split("."):[];if(a=c=i=i||J,3!==i.nodeType&&8!==i.nodeType&&!It.test(d+at.event.triggered)&&(d.indexOf(".")>=0&&(v=d.split("."),d=v.shift(),v.sort()),u=0>d.indexOf(":")&&"on"+d,n=n[at.expando]?n:new at.Event(d,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=v.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:at.makeArray(r,[n]),l=at.event.special[d]||{},s||!l.trigger||l.trigger.apply(i,r)!==!1)){if(!s&&!l.noBubble&&!at.isWindow(i)){for(f=l.delegateType||d,It.test(f+d)||(a=a.parentNode);a;a=a.parentNode)p.push(a),c=a;c===(i.ownerDocument||J)&&p.push(c.defaultView||c.parentWindow||e)}h=0;while((a=p[h++])&&!n.isPropagationStopped())n.type=h>1?f:l.bindType||d,o=(at._data(a,"events")||{})[n.type]&&at._data(a,"handle"),o&&o.apply(a,r),o=u&&a[u],o&&at.acceptData(a)&&o.apply&&o.apply(a,r)===!1&&n.preventDefault();if(n.type=d,!(s||n.isDefaultPrevented()||l._default&&l._default.apply(i.ownerDocument,r)!==!1||"click"===d&&at.nodeName(i,"a")||!at.acceptData(i)||!u||!i[d]||at.isWindow(i))){c=i[u],c&&(i[u]=null),at.event.triggered=d;try{i[d]()}catch(m){}at.event.triggered=t,c&&(i[u]=c)}return n.result}},dispatch:function(e){e=at.event.fix(e);var n,r,i,s,o,u=[],a=rt.call(arguments),f=(at._data(this,"events")||{})[e.type]||[],l=at.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=at.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((at.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!=this;f=f.parentNode||this)if(1===f.nodeType&&(f.disabled!==!0||"click"!==e.type)){for(s=[],o=0;a>o;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?at(r,this).index(f)>=0:at.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return n.length>a&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[at.expando])return e;var t,n,r,i=e.type,s=e,o=this.fixHooks[i];o||(this.fixHooks[i]=o=Ft.test(i)?this.mouseHooks:jt.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new at.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||J),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,o=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||J,s=i.documentElement,r=i.body,e.pageX=n.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||o===t||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return at.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==J.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===J.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=at.extend(new at.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?at.event.trigger(i,null,t):at.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},at.removeEvent=J.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===$&&(e[r]=null),e.detachEvent(r,n))},at.Event=function(e,n){return this instanceof at.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?a:f):this.type=e,n&&at.extend(this,n),this.timeStamp=e&&e.timeStamp||at.now(),this[at.expando]=!0,t):new at.Event(e,n)},at.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=a,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=a,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()}},at.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){at.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!at.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),at.support.submitBubbles||(at.event.special.submit={setup:function(){return at.nodeName(this,"form")?!1:(at.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=at.nodeName(n,"input")||at.nodeName(n,"button")?n.form:t;r&&!at._data(r,"submitBubbles")&&(at.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),at._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&at.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return at.nodeName(this,"form")?!1:(at.event.remove(this,"._submit"),t)}}),at.support.changeBubbles||(at.event.special.change={setup:function(){return Bt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(at.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),at.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),at.event.simulate("change",this,e,!0)})),!1):(at.event.add(this,"beforeactivate._change",function(e){var t=e.target;Bt.test(t.nodeName)&&!at._data(t,"changeBubbles")&&(at.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||at.event.simulate("change",this.parentNode,e,!0)}),at._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return at.event.remove(this,"._change"),!Bt.test(this.nodeName)}}),at.support.focusinBubbles||at.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){at.event.simulate(t,e.target,at.event.fix(e),!0)};at.event.special[t]={setup:function(){0===n++&&J.addEventListener(e,r,!0)},teardown:function(){0===--n&&J.removeEventListener(e,r,!0)}}}),at.fn.extend({on:function(e,n,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=f;else if(!i)return this;return 1===s&&(u=i,i=function(e){return at().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=at.guid++)),this.each(function(){at.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,at(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,n,e[s]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=f),this.each(function(){at.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){at.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?at.event.trigger(e,n,r,!0):t}}),function(e,t){function n(e){return dt.test(e+"")}function r(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>T.cacheLength&&delete e[t.shift()],e[n]=r}}function i(e){return e[I]=!0,e}function s(e){var t=M.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function o(e,t,n,r){var i,s,o,u,a,f,l,p,d,v;if((t?t.ownerDocument||t:q)!==M&&O(t),t=t||M,n=n||[],!e||"string"!=typeof e)return n;if(1!==(u=t.nodeType)&&9!==u)return[];if(!D&&!r){if(i=vt.exec(e))if(o=i[1]){if(9===u){if(s=t.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&j(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return G.apply(n,Y.call(t.getElementsByTagName(e),0)),n;if((o=i[3])&&R.getByClassName&&t.getElementsByClassName)return G.apply(n,Y.call(t.getElementsByClassName(o),0)),n}if(R.qsa&&!P.test(e)){if(l=!0,p=I,d=t,v=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){f=c(e),(l=t.getAttribute("id"))?p=l.replace(yt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",a=f.length;while(a--)f[a]=p+h(f[a]);d=pt.test(e)&&t.parentNode||t,v=f.join(",")}if(v)try{return G.apply(n,Y.call(d.querySelectorAll(v),0)),n}catch(m){}finally{l||t.removeAttribute("id")}}}return w(e.replace(ot,"$1"),t,n,r)}function u(e,t){var n=t&&e,r=n&&(~t.sourceIndex||J)-(~e.sourceIndex||J);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function f(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return i(function(t){return t=+t,i(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function c(e,t){var n,r,i,s,u,a,f,l=X[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=T.preFilter;while(u){(!n||(r=ut.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),a.push(i=[])),n=!1,(r=ft.exec(u))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ot," ")}),u=u.slice(n.length));for(s in T.filter)!(r=ht[s].exec(u))||f[s]&&!(r=f[s](r))||(n=r.shift(),i.push({value:n,type:s,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?o.error(e):X(e,a).slice(0)}function h(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=z++;return t.first?function(t,n,s){while(t=t[r])if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f,l=U+" "+s;if(o){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,o))return!0}else while(t=t[r])if(1===t.nodeType||i)if(f=t[I]||(t[I]={}),(a=f[r])&&a[0]===l){if((u=a[1])===!0||u===x)return u===!0}else if(a=f[r]=[l],a[1]=e(t,n,o)||x,a[1]===!0)return!0}}function d(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function v(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=null!=t;for(;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function m(e,t,n,r,s,o){return r&&!r[I]&&(r=m(r)),s&&!s[I]&&(s=m(s,o)),i(function(i,o,u,a){var f,l,c,h=[],p=[],d=o.length,m=i||b(t||"*",u.nodeType?[u]:u,[]),g=!e||!i&&t?m:v(m,h,e,u,a),y=n?s||(i?e:d||r)?[]:o:g;if(n&&n(g,y,u,a),r){f=v(y,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(y[p[l]]=!(g[p[l]]=c))}if(i){if(s||e){if(s){f=[],l=y.length;while(l--)(c=y[l])&&f.push(g[l]=c);s(null,y=[],f,a)}l=y.length;while(l--)(c=y[l])&&(f=s?Z.call(i,c):h[l])>-1&&(i[f]=!(o[f]=c))}}else y=v(y===o?y.splice(d,y.length):y),s?s(null,o,y,a):G.apply(o,y)})}function g(e){var t,n,r,i=e.length,s=T.relative[e[0].type],o=s||T.relative[" "],u=s?1:0,a=p(function(e){return e===t},o,!0),f=p(function(e){return Z.call(t,e)>-1},o,!0),l=[function(e,n,r){return!s&&(r||n!==A)||((t=n).nodeType?a(e,n,r):f(e,n,r))}];for(;i>u;u++)if(n=T.relative[e[u].type])l=[p(d(l),n)];else{if(n=T.filter[e[u].type].apply(null,e[u].matches),n[I]){for(r=++u;i>r;r++)if(T.relative[e[r].type])break;return m(u>1&&d(l),u>1&&h(e.slice(0,u-1)).replace(ot,"$1"),n,r>u&&g(e.slice(u,r)),i>r&&g(e=e.slice(r)),i>r&&h(e))}l.push(n)}return d(l)}function y(e,t){var n=0,r=t.length>0,s=e.length>0,u=function(i,u,a,f,l){var c,h,p,d=[],m=0,g="0",y=i&&[],b=null!=l,w=A,E=i||s&&T.find.TAG("*",l&&u.parentNode||u),S=U+=null==w?1:Math.random()||.1;for(b&&(A=u!==M&&u,x=n);null!=(c=E[g]);g++){if(s&&c){h=0;while(p=e[h++])if(p(c,u,a)){f.push(c);break}b&&(U=S,x=++n)}r&&((c=!p&&c)&&m--,i&&y.push(c))}if(m+=g,r&&g!==m){h=0;while(p=t[h++])p(y,d,u,a);if(i){if(m>0)while(g--)y[g]||d[g]||(d[g]=Q.call(f));d=v(d)}G.apply(f,d),b&&!i&&d.length>0&&m+t.length>1&&o.uniqueSort(f)}return b&&(U=S,A=w),y};return r?i(u):u}function b(e,t,n){var r=0,i=t.length;for(;i>r;r++)o(e,t[r],n);return n}function w(e,t,n,r){var i,s,o,u,a,f=c(e);if(!r&&1===f.length){if(s=f[0]=f[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&9===t.nodeType&&!D&&T.relative[s[1].type]){if(t=T.find.ID(o.matches[0].replace(wt,Et),t)[0],!t)return n;e=e.slice(s.shift().value.length)}i=ht.needsContext.test(e)?0:s.length;while(i--){if(o=s[i],T.relative[u=o.type])break;if((a=T.find[u])&&(r=a(o.matches[0].replace(wt,Et),pt.test(s[0].type)&&t.parentNode||t))){if(s.splice(i,1),e=r.length&&h(s),!e)return G.apply(n,Y.call(r,0)),n;break}}}return k(e,f)(r,t,D,n,pt.test(e)),n}function E(){}var S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I="sizzle"+ -(new Date),q=e.document,R={},U=0,z=0,W=r(),X=r(),V=r(),$=typeof t,J=1<<31,K=[],Q=K.pop,G=K.push,Y=K.slice,Z=K.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},et="[\\x20\\t\\r\\n\\f]",tt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nt=tt.replace("w","w#"),rt="([*^$|!~]?=)",it="\\["+et+"*("+tt+")"+et+"*(?:"+rt+et+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+nt+")|)|)"+et+"*\\]",st=":("+tt+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+it.replace(3,8)+")*)|.*)\\)|)",ot=RegExp("^"+et+"+|((?:^|[^\\\\])(?:\\\\.)*)"+et+"+$","g"),ut=RegExp("^"+et+"*,"+et+"*"),ft=RegExp("^"+et+"*([\\x20\\t\\r\\n\\f>+~])"+et+"*"),lt=RegExp(st),ct=RegExp("^"+nt+"$"),ht={ID:RegExp("^#("+tt+")"),CLASS:RegExp("^\\.("+tt+")"),NAME:RegExp("^\\[name=['\"]?("+tt+")['\"]?\\]"),TAG:RegExp("^("+tt.replace("w","w*")+")"),ATTR:RegExp("^"+it),PSEUDO:RegExp("^"+st),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+et+"*(even|odd|(([+-]|)(\\d*)n|)"+et+"*(?:([+-]|)"+et+"*(\\d+)|))"+et+"*\\)|)","i"),needsContext:RegExp("^"+et+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+et+"*((?:-\\d)?\\d*)"+et+"*\\)|)(?=[^-]|$)","i")},pt=/[\x20\t\r\n\f]*[+~]/,dt=/^[^{]+\{\s*\[native code/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,yt=/'|\\/g,bt=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,wt=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,Et=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{Y.call(q.documentElement.childNodes,0)[0].nodeType}catch(St){Y=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}C=o.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},O=o.setDocument=function(e){var r=e?e.ownerDocument||e:q;return r!==M&&9===r.nodeType&&r.documentElement?(M=r,_=r.documentElement,D=C(r),R.tagNameNoComments=s(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),R.attributes=s(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),R.getByClassName=s(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),R.getByName=s(function(e){e.id=I+0,e.innerHTML="<a name='"+I+"'></a><div name='"+I+"'></div>",_.insertBefore(e,_.firstChild);var t=r.getElementsByName&&r.getElementsByName(I).length===2+r.getElementsByName(I+0).length;return R.getIdNotName=!r.getElementById(I),_.removeChild(e),t}),T.attrHandle=s(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==$&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},R.getIdNotName?(T.find.ID=function(e,t){if(typeof t.getElementById!==$&&!D){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(wt,Et);return function(e){return e.getAttribute("id")===t}}):(T.find.ID=function(e,n){if(typeof n.getElementById!==$&&!D){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==$&&r.getAttributeNode("id").value===e?[r]:t:[]}},T.filter.ID=function(e){var t=e.replace(wt,Et);return function(e){var n=typeof e.getAttributeNode!==$&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=R.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==$?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},T.find.NAME=R.getByName&&function(e,n){return typeof n.getElementsByName!==$?n.getElementsByName(name):t},T.find.CLASS=R.getByClassName&&function(e,n){return typeof n.getElementsByClassName===$||D?t:n.getElementsByClassName(e)},H=[],P=[":focus"],(R.qsa=n(r.querySelectorAll))&&(s(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||P.push("\\["+et+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||P.push(":checked")}),s(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&P.push("[*^$]="+et+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),P.push(",.*:")})),(R.matchesSelector=n(B=_.matchesSelector||_.mozMatchesSelector||_.webkitMatchesSelector||_.oMatchesSelector||_.msMatchesSelector))&&s(function(e){R.disconnectedMatch=B.call(e,"div"),B.call(e,"[s!='']:x"),H.push("!=",st)}),P=RegExp(P.join("|")),H=RegExp(H.join("|")),j=n(_.contains)||_.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},F=_.compareDocumentPosition?function(e,t){var n;return e===t?(L=!0,0):(n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&n||e.parentNode&&11===e.parentNode.nodeType?e===r||j(q,e)?-1:t===r||j(q,t)?1:0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,i=0,s=e.parentNode,o=t.parentNode,a=[e],f=[t];if(e===t)return L=!0,0;if(!s||!o)return e===r?-1:t===r?1:s?-1:o?1:0;if(s===o)return u(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)f.unshift(n);while(a[i]===f[i])i++;return i?u(a[i],f[i]):a[i]===q?-1:f[i]===q?1:0},L=!1,[0,0].sort(F),R.detectDuplicates=L,M):M},o.matches=function(e,t){return o(e,null,null,t)},o.matchesSelector=function(e,t){if((e.ownerDocument||e)!==M&&O(e),t=t.replace(bt,"='$1']"),!(!R.matchesSelector||D||H&&H.test(t)||P.test(t)))try{var n=B.call(e,t);if(n||R.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return o(t,M,null,[e]).length>0},o.contains=function(e,t){return(e.ownerDocument||e)!==M&&O(e),j(e,t)},o.attr=function(e,t){var n;return(e.ownerDocument||e)!==M&&O(e),D||(t=t.toLowerCase()),(n=T.attrHandle[t])?n(e):D||R.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},o.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},o.uniqueSort=function(e){var t,n=[],r=1,i=0;if(L=!R.detectDuplicates,e.sort(F),L){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},N=o.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=N(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=N(t);return n},T=o.selectors={cacheLength:50,createPseudo:i,match:ht,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,Et),e[3]=(e[4]||e[5]||"").replace(wt,Et),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||o.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&o.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return ht.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&lt.test(n)&&(t=c(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(wt,Et).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=W[e+" "];return t||(t=RegExp("(^|"+et+")"+e+"("+et+"|$)"))&&W(e,function(e){return t.test(e.className||typeof e.getAttribute!==$&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=o.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[I]||(m[I]={}),f=l[e]||[],p=f[0]===U&&f[1],h=f[0]===U&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[U,p,h];break}}else if(y&&(f=(t[I]||(t[I]={}))[e])&&f[0]===U)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[I]||(c[I]={}))[e]=[U,h]),c===t))break;return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=T.pseudos[e]||T.setFilters[e.toLowerCase()]||o.error("unsupported pseudo: "+e);return r[I]?r(t):r.length>1?(n=[e,e,"",t],T.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=Z.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:i(function(e){var t=[],n=[],r=k(e.replace(ot,"$1"));return r[I]?i(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:i(function(e){return function(t){return o(e,t).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||N(t)).indexOf(e)>-1}}),lang:i(function(e){return ct.test(e||"")||o.error("unsupported lang: "+e),e=e.replace(wt,Et).toLowerCase(),function(t){var n;do if(n=D?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===_},focus:function(e){return e===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(S in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[S]=a(S);for(S in{submit:!0,reset:!0})T.pseudos[S]=f(S);k=o.compile=function(e,t){var n,r=[],i=[],s=V[e+" "];if(!s){t||(t=c(e)),n=t.length;while(n--)s=g(t[n]),s[I]?r.push(s):i.push(s);s=V(e,y(i,r))}return s},T.pseudos.nth=T.pseudos.eq,T.filters=E.prototype=T.pseudos,T.setFilters=new E,O(),o.attr=at.attr,at.find=o,at.expr=o.selectors,at.expr[":"]=at.expr.pseudos,at.unique=o.uniqueSort,at.text=o.getText,at.isXMLDoc=o.isXML,at.contains=o.contains}(e);var Rt=/Until$/,Ut=/^(?:parents|prev(?:Until|All))/,zt=/^.[^:#\[\.,]*$/,Wt=at.expr.match.needsContext,Xt={children:!0,contents:!0,next:!0,prev:!0};at.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(at(e).filter(function(){for(t=0;i>t;t++)if(at.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)at.find(e,this[t],n);return n=this.pushStack(i>1?at.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=at(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(at.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(c(this,e,!1))},filter:function(e){return this.pushStack(c(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?Wt.test(e)?at(e,this.context).index(this[0])>=0:at.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=Wt.test(e)||"string"!=typeof e?at(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(o?o.index(n)>-1:at.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return this.pushStack(s.length>1?at.unique(s):s)},index:function(e){return e?"string"==typeof e?at.inArray(this[0],at(e)):at.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?at(e,t):at.makeArray(e&&e.nodeType?[e]:e),r=at.merge(this.get(),n);return this.pushStack(at.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),at.fn.andSelf=at.fn.addBack,at.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return at.dir(e,"parentNode")},parentsUntil:function(e,t,n){return at.dir(e,"parentNode",n)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return at.dir(e,"nextSibling")},prevAll:function(e){return at.dir(e,"previousSibling")},nextUntil:function(e,t,n){return at.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return at.dir(e,"previousSibling",n)},siblings:function(e){return at.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return at.sibling(e.firstChild)},contents:function(e){return at.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:at.merge([],e.childNodes)}},function(e,t){at.fn[e]=function(n,r){var i=at.map(this,t,n);return Rt.test(e)||(r=n),r&&"string"==typeof r&&(i=at.filter(r,i)),i=this.length>1&&!Xt[e]?at.unique(i):i,this.length>1&&Ut.test(e)&&(i=i.reverse()),this.pushStack(i)}}),at.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?at.find.matchesSelector(t[0],e)?[t[0]]:[]:at.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&9!==s.nodeType&&(r===t||1!==s.nodeType||!at(s).is(r)))1===s.nodeType&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Vt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",$t=/ jQuery\d+="(?:null|\d+)"/g,Jt=RegExp("<(?:"+Vt+")[\\s/>]","i"),Kt=/^\s+/,Qt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Gt=/<([\w:]+)/
,Yt=/<tbody/i,Zt=/<|&#?\w+;/,en=/<(?:script|style|link)/i,tn=/^(?:checkbox|radio)$/i,nn=/checked\s*(?:[^=]|=\s*.checked.)/i,rn=/^$|\/(?:java|ecma)script/i,sn=/^true\/(.*)/,on=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,un={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:at.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},an=h(J),fn=an.appendChild(J.createElement("div"));un.optgroup=un.option,un.tbody=un.tfoot=un.colgroup=un.caption=un.thead,un.th=un.td,at.fn.extend({text:function(e){return at.access(this,function(e){return e===t?at.text(this):this.empty().append((this[0]&&this[0].ownerDocument||J).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(at.isFunction(e))return this.each(function(t){at(this).wrapAll(e.call(this,t))});if(this[0]){var t=at(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return at.isFunction(e)?this.each(function(t){at(this).wrapInner(e.call(this,t))}):this.each(function(){var t=at(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=at.isFunction(e);return this.each(function(n){at(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){at.nodeName(this,"body")||at(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||at.filter(e,[n]).length>0)&&(t||1!==n.nodeType||at.cleanData(b(n)),n.parentNode&&(t&&at.contains(n.ownerDocument,n)&&m(b(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&at.cleanData(b(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&at.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return at.clone(this,e,t)})},html:function(e){return at.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace($t,""):t;if(!("string"!=typeof e||en.test(e)||!at.support.htmlSerialize&&Jt.test(e)||!at.support.leadingWhitespace&&Kt.test(e)||un[(Gt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Qt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(at.cleanData(b(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=at.isFunction(e);return t||"string"==typeof e||(e=at(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(at(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=tt.apply([],e);var i,s,o,u,a,f,l=0,c=this.length,h=this,m=c-1,g=e[0],y=at.isFunction(g);if(y||!(1>=c||"string"!=typeof g||at.support.checkClone)&&nn.test(g))return this.each(function(i){var s=h.eq(i);y&&(e[0]=g.call(this,i,n?s.html():t)),s.domManip(e,n,r)});if(c&&(f=at.buildFragment(e,this[0].ownerDocument,!1,this),i=f.firstChild,1===f.childNodes.length&&(f=i),i)){for(n=n&&at.nodeName(i,"tr"),u=at.map(b(f,"script"),d),o=u.length;c>l;l++)s=f,l!==m&&(s=at.clone(s,!0,!0),o&&at.merge(u,b(s,"script"))),r.call(n&&at.nodeName(this[l],"table")?p(this[l],"tbody"):this[l],s,l);if(o)for(a=u[u.length-1].ownerDocument,at.map(u,v),l=0;o>l;l++)s=u[l],rn.test(s.type||"")&&!at._data(s,"globalEval")&&at.contains(a,s)&&(s.src?at.ajax({url:s.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):at.globalEval((s.text||s.textContent||s.innerHTML||"").replace(on,"")));f=i=null}return this}}),at.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){at.fn[e]=function(e){var n,r=0,i=[],s=at(e),o=s.length-1;for(;o>=r;r++)n=r===o?this:this.clone(!0),at(s[r])[t](n),nt.apply(i,n.get());return this.pushStack(i)}}),at.extend({clone:function(e,t,n){var r,i,s,o,u,a=at.contains(e.ownerDocument,e);if(at.support.html5Clone||at.isXMLDoc(e)||!Jt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(fn.innerHTML=e.outerHTML,fn.removeChild(s=fn.firstChild)),!(at.support.noCloneEvent&&at.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||at.isXMLDoc(e)))for(r=b(s),u=b(e),o=0;null!=(i=u[o]);++o)r[o]&&y(i,r[o]);if(t)if(n)for(u=u||b(e),r=r||b(s),o=0;null!=(i=u[o]);o++)g(i,r[o]);else g(e,s);return r=b(s,"script"),r.length>0&&m(r,!a&&b(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,p=h(t),d=[],v=0;for(;c>v;v++)if(s=e[v],s||0===s)if("object"===at.type(s))at.merge(d,s.nodeType?[s]:s);else if(Zt.test(s)){u=u||p.appendChild(t.createElement("div")),a=(Gt.exec(s)||["",""])[1].toLowerCase(),l=un[a]||un._default,u.innerHTML=l[1]+s.replace(Qt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;if(!at.support.leadingWhitespace&&Kt.test(s)&&d.push(t.createTextNode(Kt.exec(s)[0])),!at.support.tbody){s="table"!==a||Yt.test(s)?"<table>"!==l[1]||Yt.test(s)?0:u:u.firstChild,i=s&&s.childNodes.length;while(i--)at.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}at.merge(d,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=p.lastChild}else d.push(t.createTextNode(s));u&&p.removeChild(u),at.support.appendChecked||at.grep(b(d,"input"),w),v=0;while(s=d[v++])if((!r||-1===at.inArray(s,r))&&(o=at.contains(s.ownerDocument,s),u=b(p.appendChild(s),"script"),o&&m(u),n)){i=0;while(s=u[i++])rn.test(s.type||"")&&n.push(s)}return u=null,p},cleanData:function(e,t){var n,r,i,s,o=0,u=at.expando,a=at.cache,f=at.support.deleteExpando,l=at.event.special;for(;null!=(n=e[o]);o++)if((t||at.acceptData(n))&&(i=n[u],s=i&&a[i])){if(s.events)for(r in s.events)l[r]?at.event.remove(n,r):at.removeEvent(n,r,s.handle);a[i]&&(delete a[i],f?delete n[u]:typeof n.removeAttribute!==$?n.removeAttribute(u):n[u]=null,Z.push(i))}}});var ln,cn,hn,pn=/alpha\([^)]*\)/i,dn=/opacity\s*=\s*([^)]*)/,vn=/^(top|right|bottom|left)$/,mn=/^(none|table(?!-c[ea]).+)/,gn=/^margin/,yn=RegExp("^("+ft+")(.*)$","i"),bn=RegExp("^("+ft+")(?!px)[a-z%]+$","i"),wn=RegExp("^([+-])=("+ft+")","i"),En={BODY:"block"},Sn={position:"absolute",visibility:"hidden",display:"block"},xn={letterSpacing:0,fontWeight:400},Tn=["Top","Right","Bottom","Left"],Nn=["Webkit","O","Moz","ms"];at.fn.extend({css:function(e,n){return at.access(this,function(e,n,r){var i,s,o={},u=0;if(at.isArray(n)){for(s=cn(e),i=n.length;i>u;u++)o[n[u]]=at.css(e,n[u],!1,s);return o}return r!==t?at.style(e,n,r):at.css(e,n)},e,n,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:S(this))?at(this).show():at(this).hide()})}}),at.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=hn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":at.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=at.camelCase(n),f=e.style;if(n=at.cssProps[a]||(at.cssProps[a]=E(f,a)),u=at.cssHooks[n]||at.cssHooks[a],r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];if(o=typeof r,"string"===o&&(s=wn.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(at.css(e,n)),o="number"),!(null==r||"number"===o&&isNaN(r)||("number"!==o||at.cssNumber[a]||(r+="px"),at.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(f[n]="inherit"),u&&"set"in u&&(r=u.set(e,r,i))===t)))try{f[n]=r}catch(l){}}},css:function(e,n,r,i){var s,o,u,a=at.camelCase(n);return n=at.cssProps[a]||(at.cssProps[a]=E(e.style,a)),u=at.cssHooks[n]||at.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=hn(e,n,i)),"normal"===o&&n in xn&&(o=xn[n]),""===r||r?(s=parseFloat(o),r===!0||at.isNumeric(s)?s||0:o):o},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),e.getComputedStyle?(cn=function(t){return e.getComputedStyle(t,null)},hn=function(e,n,r){var i,s,o,u=r||cn(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(""!==a||at.contains(e.ownerDocument,e)||(a=at.style(e,n)),bn.test(a)&&gn.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):J.documentElement.currentStyle&&(cn=function(e){return e.currentStyle},hn=function(e,n,r){var i,s,o,u=r||cn(e),a=u?u[n]:t,f=e.style;return null==a&&f&&f[n]&&(a=f[n]),bn.test(a)&&!vn.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left="fontSize"===n?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),""===a?"auto":a}),at.each(["height","width"],function(e,n){at.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&mn.test(at.css(e,"display"))?at.swap(e,Sn,function(){return C(e,n,i)}):C(e,n,i):t},set:function(e,t,r){var i=r&&cn(e);return T(e,t,r?N(e,n,r,at.support.boxSizing&&"border-box"===at.css(e,"boxSizing",!1,i),i):0)}}}),at.support.opacity||(at.cssHooks.opacity={get:function(e,t){return dn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=at.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===at.trim(s.replace(pn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=pn.test(s)?s.replace(pn,i):s+" "+i)}}),at(function(){at.support.reliableMarginRight||(at.cssHooks.marginRight={get:function(e,n){return n?at.swap(e,{display:"inline-block"},hn,[e,"marginRight"]):t}}),!at.support.pixelPosition&&at.fn.position&&at.each(["top","left"],function(e,n){at.cssHooks[n]={get:function(e,r){return r?(r=hn(e,n),bn.test(r)?at(e).position()[n]+"px":r):t}}})}),at.expr&&at.expr.filters&&(at.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!at.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||at.css(e,"display"))},at.expr.filters.visible=function(e){return!at.expr.filters.hidden(e)}),at.each({margin:"",padding:"",border:"Width"},function(e,t){at.cssHooks[e+t]={expand:function(n){var r=0,i={},s="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Tn[r]+t]=s[r]||s[r-2]||s[0];return i}},gn.test(e)||(at.cssHooks[e+t].set=T)});var Cn=/%20/g,kn=/\[\]$/,Ln=/\r?\n/g,An=/^(?:submit|button|image|reset|file)$/i,On=/^(?:input|select|textarea|keygen)/i;at.fn.extend({serialize:function(){return at.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=at.prop(this,"elements");return e?at.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!at(this).is(":disabled")&&On.test(this.nodeName)&&!An.test(e)&&(this.checked||!tn.test(e))}).map(function(e,t){var n=at(this).val();return null==n?null:at.isArray(n)?at.map(n,function(e){return{name:t.name,value:e.replace(Ln,"\r\n")}}):{name:t.name,value:n.replace(Ln,"\r\n")}}).get()}}),at.param=function(e,n){var r,i=[],s=function(e,t){t=at.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=at.ajaxSettings&&at.ajaxSettings.traditional),at.isArray(e)||e.jquery&&!at.isPlainObject(e))at.each(e,function(){s(this.name,this.value)});else for(r in e)A(r,e[r],n,s);return i.join("&").replace(Cn,"+")},at.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){at.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),at.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var Mn,_n,Dn=at.now(),Pn=/\?/,Hn=/#.*$/,Bn=/([?&])_=[^&]*/,jn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Fn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,In=/^(?:GET|HEAD)$/,qn=/^\/\//,Rn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Un=at.fn.load,zn={},Wn={},Xn="*/".concat("*");try{_n=K.href}catch(Vn){_n=J.createElement("a"),_n.href="",_n=_n.href}Mn=Rn.exec(_n.toLowerCase())||[],at.fn.load=function(e,n,r){if("string"!=typeof e&&Un)return Un.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),at.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(o="POST"),u.length>0&&at.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?at("<div>").append(at.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},at.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){at.fn[t]=function(e){return this.on(t,e)}}),at.each(["get","post"],function(e,n){at[n]=function(e,r,i,s){return at.isFunction(r)&&(s=s||i,i=r,r=t),at.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),at.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_n,type:"GET",isLocal:Fn.test(Mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":at.parseJSON,"text xml":at.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_(_(e,at.ajaxSettings),t):_(at.ajaxSettings,e)},ajaxPrefilter:O(zn),ajaxTransport:O(Wn),ajax:function(e,n){function r(e,n,r,i){var s,c,y,b,E,x=n;2!==w&&(w=2,a&&clearTimeout(a),l=t,u=i||"",S.readyState=e>0?4:0,r&&(b=D(h,S,r)),e>=200&&300>e||304===e?(h.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(at.lastModified[o]=E),E=S.getResponseHeader("etag"),E&&(at.etag[o]=E)),204===e?(s=!0,x="nocontent"):304===e?(s=!0,x="notmodified"):(s=P(h,b),x=s.state,c=s.data,y=s.error,s=!y)):(y=x,(e||!x)&&(x="error",0>e&&(e=0))),S.status=e,S.statusText=(n||x)+"",s?v.resolveWith(p,[c,x,S]):v.rejectWith(p,[S,x,y]),S.statusCode(g),g=t,f&&d.trigger(s?"ajaxSuccess":"ajaxError",[S,h,s?c:y]),m.fireWith(p,[S,x]),f&&(d.trigger("ajaxComplete",[S,h]),--at.active||at.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var i,s,o,u,a,f,l,c,h=at.ajaxSetup({},n),p=h.context||h,d=h.context&&(p.nodeType||p.jquery)?at(p):at.event,v=at.Deferred(),m=at.Callbacks("once memory"),g=h.statusCode||{},y={},b={},w=0,E="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!c){c={};while(t=jn.exec(u))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?u:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return w||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)g[t]=[g[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||E;return l&&l.abort(t),r(0,t),this}};if(v.promise(S).complete=m.add,S.success=S.done,S.error=S.fail,h.url=((e||h.url||_n)+"").replace(Hn,"").replace(qn,Mn[1]+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=at.trim(h.dataType||"*").toLowerCase().match(lt)||[""],null==h.crossDomain&&(i=Rn.exec(h.url.toLowerCase()),h.crossDomain=!(!i||i[1]===Mn[1]&&i[2]===Mn[2]&&(i[3]||("http:"===i[1]?80:443))==(Mn[3]||("http:"===Mn[1]?80:443)))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=at.param(h.data,h.traditional)),M(zn,h,n,S),2===w)return S;f=h.global,f&&0===at.active++&&at.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!In.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(Pn.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Bn.test(o)?o.replace(Bn,"$1_="+Dn++):o+(Pn.test(o)?"&":"?")+"_="+Dn++)),h.ifModified&&(at.lastModified[o]&&S.setRequestHeader("If-Modified-Since",at.lastModified[o]),at.etag[o]&&S.setRequestHeader("If-None-Match",at.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",h.contentType),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Xn+"; q=0.01":""):h.accepts["*"]);for(s in h.headers)S.setRequestHeader(s,h.headers[s]);if(!h.beforeSend||h.beforeSend.call(p,S,h)!==!1&&2!==w){E="abort";for(s in{success:1,error:1,complete:1})S[s](h[s]);if(l=M(Wn,h,n,S)){S.readyState=1,f&&d.trigger("ajaxSend",[S,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){S.abort("timeout")},h.timeout));try{w=1,l.send(y,r)}catch(x){if(!(2>w))throw x;r(-1,x)}}else r(-1,"No Transport");return S}return S.abort()},getScript:function(e,n){return at.get(e,t,n,"script")},getJSON:function(e,t,n){return at.get(e,t,n,"json")}}),at.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return at.globalEval(e),e}}}),at.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),at.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=J.head||at("head")[0]||J.documentElement;return{send:function(t,i){n=J.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var $n=[],Jn=/(=)\?(?=&|$)|\?\?/;at.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=$n.pop()||at.expando+"_"+Dn++;return this[e]=!0,e}}),at.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Jn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jn.test(n.data)&&"data");return a||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=at.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Jn,"$1"+s):n.jsonp!==!1&&(n.url+=(Pn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||at.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,$n.push(s)),u&&at.isFunction(o)&&o(u[0]),u=o=t}),"script"):t});var Kn,Qn,Gn=0,Yn=e.ActiveXObject&&function(){var e;for(e in Kn)Kn[e](t,!0)};at.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&H()||B()}:H,Qn=at.ajaxSettings.xhr(),at.support.cors=!!Qn&&"withCredentials"in Qn,Qn=at.support.ajax=!!Qn,Qn&&at.ajaxTransport(function(n){if(!n.crossDomain||at.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();if(n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async),n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||4===a.readyState))if(r=t,o&&(a.onreadystatechange=at.noop,Yn&&delete Kn[o]),i)4!==a.readyState&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),"string"==typeof a.responseText&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}u||!n.isLocal||n.crossDomain?1223===u&&(u=204):u=c.text?200:404}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?4===a.readyState?setTimeout(r):(o=++Gn,Yn&&(Kn||(Kn={},at(e).unload(Yn)),Kn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Zn,er,tr=/^(?:toggle|show|hide)$/,nr=RegExp("^(?:([+-])=|)("+ft+")([a-z%]*)$","i"),rr=/queueHooks$/,ir=[R],sr={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=nr.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){if(n=+s[2],r=s[3]||(at.cssNumber[e]?"":"px"),"px"!==r&&u){u=at.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,at.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&1!==a&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};at.Animation=at.extend(I,{tweener:function(e,t){at.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],sr[n]=sr[n]||[],sr[n].unshift(t)},prefilter:function(e,t){t?ir.unshift(e):ir.push(e)}}),at.Tween=U,U.prototype={constructor:U,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(at.cssNumber[n]?"":"px")},cur:function(){var e=U.propHooks[this.prop];return e&&e.get?e.get(this):U.propHooks._default.get(this)},run:function(e){var t,n=U.propHooks[this.prop];return this.pos=t=this.options.duration?at.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):U.propHooks._default.set(this),this}},U.prototype.init.prototype=U.prototype,U.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=at.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){at.fx.step[e.prop]?at.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[at.cssProps[e.prop]]||at.cssHooks[e.prop])?at.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},at.each(["toggle","show","hide"],function(e,t){var n=at.fn[t];at.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(z(t,!0),e,r,i)}}),at.fn.extend({fadeTo:function(e,t,n,r){return this.filter(S).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=at.isEmptyObject(e),s=at.speed(t,n,r),o=function(){var t=I(this,at.extend({},e),s);o.finish=function(){t.stop(!0)},(i||at._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=at.timers,o=at._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&rr.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&at.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=at._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=at.timers,o=r?r.length:0;for(n.finish=!0,at.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),at.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){at.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),at.speed=function(e,t,n){var r=e&&"object"==typeof e?at.extend({},e):{complete:n||!n&&t||at.isFunction(e)&&e,duration:e,easing:n&&t||t&&!at.isFunction(t)&&t};return r.duration=at.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in at.fx.speeds?at.fx.speeds[r.duration]:at.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){at.isFunction(r.old)&&r.old.call(this),r.queue&&at.dequeue(this,r.queue)},r},at.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},at.timers=[],at.fx=U.prototype.init,at.fx.tick=function(){var e,n=at.timers,r=0;for(Zn=at.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||at.fx.stop(),Zn=t},at.fx.timer=function(e){e()&&at.timers.push(e)&&at.fx.start()},at.fx.interval=13,at.fx.start=function(){er||(er=setInterval(at.fx.tick,at.fx.interval))},at.fx.stop=function(){clearInterval(er),er=null},at.fx.speeds={slow:600,fast:200,_default:400},at.fx.step={},at.expr&&at.expr.filters&&(at.expr.filters.animated=function(e){return at.grep(at.timers,function(t){return e===t.elem}).length}),at.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){at.offset.setOffset(this,e,t)});var n,r,i={top:0,left:0},s=this[0],o=s&&s.ownerDocument;if(o)return n=o.documentElement,at.contains(n,s)?(typeof s.getBoundingClientRect!==$&&(i=s.getBoundingClientRect()),r=W(o),{top:i.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:i.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):i},at.offset={setOffset:function(e,t,n){var r=at.css(e,"position");"static"===r&&(e.style.position="relative");var i=at(e),s=i.offset(),o=at.css(e,"top"),u=at.css(e,"left"),a=("absolute"===r||"fixed"===r)&&at.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),at.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+c),null!=t.left&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},at.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===at.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),at.nodeName(e[0],"html")||(n=e.offset()),n.top+=at.css(e[0],"borderTopWidth",!0),n.left+=at.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-at.css(r,"marginTop",!0),left:t.left-n.left-at.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||J.documentElement;while(e&&!at.nodeName(e,"html")&&"static"===at.css(e,"position"))e=e.offsetParent;return e||J.documentElement})}}),at.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);at.fn[e]=function(i){return at.access(this,function(e,i,s){var o=W(e);return s===t?o?n in o?o[n]:o.document.documentElement[i]:e[i]:(o?o.scrollTo(r?at(o).scrollLeft():s,r?s:at(o).scrollTop()):e[i]=s,t)},e,i,arguments.length,null)}}),at.each({Height:"height",Width:"width"},function(e,n){at.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){at.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return at.access(this,function(n,r,i){var s;return at.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?at.css(n,r,u):at.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=at,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return at})})(window),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(null!=e)if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;r.computed>o&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;i>n.call(r,e[u])?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction
(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=Array(t),r=0;t>r;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);r>i;)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return 0===t.length&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,0>=f?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if("[object Array]"==i){if(o=e.length,u=o==t.length)for(;o--&&(u=O(e[o],t[o],n,r)););}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)&&(o++,!(u=x.has(t,c)&&O(e[c],t[c],n,r))))break;if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),"function"!=typeof /./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(null==e)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),!function(e,t){"use strict";var n=t.prototype.trim,r=t.prototype.trimRight,i=t.prototype.trimLeft,s=function(e){return e*1||0},o=function(e,t){if(t<1)return"";var n="";while(t>0)t&1&&(n+=e),t>>=1,e+=e;return n},u=[].slice,a=function(e){return e==null?"\\s":e.source?e.source:"["+p.escapeRegExp(e)+"]"},f={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},l={};for(var c in f)l[f[c]]=c;var h=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var n=o,r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,i){var s=1,o=r.length,u="",a,f=[],l,c,p,d,v,g;for(l=0;l<o;l++){u=e(r[l]);if(u==="string")f.push(r[l]);else if(u==="array"){p=r[l];if(p[2]){a=i[s];for(c=0;c<p[2].length;c++){if(!a.hasOwnProperty(p[2][c]))throw new Error(h('[_.sprintf] property "%s" does not exist',p[2][c]));a=a[p[2][c]]}}else p[1]?a=i[p[1]]:a=i[s++];if(/[^s]/.test(p[8])&&e(a)!="number")throw new Error(h("[_.sprintf] expecting number but found %s",e(a)));switch(p[8]){case"b":a=a.toString(2);break;case"c":a=t.fromCharCode(a);break;case"d":a=parseInt(a,10);break;case"e":a=p[7]?a.toExponential(p[7]):a.toExponential();break;case"f":a=p[7]?parseFloat(a).toFixed(p[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=t(a))&&p[7]?a.substring(0,p[7]):a;break;case"u":a=Math.abs(a);break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}a=/[def]/.test(p[8])&&p[3]&&a>=0?"+"+a:a,v=p[4]?p[4]=="0"?"0":p[4].charAt(1):" ",g=p[6]-t(a).length,d=p[6]?n(v,g):"",f.push(p[5]?a+d:d+a)}}return f.join("")},r.cache={},r.parse=function(e){var t=e,n=[],r=[],i=0;while(t){if((n=/^[^\x25]+/.exec(t))!==null)r.push(n[0]);else if((n=/^\x25{2}/.exec(t))!==null)r.push("%");else{if((n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))===null)throw new Error("[_.sprintf] huh?");if(n[2]){i|=1;var s=[],o=n[2],u=[];if((u=/^([a-z_][a-z_\d]*)/i.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1]);while((o=o.substring(u[0].length))!=="")if((u=/^\.([a-z_][a-z_\d]*)/i.exec(o))!==null)s.push(u[1]);else{if((u=/^\[(\d+)\]/.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1])}n[2]=s}else i|=2;if(i===3)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}t=t.substring(n[0].length)}return r},r}(),p={VERSION:"2.3.0",isBlank:function(e){return e==null&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return e==null?"":t(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=e==null?"":t(e),e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,n){return e==null?[]:(e=t(e),n=~~n,n>0?e.match(new RegExp(".{1,"+n+"}","g")):[e])},clean:function(e){return p.strip(e).replace(/\s+/g," ")},count:function(e,n){return e==null||n==null?0:t(e).split(n).length-1},chars:function(e){return e==null?[]:t(e).split("")},swapCase:function(e){return e==null?"":t(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return e==null?"":t(e).replace(/[&<>"']/g,function(e){return"&"+l[e]+";"})},unescapeHTML:function(e){return e==null?"":t(e).replace(/\&([^;]+);/g,function(e,n){var r;return n in f?f[n]:(r=n.match(/^#x([\da-fA-F]+)$/))?t.fromCharCode(parseInt(r[1],16)):(r=n.match(/^#(\d+)$/))?t.fromCharCode(~~r[1]):e})},escapeRegExp:function(e){return e==null?"":t(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,t,n,r){var i=p.chars(e);return i.splice(~~t,~~n,r),i.join("")},insert:function(e,t,n){return p.splice(e,t,0,n)},include:function(e,n){return n===""?!0:e==null?!1:t(e).indexOf(n)!==-1},join:function(){var e=u.call(arguments),t=e.shift();return t==null&&(t=""),e.join(t)},lines:function(e){return e==null?[]:t(e).split("\n")},reverse:function(e){return p.chars(e).reverse().join("")},startsWith:function(e,n){return n===""?!0:e==null||n==null?!1:(e=t(e),n=t(n),e.length>=n.length&&e.slice(0,n.length)===n)},endsWith:function(e,n){return n===""?!0:e==null||n==null?!1:(e=t(e),n=t(n),e.length>=n.length&&e.slice(e.length-n.length)===n)},succ:function(e){return e==null?"":(e=t(e),e.slice(0,-1)+t.fromCharCode(e.charCodeAt(e.length-1)+1))},titleize:function(e){return e==null?"":t(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return p.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t.toUpperCase()})},underscored:function(e){return p.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return p.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return p.titleize(t(e).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(e){return p.capitalize(p.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,r){return e==null?"":!r&&n?n.call(e):(r=a(r),t(e).replace(new RegExp("^"+r+"+|"+r+"+$","g"),""))},ltrim:function(e,n){return e==null?"":!n&&i?i.call(e):(n=a(n),t(e).replace(new RegExp("^"+n+"+"),""))},rtrim:function(e,n){return e==null?"":!n&&r?r.call(e):(n=a(n),t(e).replace(new RegExp(n+"+$"),""))},truncate:function(e,n,r){return e==null?"":(e=t(e),r=r||"...",n=~~n,e.length>n?e.slice(0,n)+r:e)},prune:function(e,n,r){if(e==null)return"";e=t(e),n=~~n,r=r!=null?t(r):"...";if(e.length<=n)return e;var i=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},s=e.slice(0,n+1).replace(/.(?=\W*\w*$)/g,i);return s.slice(s.length-2).match(/\w\w/)?s=s.replace(/\s*\S+$/,""):s=p.rtrim(s.slice(0,s.length-1)),(s+r).length>e.length?e:e.slice(0,s.length)+r},words:function(e,t){return p.isBlank(e)?[]:p.trim(e,t).split(t||/\s+/)},pad:function(e,n,r,i){e=e==null?"":t(e),n=~~n;var s=0;r?r.length>1&&(r=r.charAt(0)):r=" ";switch(i){case"right":return s=n-e.length,e+o(r,s);case"both":return s=n-e.length,o(r,Math.ceil(s/2))+e+o(r,Math.floor(s/2));default:return s=n-e.length,o(r,s)+e}},lpad:function(e,t,n){return p.pad(e,t,n)},rpad:function(e,t,n){return p.pad(e,t,n,"right")},lrpad:function(e,t,n){return p.pad(e,t,n,"both")},sprintf:h,vsprintf:function(e,t){return t.unshift(e),h.apply(null,t)},toNumber:function(e,n){if(e==null||e=="")return 0;e=t(e);var r=s(s(e).toFixed(~~n));return r===0&&!e.match(/^0+$/)?Number.NaN:r},numberFormat:function(e,t,n,r){if(isNaN(e)||e==null)return"";e=e.toFixed(~~t),r=r||",";var i=e.split("."),s=i[0],o=i[1]?(n||".")+i[1]:"";return s.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+o},strRight:function(e,n){if(e==null)return"";e=t(e),n=n!=null?t(n):n;var r=n?e.indexOf(n):-1;return~r?e.slice(r+n.length,e.length):e},strRightBack:function(e,n){if(e==null)return"";e=t(e),n=n!=null?t(n):n;var r=n?e.lastIndexOf(n):-1;return~r?e.slice(r+n.length,e.length):e},strLeft:function(e,n){if(e==null)return"";e=t(e),n=n!=null?t(n):n;var r=n?e.indexOf(n):-1;return~r?e.slice(0,r):e},strLeftBack:function(e,t){if(e==null)return"";e+="",t=t!=null?""+t:t;var n=e.lastIndexOf(t);return~n?e.slice(0,n):e},toSentence:function(e,t,n,r){t=t||", ",n=n||" and ";var i=e.slice(),s=i.pop();return e.length>2&&r&&(n=p.rtrim(t)+n),i.length?i.join(t)+n+s:s},toSentenceSerial:function(){var e=u.call(arguments);return e[3]=!0,p.toSentence.apply(p,e)},slugify:function(e){if(e==null)return"";var n="ąàáäâãåæćęèéëêìíïîłńòóöôõøùúüûñçżź",r="aaaaaaaaceeeeeiiiilnoooooouuuunczz",i=new RegExp(a(n),"g");return e=t(e).toLowerCase().replace(i,function(e){var t=n.indexOf(e);return r.charAt(t)||"-"}),p.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,t){return[t,e,t].join("")},quote:function(e){return p.surround(e,'"')},exports:function(){var e={};for(var t in this){if(!this.hasOwnProperty(t)||t.match(/^(?:include|contains|reverse)$/))continue;e[t]=this[t]}return e},repeat:function(e,n,r){if(e==null)return"";n=~~n;if(r==null)return o(t(e),n);for(var i=[];n>0;i[--n]=e);return i.join(r)},levenshtein:function(e,n){if(e==null&&n==null)return 0;if(e==null)return t(n).length;if(n==null)return t(e).length;e=t(e),n=t(n);var r=[],i,s;for(var o=0;o<=n.length;o++)for(var u=0;u<=e.length;u++)o&&u?e.charAt(u-1)===n.charAt(o-1)?s=i:s=Math.min(r[u],r[u-1],i)+1:s=o+u,i=r[u],r[u]=s;return r.pop()}};p.strip=p.trim,p.lstrip=p.ltrim,p.rstrip=p.rtrim,p.center=p.lrpad,p.rjust=p.lpad,p.ljust=p.rpad,p.contains=p.include,p.q=p.quote,typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(module.exports=p),exports._s=p):typeof define=="function"&&define.amd?define("underscore.string",[],function(){return p}):(e._=e._||{},e._.string=e._.str=p)}(this,String);var Hogan={};(function(e,t){function n(e,t,n){function r(){}function i(){}r.prototype=e,i.prototype=e.subs;var s,o=new r;o.subs=new i,o.ib();for(s in t)o.subs[s]=t[s];for(s in n)o.partials[s]=n[s];return o}function r(e){return String(e===null||e===undefined?"":e)}function i(e){return e=r(e),l.test(e)?e.replace(s,"&amp;").replace(o,"&lt;").replace(u,"&gt;").replace(a,"&#39;").replace(f,"&quot;"):e}e.Template=function(e,t,n,r){e=e||{},this.r=e.code||this.r,this.c=n,this.options=r,this.text=t||"",this.partials=e.partials||{},this.subs=e.subs||{},this.ib()},e.Template.prototype={r:function(e,t,n){return""},v:i,t:r,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},ep:function(e,t){var r=this.partials[e],i=t[r.name];if(r.instance&&r.base==i)return r.instance;if(typeof i=="string"){if(!this.c)throw new Error("No compiler available.");i=this.c.compile(i,this.options)}return i?(this.partials[e].base=i,r.subs&&(i=n(i,r.subs,r.partials)),this.partials[e].instance=i,i):null},rp:function(e,t,n,r){var i=this.ep(e,n);return i?i.ri(t,n,r):""},rs:function(e,t,n){var r=e[e.length-1];if(!c(r)){n(e,t,this);return}for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop()},s:function(e,t,n,r,i,s,o){var u;return c(e)&&e.length===0?!1:(typeof e=="function"&&(e=this.ms(e,t,n,r,i,s,o)),u=e===""||!!e,!r&&u&&t&&t.push(typeof e=="object"?e:t[t.length-1]),u)},d:function(e,t,n,r){var i=e.split("."),s=this.f(i[0],t,n,r),o=null;if(e==="."&&c(t[t.length-2]))return t[t.length-1];for(var u=1;u<i.length;u++)s&&typeof s=="object"&&s[i[u]]!=null?(o=s,s=s[i[u]]):s="";return r&&!s?!1:(!r&&typeof s=="function"&&(t.push(o),s=this.mv(s,t,n),t.pop()),s)},f:function(e,t,n,r){var i=!1,s=null,o=!1;for(var u=t.length-1;u>=0;u--){s=t[u];if(s&&typeof s=="object"&&s[e]!=null){i=s[e],o=!0;break}}return o?(!r&&typeof i=="function"&&(i=this.mv(i,t,n)),i):r?!1:""},ls:function(e,t,n,i,s){var o=this.options.delimiters;return this.options.delimiters=s,this.b(this.ct(r(e.call(t,i)),t,n)),this.options.delimiters=o,!1},ct:function(e,t,n){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(e,this.options).render(t,n)},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");return this.buf=[],e}:function(){var e=this.buf;return this.buf="",e},ib:function(){this.buf=t?[]:""},ms:function(e,t,n,r,i,s,o){var u=t[t.length-1],a=e.call(u);return typeof a=="function"?r?!0:this.ls(a,u,n,this.text.substring(i,s),o):a},mv:function(e,t,n){var i=t[t.length-1],s=e.call(i);return typeof s=="function"?this.ct(r(s.call(i)),i,n):s},sub:function(e,t,n,r){var i=this.subs[e];i&&i(t,n,this,r)}};var s=/&/g,o=/</g,u=/>/g,a=/\'/g,f=/\"/g,l=/[&<>\"\']/,c=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}})(typeof exports!="undefined"?exports:Hogan),function(e){function t(e){e.n.substr(e.n.length-1)==="}"&&(e.n=e.n.substring(0,e.n.length-1))}function n(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function r(e,t,n){if(t.charAt(n)!=e.charAt(0))return!1;for(var r=1,i=e.length;r<i;r++)if(t.charAt(n+r)!=e.charAt(r))return!1;return!0}function i(t,n,r,u){var a=[],f=null,l=null,c=null;l=r[r.length-1];while(t.length>0){c=t.shift();if(!(!l||l.tag!="<"||c.tag in b))throw new Error("Illegal content in < super tag.");if(e.tags[c.tag]<=e.tags.$||s(c,u))r.push(c),c.nodes=i(t,c.tag,r,u);else{if(c.tag=="/"){if(r.length===0)throw new Error("Closing tag without opener: /"+c.n);f=r.pop();if(c.n!=f.n&&!o(c.n,f.n,u))throw new Error("Nesting error: "+f.n+" vs. "+c.n);return f.end=c.i,a}c.tag=="\n"&&(c.last=t.length==0||t[0].tag=="\n")}a.push(c)}if(r.length>0)throw new Error("missing closing tag: "+r.pop().n);return a}function s(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n].o==e.n)return e.tag="#",!0}function o(e,t,n){for(var r=0,i=n.length;r<i;r++)if(n[r].c==e&&n[r].o==t)return!0}function u(e){var t=[];for(var n in e)t.push('"'+f(n)+'": function(c,p,t,i) {'+e[n]+"}");return"{ "+t.join(",")+" }"}function a(e){var t=[];for(var n in e.partials)t.push('"'+f(n)+'":{name:"'+f(e.partials[n].name)+'", '+a(e.partials[n])+"}");return"partials: {"+t.join(",")+"}, subs: "+u(e.subs)}function f(e){return e.replace(y,"\\\\").replace(v,'\\"').replace(m,"\\n").replace(g,"\\r")}function l(e){return~e.indexOf(".")?"d":"f"}function c(e,t){var n="<"+(t.prefix||""),r=n+e.n+w++;return t.partials[r]={name:e.n,partials:{}},t.code+='t.b(t.rp("'+f(r)+'",c,p,"'+(e.indent||"")+'"));',r}function h(e,t){t.code+="t.b(t.t(t."+l(e.n)+'("'+f(e.n)+'",c,p,0)));'}function p(e){return"t.b("+e+");"}var d=/\S/,v=/\"/g,m=/\n/g,g=/\r/g,y=/\\/g;e.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},e.scan=function(i,s){function o(){y.length>0&&(b.push({tag:"_t",text:new String(y)}),y="")}function u(){var t=!0;for(var n=S;n<b.length;n++){t=e.tags[b[n].tag]<e.tags._v||b[n].tag=="_t"&&b[n].text.match(d)===null;if(!t)return!1}return t}function a(e,t){o();if(e&&u())for(var n=S,r;n<b.length;n++)b[n].text&&((r=b[n+1])&&r.tag==">"&&(r.indent=b[n].text.toString()),b.splice(n,1));else t||b.push({tag:"\n"});w=!1,S=b.length}function f(e,t){var r="="+T,i=e.indexOf(r,t),s=n(e.substring(e.indexOf("=",t)+1,i)).split(" ");return x=s[0],T=s[1],i+r.length-1}var l=i.length,c=0,h=1,p=2,v=c,m=null,g=null,y="",b=[],w=!1,E=0,S=0,x="{{",T="}}";s&&(s=s.split(" "),x=s[0],T=s[1]);for(E=0;E<l;E++)v==c?r(x,i,E)?(--E,o(),v=h):i.charAt(E)=="\n"?a(w):y+=i.charAt(E):v==h?(E+=x.length-1,g=e.tags[i.charAt(E+1)],m=g?i.charAt(E+1):"_v",m=="="?(E=f(i,E),v=c):(g&&E++,v=p),w=E):r(T,i,E)?(b.push({tag:m,n:n(y),otag:x,ctag:T,i:m=="/"?w-x.length:E+T.length}),y="",E+=T.length-1,v=c,m=="{"&&(T=="}}"?E++:t(b[b.length-1]))):y+=i.charAt(E);return a(w,!0),b};var b={_t:!0,"\n":!0,$:!0,"/":!0};e.stringify=function(t,n,r){return"{code: function (c,p,i) { "+e.wrapMain(t.code)+" },"+a(t)+"}"};var w=0;e.generate=function(t,n,r){w=0;var i={code:"",subs:{},partials:{}};return e.walk(t,i),r.asString?this.stringify(i,n,r):this.makeTemplate(i,n,r)},e.wrapMain=function(e){return'var t=this;t.b(i=i||"");'+e+"return t.fl();"},e.template=e.Template,e.makeTemplate=function(e,t,n){var r=this.makePartials(e);return r.code=new Function("c","p","i",this.wrapMain(e.code)),new this.template(r,t,this,n)},e.makePartials=function(e){var t,n={subs:{},partials:e.partials,name:e.name};for(t in n.partials)n.partials[t]=this.makePartials(n.partials[t]);for(t in e.subs)n.subs[t]=new Function("c","p","t","i",e.subs[t]);return n},e.codegen={"#":function(t,n){n.code+="if(t.s(t."+l(t.n)+'("'+f(t.n)+'",c,p,1),'+"c,p,0,"+t.i+","+t.end+',"'+t.otag+" "+t.ctag+'")){'+"t.rs(c,p,"+"function(c,p,t){",e.walk(t.nodes,n),n.code+="});c.pop();}"},"^":function(t,n){n.code+="if(!t.s(t."+l(t.n)+'("'+f(t.n)+'",c,p,1),c,p,1,0,0,"")){',e.walk(t.nodes,n),n.code+="};"},">":c,"<":function(t,n){var r={partials:{},code:"",subs:{},inPartial:!0};e.walk(t.nodes,r);var i=n.partials[c(t,n)];i.subs=r.subs,i.partials=r.partials},$:function(t,n){var r={subs:{},code:"",partials:n.partials,prefix:t.n};e.walk(t.nodes,r),n.subs[t.n]=r.code,n.inPartial||(n.code+='t.sub("'+f(t.n)+'",c,p,i);')},"\n":function(e,t){t.code+=p('"\\n"'+(e.last?"":" + i"))},_v:function(e,t){t.code+="t.b(t.v(t."+l(e.n)+'("'+f(e.n)+'",c,p,0)));'},_t:function(e,t){t.code+=p('"'+f(e.text)+'"')},"{":h,"&":h},e.walk=function(t,n){var r;for(var i=0,s=t.length;i<s;i++)r=e.codegen[t[i].tag],r&&r(t[i],n);return n},e.parse=function(e,t,n){return n=n||{},i(e,"",[],n.sectionTags||[])},e.cache={},e.cacheKey=function(e,t){return[e,!!t.asString,!!t.disableLambda].join("||")},e.compile=function(t,n){n=n||{};var r=e.cacheKey(t,n),i=this.cache[r];return i?i:(i=this.generate(this.parse(this.scan(t,n.delimiters),t,n),t,n),this.cache[r]=i)}}(typeof exports!="undefined"?exports:Hogan),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;o="undefined"!=typeof exports?exports:e.Backbone={},o.VERSION="0.9.9";var u=e._;!u&&"undefined"!=typeof require&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=/\s+/,f=function(e,t,n,r){if(!n)return!0;if("object"==typeof n)for(var i in n)e[t].apply(e,[i,n[i]].concat(r));else{if(!a.test(n))return!0;n=n.split(a),i=0;for(var s=n.length;i<s;i++)e[t].apply(e,[n[i]].concat(r))}},l=function(e,t,n){var r,e=-1,i=t.length;switch(n.length){case 0:for(;++e<i;)(r=t[e]).callback.call(r.ctx);break;case 1:for(;++e<i;)(r=t[e]).callback.call(r.ctx,n[0]);break;case 2:for(;++e<i;)(r=t[e]).callback.call(r.ctx,n[0],n[1]);break;case 3:for(;++e<i;)(r=t[e]).callback.call(r.ctx,n[0],n[1],n[2]);break;default:for(;++e<i;)(r=t[e]).callback.apply(r.ctx,n)}},n=o.Events={on:function(e,t,n){return!f(this,"on",e,[t,n])||!t?this:(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this)},once:function(e,t,n){if(!f(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n),this},off:function(e,t,n){var r,i,s,o,a,l,c,h;if(!this._events||!f(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events),a=0;for(l=o.length;a<l;a++)if(e=o[a],r=this._events[e]){s=[];if(t||n){c=0;for(h=r.length;c<h;c++)i=r[c],(t&&t!==(i.callback._callback||i.callback)||n&&n!==i.context)&&s.push(i)}this._events[e]=s}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&l(this,n,t),r&&l(this,r,arguments),this},listenTo:function(e,t,n){var r=this._listeners||(this._listeners={}),i=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[i]=e,e.on(t,n||this,this),this},stopListening:function(e,t,n){var r=this._listeners;if(r){if(e)e.off(t,n,this),!t&&!n&&delete r[e._listenerId];else{for(var i in r)r[i].off(null,null,this);this._listeners={}}return this}}};n.bind=n.on,n.unbind=n.off,u.extend(o,n);var c=o.Model=function(e,t){var n,r=e||{};this.cid=u.uniqueId("c"),this.changed={},this.attributes={},this._changes=[],t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(r=this.parse(r)),(n=u.result(this,"defaults"))&&u.defaults(r,n),this.set(r,{silent:!0}),this._currentAttributes=u.clone(this.attributes),this._previousAttributes=u.clone(this.attributes),this.initialize.apply(this,arguments)};u.extend(c.prototype,n,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var r,i;if(null==e)return this;u.isObject(e)?(i=e,n=t):(i={})[e]=t;var e=n&&n.silent,s=n&&n.unset;if(!this._validate(i,n))return!1;this.idAttribute in i&&(this.id=i[this.idAttribute]);var o=this.attributes;for(r in i)t=i[r],s?delete o[r]:o[r]=t,this._changes.push(r,t);return this._hasComputed=!1,e||this.change(n),this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={},n;for(n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},fetch:function(e){e=e?u.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r),e))return!1;n&&n(t,r,e)},this.sync("read",this,e)},save:function(e,t,n){var r,i,s;null==e||u.isObject(e)?(r=e,n=t):null!=e&&((r={})[e]=t),n=n?u.clone(n):{};if(n.wait){if(r&&!this._validate(r,n))return!1;i=u.clone(this.attributes)}e=u.extend({},n,{silent:!0});if(r&&!this.set(r,n.wait?e:n)||!r&&!this._validate(null,n))return!1;var o=this,a=n.success;return n.success=function(e){s=!0;var t=o.parse(e);n.wait&&(t=u.extend(r||{},t));if(!o.set(t,n))return!1;a&&a(o,e,n)},t=this.isNew()?"create":n.patch?"patch":"update","patch"==t&&(n.attrs=r),t=this.sync(t,this,n),!s&&n.wait&&(this.clear(e),this.set(i,e)),t},destroy:function(e){var e=e?u.clone(e):{},t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e)};if(this.isNew())return e.success(),!1;var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||k();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(e){var t=this._changing;this._changing=!0;var n=this._computeChanges(!0);this._pending=!!n.length;for(var r=n.length-2;0<=r;r-=2)this.trigger("change:"+n[r],this,n[r+1],e);if(t)return this;for(;this._pending;)this._pending=!1,this.trigger("change",this,e),this._previousAttributes=u.clone(this.attributes);return this._changing=!1,this},hasChanged:function(e){return this._hasComputed||this._computeChanges(),null==e?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._previousAttributes,i;for(i in e)u.isEqual(r[i],t=e[i])||((n||(n={}))[i]=t);return n},_computeChanges:function(e){this.changed={};for(var t={},n=[],r=this._currentAttributes,i=this._changes,s=i.length-2;0<=s;s-=2){var o=i[s],u=i[s+1];t[o]||(t[o]=!0,r[o]!==u&&(this.changed[o]=u,e&&(n.push(o,u),r[o]=u)))}return e&&(this._changes=[]),this._hasComputed=!0,n},previous:function(e){return null==e||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},_validate:function(e,t){if(!this.validate)return!0;var e=u.extend({},this.attributes,e),n=this.validate(e,t);return n?(t&&t.error&&t.error(this,n,t),this.trigger("error",this,n,t),!1):!0}});var h=o.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))};u.extend(h.prototype,n,{model:c,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){var n,i,o,a,f=t&&t.at,l=null==(t&&t.sort)?!0:t.sort,e=u.isArray(e)?e.slice():[e];for(n=e.length-1;0<=n;n--)(i=this._prepareModel(e[n],t))?(e[n]=i,(o=null!=i.id&&this._byId[i.id])||this._byCid[i.cid]?(t&&t.merge&&o&&(o.set(i.attributes,t),a=l),e.splice(n,1)):(i.on("all",this._onModelEvent,this),this._byCid[i.cid]=i,null!=i.id&&(this._byId[i.id]=i))):(this.trigger("error",this,e[n],t),e.splice(n,1));e.length&&(a=l),this.length+=e.length,n=[null!=f?f:this.models.length,0],r.apply(n,e),s.apply(this.models,n),a&&this.comparator&&null==f&&this.sort({silent:!0});if(t&&t.silent)return this;for(;i=e.shift();)i.trigger("add",i,this,t);return this},remove:function(e,t){var n,r,i,s;t||(t={}),e=u.isArray(e)?e.slice():[e],n=0;for(r=e.length;n<r;n++)if(s=this.get(e[n]))delete this._byId[s.id],delete this._byCid[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s);return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e]||this._byCid[e.cid||e]},at:
function(e){return this.models[e]},where:function(e){return u.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return u.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),(!e||!e.silent)&&this.trigger("sort",this,e),this},pluck:function(e){return u.invoke(this.models,"get",e)},update:function(e,t){var n,r,i,s,o=[],a=[],f={},l=this.model.prototype.idAttribute,t=u.extend({add:!0,merge:!0,remove:!0},t);t.parse&&(e=this.parse(e)),u.isArray(e)||(e=e?[e]:[]);if(t.add&&!t.remove)return this.add(e,t);r=0;for(i=e.length;r<i;r++)n=e[r],s=this.get(n.id||n.cid||n[l]),t.remove&&s&&(f[s.cid]=!0),(t.add&&!s||t.merge&&s)&&o.push(n);if(t.remove){r=0;for(i=this.models.length;r<i;r++)n=this.models[r],f[n.cid]||a.push(n)}return a.length&&this.remove(a,t),o.length&&this.add(o,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e));for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),e&&this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?u.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){t[e.update?"update":"reset"](r,e),n&&n(t,r,e)},this.sync("read",this,e)},create:function(e,t){var n=this,t=t?u.clone(t):{},e=this._prepareModel(e,t);if(!e)return!1;t.wait||n.add(e,t);var r=t.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},chain:function(){return u(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(e instanceof c)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"===e||"remove"===e)&&n!==this||("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}}),u.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min sortedIndex toArray size first head take initial rest tail last without indexOf shuffle lastIndexOf isEmpty".split(" "),function(e){h.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}}),u.each(["groupBy","countBy","sortBy"],function(e){h.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var p=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},d=/\((.*?)\)/g,v=/:\w+/g,m=/\*\w+/g,g=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(p.prototype,n,{initialize:function(){},route:function(e,t,n){return u.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),o.history.route(e,u.bind(function(r){r=this._extractParameters(e,r),n&&n.apply(this,r),this.trigger.apply(this,["route:"+t].concat(r)),o.history.trigger("route",this,t,r)},this)),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(this.routes)for(var e,t=u.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(g,"\\$&").replace(d,"(?:$1)?").replace(v,"([^/]+)").replace(m,"(.*?)"),RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var y=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},b=/^[#\/]|\s+$/g,w=/^\/+|\/+$/g,E=/msie [\w.]+/,S=/\/$/;y.started=!1,u.extend(y.prototype,n,{interval:50,getHash:function(e){return(e=(e||this).location.href.match(/#(.*)$/))?e[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){var e=this.location.pathname,n=this.root.replace(S,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(b,"")},start:function(e){if(y.started)throw Error("Backbone.history has already been started");y.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);var e=this.getFragment(),t=document.documentMode,t=E.exec(navigator.userAgent.toLowerCase())&&(!t||7>=t);this.root=("/"+this.root+"/").replace(w,"/"),t&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?o.$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!t?o.$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e,e=this.location,t=e.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!t)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&t&&e.hash&&(this.fragment=this.getHash().replace(b,""),this.history.replaceState({},document.title,this.root+this.fragment+e.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),y.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe)));if(e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e);return u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(e,t){if(!y.started)return!1;if(!t||!0===t)t={trigger:t};e=this.getFragment(e||"");if(this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){n?(n=e.href.replace(/(javascript:|#).*$/,""),e.replace(n+"#"+t)):e.hash="#"+t}}),o.history=new y;var x=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},T=/^(\S+)\s*(.*)$/,N="model collection el id attributes className tagName events".split(" ");u.extend(x.prototype,n,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},make:function(e,t,n){return e=document.createElement(e),t&&o.$(e).attr(t),null!=n&&o.$(e).html(n),e},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=u.result(this,"events"))){this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)throw Error('Method "'+e[t]+'" does not exist');var r=t.match(T),i=r[1],r=r[2],n=u.bind(n,this),i=i+(".delegateEvents"+this.cid);""===r?this.$el.bind(i,n):this.$el.delegate(r,i,n)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,N)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(u.result(this,"el"),!1);else{var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className")),this.setElement(this.make(u.result(this,"tagName"),e),!1)}}});var C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.sync=function(e,t,n){var r=C[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||k()),null==n.data&&t&&("create"===e||"update"===e||"patch"===e)&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}"GET"!==i.type&&!n.emulateJSON&&(i.processData=!1);var a=n.success;n.success=function(e,r,i){a&&a(e,r,i),t.trigger("sync",t,e,n)};var f=n.error;return n.error=function(e){f&&f(t,e,n),t.trigger("error",t,e,n)},e=o.ajax(u.extend(i,n)),t.trigger("request",t,e,n),e},o.ajax=function(){return o.$.ajax.apply(o.$,arguments)},c.extend=h.extend=p.extend=x.extend=y.extend=function(e,t){var n=this,r;r=e&&u.has(e,"constructor")?e.constructor:function(){n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};var k=function(){throw Error('A "url" property or function must be specified')}}.call(this);var __slice=[].slice,__hasProp={}.hasOwnProperty,__indexOf=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};(function(e){return e("backbone-query",function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;return w=e("underscore"),n=e("backbone"),i=function(e,t){var n,r,i,s;s=[];for(r=0,i=e.length;r<i;r++)n=e[r],t(n)&&s.push(n);return s},v=function(e,t){var n,r,i,s;s=[];for(r=0,i=e.length;r<i;r++)n=e[r],t(n)||s.push(n);return s},r=function(e,t){var n,r,i;for(r=0,i=e.length;r<i;r++){n=e[r];if(t(n))return!0}return!1},f=function(){var e,t,n,r,i;e=1<=arguments.length?__slice.call(arguments,0):[],r={},t=r;while(e.length)n=e.shift(),i=e.length===1?e.shift():{},t=t[n]=i;return r},u=function(e){return w.isRegExp(e)?"$regex":w.isDate(e)?"$date":w.isObject(e)&&!w.isArray(e)?"object":w.isArray(e)?"array":w.isString(e)?"string":w.isNumber(e)?"number":w.isBoolean(e)?"boolean":w.isFunction(e)?"function":!1},h=function(e){var t,n,r,i,s,o,a,l,p,d,v,m,g;w.isArray(e)?o=e:o=function(){var n;n=[];for(t in e){if(!__hasProp.call(e,t))continue;p=e[t],n.push(f(t,p))}return n}(),g=[];for(v=0,m=o.length;v<m;v++){s=o[v];for(t in s){if(!__hasProp.call(s,t))continue;a=s[t],n={key:t},r=u(a);switch(r){case"$regex":case"$date":n.type=r,n.value=a;break;case"object":if(t==="$and"||t==="$or"||t==="$nor"||t==="$not")n.value=h(a),n.type=t,n.key=null;else for(l in a){d=a[l];if(b(l,d)){n.type=l;switch(l){case"$elemMatch":case"$relationMatch":n.value=c(d);break;case"$computed":i=f(t,d),n.value=h(i);break;default:n.value=d}}}break;default:n.type="$equal",n.value=a}n.type==="$equal"&&(r==="object"||r==="array")&&(n.type="$oEqual")}g.push(n)}return g},b=function(e,t){switch(e){case"$in":case"$nin":case"$all":case"$any":return w(t).isArray();case"$size":return w(t).isNumber();case"$regex":return w(t).isRegExp();case"$like":case"$likeI":return w(t).isString();case"$between":return w(t).isArray()&&t.length===2;case"$cb":return w(t).isFunction();default:return!0}},y=function(e,t){switch(e){case"$like":case"$likeI":case"$regex":return w(t).isString();case"$contains":case"$all":case"$any":case"$elemMatch":return w(t).isArray();case"$size":return w(t).isArray()||w(t).isString();case"$in":case"$nin":return t!=null;case"$relationMatch":return t!=null&&t.models;default:return!0}},p=function(e,t,n,i,s){switch(e){case"$equal":return w(n).isArray()?__indexOf.call(n,t)>=0:n===t;case"$oEqual":return w(n).isEqual(t);case"$contains":return __indexOf.call(n,t)>=0;case"$ne":return n!==t;case"$lt":return n<t;case"$gt":return n>t;case"$lte":return n<=t;case"$gte":return n>=t;case"$between":return t[0]<n&&n<t[1];case"$in":return __indexOf.call(t,n)>=0;case"$nin":return __indexOf.call(t,n)<0;case"$all":return w(t).all(function(e){return __indexOf.call(n,e)>=0});case"$any":return w(n).any(function(e){return __indexOf.call(t,e)>=0});case"$size":return n.length===t;case"$exists":case"$has":return n!=null===t;case"$like":return n.indexOf(t)!==-1;case"$likeI":return n.toLowerCase().indexOf(t.toLowerCase())!==-1;case"$regex":return t.test(n);case"$cb":return t.call(i,n);case"$elemMatch":return m(n,t,"elemMatch").length>0;case"$relationMatch":return m(n.models,t,"relationMatch").length>0;case"$computed":return a([i],t,!1,r,"computed");case"$and":case"$or":case"$nor":case"$not":return d[e]([i],t).length===1;default:return!1}},a=function(e,t,n,r,i){return i==null&&(i=!1),r(e,function(e){var r,s,o,u,a;for(u=0,a=t.length;u<a;u++){s=t[u],r=function(){switch(i){case"elemMatch":return e[s.key];case"computed":return e[s.key]();default:return e.get(s.key)}}(),o=y(s.type,r),o&&(o=p(s.type,s.value,r,e,s.key));if(n===o)return n}return!n})},d={$and:function(e,t,n){return a(e,t,!1,i,n)},$or:function(e,t,n){return a(e,t,!0,i,n)},$nor:function(e,t,n){return a(e,t,!0,v,n)},$not:function(e,t,n){return a(e,t,!1,v,n)}},c=function(e){var t,n,r,i,s,o;i=w(e).keys(),t=["$and","$not","$or","$nor"],n=w.intersection(t,i);if(n.length===0)return[{type:"$and",parsedQuery:h(e)}];if(n.length!==i.length){__indexOf.call(n,"$and")<0&&(e.$and={},n.unshift("$and"));for(r in e){if(!__hasProp.call(e,r))continue;o=e[r];if(!(__indexOf.call(t,r)<0))continue;e.$and[r]=o,delete e[r]}}return function(){var t,r,i;i=[];for(t=0,r=n.length;t<r;t++)s=n[t],i.push({type:s,parsedQuery:h(e[s])});return i}()},m=function(e,t,n){var r;return n||(t=c(t)),r=function(e,t){return d[t.type](e,t.parsedQuery,n)},w.reduce(t,r,e)},s=function(e,t,n){var r,i,s,u;return s=JSON.stringify(t),r=(u=e._queryCache)!=null?u:e._queryCache={},i=r[s],i||(i=o(e,t,n),r[s]=i),i},o=function(e,t,n){var r;return r=m(e.models,t),n.sortBy&&(r=g(r,n)),r},g=function(e,t){return w(t.sortBy).isString()?e=w(e).sortBy(function(e){return e.get(t.sortBy)}):w(t.sortBy).isFunction()&&(e=w(e).sortBy(t.sortBy)),t.order==="desc"&&(e=e.reverse()),e},l=function(e,t){var n,r,i,s;return t.offset?i=t.offset:t.page?i=(t.page-1)*t.limit:i=0,n=i+t.limit,r=e.slice(i,n),t.pager&&w.isFunction(t.pager)&&(s=Math.ceil(e.length/t.limit),t.pager(s,r)),r},n.QueryCollection=n.Collection.extend({query:function(e,t){var n;return t==null&&(t={}),t.cache?n=s(this,e,t):n=o(this,e,t),t.limit&&(n=l(n,t)),n},findOne:function(e){return this.query(e)[0]},whereBy:function(e,t){return t==null&&(t={}),new this.constructor(this.query(e,t))},resetQueryCache:function(){return this._queryCache={}}}),t.QueryCollection=n.QueryCollection})}).call(this,typeof define=="function"&&define.amd?define:function(e,t){typeof exports!="undefined"?t(function(e){return require(e)},exports):t(function(e){return this[e==="underscore"?"_":"Backbone"]},{})}),!function(e){e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;e("body").addClass("modal-open"),this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1).focus(),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,e("body").removeClass("modal-open"),this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(e){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}},e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})})}(window.jQuery),!function(e){function t(){e(r).each(function(){n(e(this)).removeClass("open")})}function n(t){var n=t.attr("data-target"),r;return n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),r=e(n),r.length||(r=t.parent()),r}var r="[data-toggle=dropdown]",i=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};i.prototype={constructor:i,toggle:function(r){var i=e(this),s,o;if(i.is(".disabled, :disabled"))return;return s=n(i),o=s.hasClass("open"),t(),o||(s.toggleClass("open"),i.focus()),!1},keydown:function(t){var r,i,s,o,u,f;if(!/(38|40|27)/.test(t.keyCode))return;r=e(this),t.preventDefault(),t.stopPropagation();if(r.is(".disabled, :disabled"))return;o=n(r),u=o.hasClass("open");if(!u||u&&t.keyCode==27)return r.click();i=e("[role=menu] li:not(.divider) a",o);if(!i.length)return;f=i.index(i.filter(":focus")),t.keyCode==38&&f>0&&f--,t.keyCode==40&&f<i.length-1&&f++,~f||(f=0),i.eq(f).focus()}},e.fn.dropdown=function(t){return this.each(function(){var n=e(this),r=n.data("dropdown");r||n.data("dropdown",r=new i(this)),typeof t=="string"&&r[t].call(n)})},e.fn.dropdown.Constructor=i,e(function(){e("html").on("click.dropdown.data-api touchstart.dropdown.data-api",t),e("body").on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",r,i.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",r+", [role=menu]",i.prototype.keydown)})}(window.jQuery),!function(e){function t(t,n){var r=e.proxy(this.process,this),i=e(t).is("body")?e(window):e(t),s;this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=i.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(s=e(t).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this,n;this.offsets=e([]),this.targets=e([]),n=this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),r=/^#\w/.test(n)&&e(n);return r&&r.length&&[[r.position().top,n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},process:function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},activate:function(t){var n,r;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}},e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("scrollspy"),s=typeof n=="object"&&n;i||r.data("scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),i,s,o;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;i=n.find(".active a").last()[0],o=e.Event("show",{relatedTarget:i}),t.trigger(o);if(o.isDefaultPrevented())return;s=e(r),this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown",relatedTarget:i})})},activate:function(t,n,r){function i(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var s=n.find("> .active"),o=r&&e.support.transition&&s.hasClass("fade");o?s.one(e.support.transition.end,i):i(),s.removeClass("in")}},e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e(function(){e("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})})}(window.jQuery),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,this.options.trigger=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):this.options.trigger!="manual"&&(i=this.options.trigger=="hover"?"mouseenter":"focus",s=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var e,t,n,r,i,s,o;if(this.hasContent()&&this.enabled){e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(s),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),n=this.getPosition(t),r=e[0].offsetWidth,i=e[0].offsetHeight;switch(t?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}e.css(o).addClass(s).addClass("in")}},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){r.off(e.support.transition.end).remove()},500);r.one(e.support.transition.end,function(){clearTimeout(t),r.remove()})}var n=this,r=this.tip();return r.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():r.remove(),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!0}}(window.jQuery),!function(e){var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content > *")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-content")||(typeof n.content=="function"?n.content.call(t[0]):n.content),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(e){var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var t=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,s=i.bottom,o=i.top,u="affix affix-top affix-bottom",f;typeof i!="object"&&(s=o=i),typeof o=="function"&&(o=i.top()),typeof s=="function"&&(s=i.bottom()),f=this.unpin!=null&&n+this.unpin<=r.top?!1:s!=null&&r.top+this.$element.height()>=t-s?"bottom":o!=null&&n<=o?"top":!1;if(this.affixed===f)return;this.affixed=f,this.unpin=f=="bottom"?r.top-n:null,this.$element.removeClass(u).addClass("affix"+(f?"-"+f:""))},e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s=typeof n=="object"&&n;i||r.data("affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),!function(e){var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){s.trigger("closed").remove()}var r=e(this),i=r.attr("data-target"),s;i||(i=r.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),s=e(i),t&&t.preventDefault(),s.length||(s=r.hasClass("alert")?r:r.parent()),s.trigger(t=e.Event("close"));if(t.isDefaultPrevented())return;s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.on(e.support.transition.end,n):n()},e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e(function(){e("body").on("click.alert.data-api",t,n.prototype.close)})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")},e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e(function(){e("body").on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,r,i;if(this.transitioning)return;t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),r=this.$parent&&this
.$parent.find("> .accordion-group > .in");if(r&&r.length){i=r.data("collapse");if(i&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])},hide:function(){var t;if(this.transitioning)return;t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0)},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[e!==null?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,r){var i=this,s=function(){n.type=="show"&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n);if(n.isDefaultPrevented())return;this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),s=typeof n=="object"&&n;i||r.data("collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e(function(){e("body").on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i).data("collapse")?"toggle":n.data();n[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(s)})})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=n,this.options.slide&&this.slide(this.options.slide),this.options.pause=="hover"&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},to:function(t){var n=this.$element.find(".item.active"),r=n.parent().children(),i=r.index(n),s=this;if(t>r.length-1||t<0)return;return this.sliding?this.$element.one("slid",function(){s.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(r[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o=t=="next"?"left":"right",u=t=="next"?"first":"last",f=this,l=e.Event("slide",{relatedTarget:i[0]});this.sliding=!0,s&&this.pause(),i=i.length?i:this.$element.find(".item")[u]();if(i.hasClass("active"))return;if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(l);if(l.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),this.$element.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),f.sliding=!1,setTimeout(function(){f.$element.trigger("slid")},0)})}else{this.$element.trigger(l);if(l.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}},e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("carousel"),s=e.extend({},e.fn.carousel.defaults,typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e(function(){e("body").on("click.carousel.data-api","[data-slide]",function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=!i.data("modal")&&e.extend({},i.data(),n.data());i.carousel(s),t.preventDefault()})})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=e(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:t.top+t.height,left:t.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),(e.browser.chrome||e.browser.webkit||e.browser.msie)&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=!~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},blur:function(e){var t=this;setTimeout(function(){t.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}},e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e(function(){e("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;t.preventDefault(),n.typeahead(n.data())})})}(window.jQuery),function(e){function t(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return-1}function n(e,n){var r,i,o,u,a;r=e.keyCode,t(w,r)==-1&&w.push(r);if(r==93||r==224)r=91;if(r in m){m[r]=!0;for(o in y)y[o]==r&&(s[o]=!0);return}if(!s.filter.call(this,e))return;if(!(r in v))return;for(u=0;u<v[r].length;u++){i=v[r][u];if(i.scope==n||i.scope=="all"){a=i.mods.length>0;for(o in m)if(!m[o]&&t(i.mods,+o)>-1||m[o]&&t(i.mods,+o)==-1)a=!1;(i.mods.length==0&&!m[16]&&!m[18]&&!m[17]&&!m[91]||a)&&i.method(e,i)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}function r(e){var n=e.keyCode,r,i=t(w,n);i>=0&&w.splice(i,1);if(n==93||n==224)n=91;if(n in m){m[n]=!1;for(r in y)y[r]==n&&(s[r]=!1)}}function i(){for(d in m)m[d]=!1;for(d in y)s[d]=!1}function s(e,t,n){var r,i,s,o;n===undefined&&(n=t,t="all"),e=e.replace(/\s/g,""),r=e.split(","),r[r.length-1]==""&&(r[r.length-2]+=",");for(s=0;s<r.length;s++){i=[],e=r[s].split("+");if(e.length>1){i=e.slice(0,e.length-1);for(o=0;o<i.length;o++)i[o]=y[i[o]];e=[e[e.length-1]]}e=e[0],e=b[e]||e.toUpperCase().charCodeAt(0),e in v||(v[e]=[]),v[e].push({shortcut:r[s],scope:t,method:n,key:r[s],mods:i})}}function o(e){if(typeof e=="string"){if(e.length!=1)return!1;e=e.toUpperCase().charCodeAt(0)}return t(w,e)!=-1}function u(){return w}function a(e){var t=(e.target||e.srcElement).tagName;return t!="INPUT"&&t!="SELECT"&&t!="TEXTAREA"}function f(e){g=e||"all"}function l(){return g||"all"}function c(e){var t,n,r;for(t in v){n=v[t];for(r=0;r<n.length;)n[r].scope===e?n.splice(r,1):r++}}function h(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,function(){n(window.event)})}function p(){var t=e.key;return e.key=E,t}var d,v={},m={16:!1,18:!1,17:!1,91:!1},g="all",y={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},b={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},w=[];for(d=1;d<20;d++)y["f"+d]=111+d;for(d in y)s[d]=!1;h(document,"keydown",function(e){n(e,g)}),h(document,"keyup",r),h(window,"focus",i);var E=e.key;e.key=s,e.key.setScope=f,e.key.getScope=l,e.key.deleteScope=c,e.key.filter=a,e.key.isPressed=o,e.key.getPressedKeyCodes=u,e.key.noConflict=p,typeof module!="undefined"&&(module.exports=key)}(this),function(){}.call(this),function(){}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/components/bootstrap_form_controls"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="btn-group form-actions">\n  <a class="btn btn-primary submit-button">\n    <i class="icon icon-ok icon-white"></i>\n    Save Changes\n  </a>\n  <a class="btn reset-button cancel-button">\n    <i class="icon icon-remove"></i>\n    Cancel\n  </a>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/components/collection_loader_view"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="progress-modal" class="modal" style="display: none">\n  <div class="progress progress-info progress-striped active">\n    <div class="bar" style="width:0%;"></div>\n  </div>\n  <div class="message">Initializing...</div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/components/form_alert"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="',className,'">\n  <a class="close" href="#" data-dismiss="alert">x</a>\n  ',message,"\n</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/components/grid_view"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="luca-ui-g-view-wrapper">\n  <div class="g-view-header"></div>\n  <div class="luca-ui-g-view-body">\n    <table class="luca-ui-g-view scrollable-table" width="100%" cellpadding=0 cellspacing=0>\n      <thead class="fixed"></thead>\n      <tbody class="scrollable"></tbody>\n      <tfoot></tfoot>\n    </table>\n  </div>\n  <div class="luca-ui-g-view-header"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/components/grid_view_empty_text"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="empty-text empty-text-wrapper">\n  <p>',text,"</p>\n</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/components/load_mask"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="load-mask">\n  <div class="progress progress-striped active">\n    <div class="bar" style="width:0%"></div>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/components/nav_bar"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="navbar-inner">\n  <div class="luca-ui-navbar-body">\n    <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">\n      <span class="icon-bar"></span>\n      <span class="icon-bar"></span>\n      <span class="icon-bar"></span>\n    </button>\n\n    <a class="brand" href="#">Set @brand</a>\n    \n    <div class="nav-collapse collapse">\n      <ul class="nav">\n        <li class="active">\n          <a href="#">Home</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/components/pagination"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="pagination">\n  <a class="btn previous">\n    <i class="icon icon-chevron-left"></i>\n  </a>\n  <div class="pagination-group">\n  </div>\n  <a class="btn next">\n    <i class="icon icon-chevron-right"></i>\n  </a>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/components/table_view"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<thead></thead>\n<tbody class="table-body"></tbody>\n<tfoot></tfoot>\n<caption></caption>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/containers/basic"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="',id,'" class="',classes,'" style="',style,'"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/containers/tab_selector_container"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div id="',cid,'-tab-selector" class="tab-selector-container">\n  <ul id="',cid,'-tabs-nav" class="nav nav-tabs">\n    ');for(var i=0;i<components.length;i++){__p.push("\n    ");var component=components[i];__p.push('\n    <li class="tab-selector" data-target="',i,'">\n      <a data-target="',i,'">\n        ',component.title,"\n      </a>\n    </li>\n    ")}__p.push("\n  </ul>\n</div>\n")}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/containers/tab_view"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<ul id="',cid,'-tabs-selector" class="nav nav-tabs"></ul>\n<div id="',cid,'-tab-view-content" class="tab-content"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/containers/toolbar_wrapper"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="luca-ui-toolbar-wrapper" id="',id,'"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/fields/button_field"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<label>&nbsp;</label>\n<input style="',inputStyles,'" class="btn ',input_class,'" value="',input_value,'" type="',input_type,'" id="<%= input_id" />\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/fields/button_field_link"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a class="btn ',input_class,'">\n  '),icon_class.length&&__p.push('\n  <i class="',icon_class,'"></i>\n  ',input_value,"\n  "),__p.push("\n</a>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/fields/checkbox_array"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="control-group">\n  <label for="',input_id,'"><%= label =>\n  <div class="controls"><div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/fields/checkbox_array_item"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<label for="',input_id,'">\n  <input id="',input_id,'" type="checkbox" name="',input_name,'" value="',value,'" />\n</label>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/fields/checkbox_field"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<label for="',input_id,'">\n  ',label,'\n  <input type="checkbox" name="',input_name,'" value="',input_value,'" style="',inputStyles,'" />\n</label>\n\n'),helperText&&__p.push('\n<p class="helper-text help-block">\n  ',helperText,"\n</p>\n"),__p.push("\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/fields/file_upload_field"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<label for="',input_id,'">\n  ',label,'\n  <input type="file" name="',input_name,'" value="',input_value,'" style="',inputStyles,'" />\n</label>\n\n'),helperText&&__p.push('\n<p class="helper-text help-block">\n  ',helperText,"\n</p>\n"),__p.push("\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/fields/hidden_field"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(' <input type="hidden" name="',input_name,'" value="',input_value,'" style="',inputStyles,'" />\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/fields/select_field"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<label for="',input_id,'">\n  ',label,'\n</label>\n<div class="controls">\n <select name="',input_name,'" value="',input_value,'" style="',inputStyles,'" ></select>\n  '),helperText&&__p.push('\n  <p class="helper-text help-block">\n    ',helperText,"\n  </p>\n  "),__p.push("\n</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/fields/text_area_field"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<label for="',input_id,'">\n  ',label,'\n</label>\n<div class="controls">\n <textarea placeholder="',placeHolder,'" name="',input_name,'" style="',inputStyles,'" >',input_value,"</textarea>\n  "),helperText&&__p.push('\n  <p class="helper-text help-block">\n    ',helperText,"\n  </p>\n  "),__p.push("\n</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["luca/templates/fields/text_field"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),(typeof label!="undefined"&&typeof hideLabel!="undefined"&&!hideLabel||typeof hideLabel=="undefined")&&__p.push('\n<label class="control-label" for="',input_id,'">',label,"</label>\n"),__p.push('\n\n<div class="controls">\n'),typeof addOn!="undefined"&&__p.push('\n  <span class="add-on">',addOn,"</span>\n"),__p.push('\n<input type="text" placeholder="',placeHolder,'" name="',input_name,'" style="',inputStyles,'" value="',input_value,'" />\n'),helperText&&__p.push('\n<p class="helper-text help-block">\n  ',helperText,"\n</p>\n"),__p.push("\n\n</div>\n");return __p.join("")}}.call(this),function(){var e,t,n=[].slice;t=function(){var e,t,r,i,s;r=arguments[0],e=2<=arguments.length?n.call(arguments,1):[];if(arguments.length===0)return(s=_(Luca.Application.instances).values())!=null?s[0]:void 0;if(_.isString(r)&&(i=Luca.cache(r)))return i;if(_.isString(r)&&(i=Luca.find(r)))return i;if(_.isString(r)&&(i=Luca.registry.find(r)))return i;if(r instanceof jQuery&&(i=Luca.find(r)))return i;if(_.isObject(r)&&r.ctype!=null)return Luca.util.lazyComponent(r);if(_.isFunction(t=_(e).last()))return t()},(window||global).Luca=function(){return t.apply(this,arguments)},_.extend(Luca,{core:{},collections:{},containers:{},components:{},models:{},concerns:{},util:{},fields:{},registry:{},options:{},config:{},logger:function(e){return function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],t.unshift(e),console.log(this,t)}},getHelper:function(){return function(){return t.apply(this,arguments)}}}),_.extend(Luca,Backbone.Events),Luca.setupCollectionSpace=function(e){var t,n;return e==null&&(e={}),t=e.baseParams,n=e.modelBootstrap,t!=null?Luca.Collection.baseParams(t):Luca.warn("You should remember to set the base params for Luca.Collection class.  You can do this by defining a property or function on Luca.config.baseParams"),n!=null?Luca.Collection.bootstrap(n):Luca.warn("You should remember to set the model bootstrap location for Luca.Collection.  You can do this by defining a property or function on Luca.config.modelBootstrap")},Luca.initialize=function(e,t){var n,r;return t==null&&(t={}),Luca.namespace=e.toLowerCase(),n=Luca.util.resolve(e,window||global)||{},_.defaults(n,{views:{},collections:{},models:{},components:{},lib:{},util:{},concerns:{},register:function(){return Luca.register.apply(this,arguments)},onReady:function(){return Luca.onReady.apply(this,arguments)},getApplication:function(){var e;return(e=Luca.getApplication)!=null?e.apply(this,arguments):void 0},getCollectionManager:function(){var e;return(e=Luca.CollectionManager.get)!=null?e.apply(this,arguments):void 0},route:Luca.routeHelper}),r={},r[e]=_.defaults(Luca.getHelper(),n),_.extend(Luca.config,t),_.extend(window||global,r),Luca.lastNamespace=e,Luca.concern.namespace(""+e+".concerns"),Luca.registry.namespace(""+e+".views"),Luca.Collection.namespace(""+e+".collections"),Luca.on("ready",function(){return Luca.setupCollectionSpace(t)})},Luca.onReady=function(e){return Luca.define.close(),Luca.trigger("ready"),$(function(){return e.apply(this,arguments)})},Luca.find=function(e){return Luca($(e).data("luca-id"))},Luca.supportsEvents=Luca.supportsBackboneEvents=function(e){return Luca.isComponent(e)||_.isFunction(e!=null?e.trigger:void 0)||_.isFunction(e!=null?e.bind:void 0)},Luca.isComponent=function(e){return Luca.isBackboneModel(e)||Luca.isBackboneView(e)||Luca.isBackboneCollection(e)},Luca.isComponentPrototype=function(e){return Luca.isViewPrototype(e)||Luca.isModelPrototype(e)||Luca.isCollectionPrototype(e)},Luca.isBackboneModel=function(e){return _.isString(e)&&(e=Luca.util.resolve(e)),_.isFunction(e!=null?e.set:void 0)&&_.isFunction(e!=null?e.get:void 0)&&_.isObject(e!=null?e.attributes:void 0)},Luca.isBackboneView=function(e){return _.isString(e)&&(e=Luca.util.resolve(e)),_.isFunction(e!=null?e.render:void 0)&&!_.isUndefined(e!=null?e.el:void 0)},Luca.isBackboneCollection=function(e){return _.isString(e)&&(e=Luca.util.resolve(e)),_.isFunction(e!=null?e.fetch:void 0)&&_.isFunction(e!=null?e.reset:void 0)},Luca.isViewPrototype=function(e){return _.isString(e)&&(e=Luca.util.resolve(e)),e!=null&&e.prototype!=null&&e.prototype.make!=null&&e.prototype.$!=null&&e.prototype.render!=null},Luca.isModelPrototype=function(e){return _.isString(e)&&(e=Luca.util.resolve(e)),e!=null&&(typeof e.prototype=="function"?e.prototype(e.prototype.save!=null&&e.prototype.changedAttributes!=null):void 0)},Luca.isCollectionPrototype=function(e){return _.isString(e)&&(e=Luca.util.resolve(e)),e!=null&&e.prototype!=null&&!Luca.isModelPrototype(e)&&e.prototype.reset!=null&&e.prototype.select!=null&&e.prototype.reject!=null},Luca.inheritanceChain=function(e){return Luca.parentClasses(e)},Luca.parentClasses=function(e){var t,n,r;return t=[],_.isString(e)&&(e=Luca.util.resolve(e)),n=typeof e.componentMetaData=="function"?e.componentMetaData():void 0,n||(n=typeof (r=e.prototype).componentMetaData=="function"?r.componentMetaData():void 0),t=(n!=null?n.classHierarchy():void 0)||[e.displayName||e.prototype.displayName]},Luca.parentClass=function(e,t){var n,r,i,s,o;return t==null&&(t=!0),_.isString(e)&&(e=Luca.util.resolve(e)),n=typeof e.componentMetaData=="function"?(i=e.componentMetaData())!=null?i.meta["super class name"]:void 0:void 0,n||(n=typeof (r=e.prototype).componentMetaData=="function"?(s=r.componentMetaData())!=null?s.meta["super class name"]:void 0:void 0),n||e.displayName||((o=e.prototype)!=null?o.displayName:void 0),t?Luca.util.resolve(n):n},e={module:function(e,t){_.extend(e,t);if(e.included&&_(e.included).isFunction())return e.included.apply(e)},"delete":function(e,t){var n;return n=e[t],delete e[t],n},idle:function(e,t){var n;return t==null&&(t=1e3),window.DISABLE_IDLE&&(t=0),n=void 0,function(){return n&&window.clearTimeout(n),n=window.setTimeout(_.bind(e,this),t)}},idleShort:function(e,t){var n;return t==null&&(t=100),window.DISABLE_IDLE&&(t=0),n=void 0,function(){return n&&window.clearTimeout(n),n=window.setTimeout(_.bind(e,this),t)}},idleMedium:function(e,t){var n;return t==null&&(t=2e3),window.DISABLE_IDLE&&(t=0),n=void 0,function(){return n&&window.clearTimeout(n),n=window.setTimeout(_.bind(e,this),t)}},idleLong:function(e,t){var n;return t==null&&(t=5e3),window.DISABLE_IDLE&&(t=0),n=void 0,function(){return n&&window.clearTimeout(n),n=window.setTimeout(_.bind(e,this),t)}}},_.mixin(e)}.call(this),function(){Luca.config.maintainStyleHierarchy=!0,Luca.config.maintainClassHierarchy=!0,Luca.config.autoApplyClassHierarchyAsCssClasses=!0,Luca.config.idAttributeType="integer",Luca.config.apiSortByParameter="sortBy",Luca.config.apiPageParameter="page",Luca.config.apiLimitParameter="limit",Luca.autoRegister=Luca.config.autoRegister=!0,Luca.developmentMode=Luca.config.developmentMode=!1,Luca.enableGlobalObserver=Luca.config.enableGlobalObserver=!1,Luca.config.enableBoostrap=Luca.config.enableBootstrap=!0,Luca.config.fluidWrapperClass="container-fluid",Luca.config.wrapperClass="container",Luca.config.enhancedViewProperties=!0,Luca.keys=Luca.config.keys={ENTER:13,ESCAPE:27,KEYLEFT:37,KEYUP:38,KEYRIGHT:39,KEYDOWN:40,SPACEBAR:32,FORWARDSLASH:191,TAB:9},Luca.config.toolbarContainerClass="toolbar-container",Luca.keyMap=Luca.config.keyMap=_(Luca.keys).inject(function(e,t,n){return e[t]=n.toLowerCase(),e},{}),Luca.config.showWarnings=!0,Luca.config.default_socket_port=9292}.call(this),function(){var currentNamespace,__slice=[].slice;Luca.util.resolve=function(e,t){var n;if(!_.isString(e))return e;try{t||(t=window||global),n=_(e.split(/\./)).inject(function(e,t){return e=e!=null?e[t]:void 0},t)}catch(r){throw console.log("Error resolving",e,t),r}return n},Luca.util.nestedValue=Luca.util.resolve,Luca.util.argumentsLogger=function(e){return function(){return console.log(""+e+" "+(typeof this.identifier=="function"?this.identifier():void 0),arguments)}},Luca.util.read=function(){var e,t;return t=arguments[0],e=2<=arguments.length?__slice.call(arguments,1):[],_.isFunction(t)?t.apply(this,e):t},Luca.util.readAll=function(e){var t,n,r;e==null&&(e={}),n={};for(t in e)r=e[t],n[t]=Luca.util.read(r);return n},Luca.util.classify=function(e){return e==null&&(e=""),_.string.camelize(_.string.capitalize(e))},Luca.util.hook=function(e){var t,n,r;return e==null&&(e=""),n=e.split(":"),r=n.shift(),n=_(n).map(function(e){return _.string.capitalize(e)}),t=r+n.join("")},Luca.util.toCssClass=function(){var e,t,n,r,i;return e=arguments[0],t=2<=arguments.length?__slice.call(arguments,1):[],r=e.split("."),i=function(){var e,i,s;s=[];for(e=0,i=r.length;e<i;e++){n=r[e];if(_(t).indexOf(n)!==-1)continue;n=_.str.underscored(n),n=n.replace(/_/g,"-"),s.push(n)}return s}(),i.join("-")},Luca.util.isIE=function(){try{return Object.defineProperty({},"",{}),!1}catch(e){return!0}},currentNamespace=window||global,Luca.util.namespace=function(namespace){return namespace==null?currentNamespace:(currentNamespace=_.isString(namespace)?Luca.util.resolve(namespace,window||global):namespace,currentNamespace!=null?currentNamespace:currentNamespace=eval("(window||global)."+namespace+" = {}"))},Luca.util.lazyComponent=function(config){var componentClass,constructor,ctype;_.isObject(config)&&(ctype=config.ctype||config.type),_.isString(config)&&(ctype=config),componentClass=Luca.registry.lookup(ctype);if(!componentClass)throw"Invalid Component Type: "+ctype+".  Did you forget to register it?";return constructor=eval(componentClass),new constructor(config)},Luca.util.selectProperties=function(e,t,n){var r;return r=_(t).values(),_(r).select(e)},Luca.util.loadScript=function(e,t){var n;return n=document.createElement("script"),n.type="text/javascript",n.readyState&&(n.onreadystatechange=function(){return n.readyState==="loaded"||n.readyState==="complete"?(n.onreadystatechange=null,t()):n.onload=function(){return t()}}),n.src=e,document.body.appendChild(n)},Luca.util.make=function(e,t,n){return e==null&&(e="div"),t==null&&(t={}),n==null&&(n=""),Luca.View.prototype.make.apply(this,arguments)},Luca.util.list=function(e,t,n){var r,i,s,o;t==null&&(t={}),r=n?"ol":"ul",r=Luca.util.make(r,t);if(_.isArray(e))for(s=0,o=e.length;s<o;s++)i=e[s],$(r).append(Luca.util.make("li",{},i));return r.outerHTML},Luca.util.label=function(e,t,n){var r;return e==null&&(e=""),n==null&&(n="label"),r=n,t!=null&&(r+=" "+n+"-"+t),Luca.util.make("span",{"class":r},e)},Luca.util.badge=function(e,t,n){var r;return e==null&&(e=""),n==null&&(n="badge"),r=n,t!=null&&(r+=" "+n+"-"+t),Luca.util.make("span",{"class":r},e)},Luca.util.setupHooks=function(e){var t=this;return e||(e=this.hooks),_(e).each(function(e){var n,r;r=Luca.util.hook(e),n=function(){var e;return(e=this[r])!=null?e.apply(this,arguments):void 0};if(e!=null?e.match(/once:/):void 0)n=_.once(n);return t.on(e,n,t)})},Luca.util.setupHooksAdvanced=function(e){var t=this;return e||(e=this.hooks),_(e).each(function(e){var n,r,i,s,o,u,a;s=t[Luca.util.hook(e)],_.isArray(s)||(s=[s]),a=[];for(o=0,u=s.length;o<u;o++){r=s[o],i=_.isString(r)?t[r]:void 0,_.isFunction(r)&&(i=r),n=function(){var e;return(e=this[i])!=null?e.apply(this,arguments):void 0};if(e!=null?e.match(/once:/):void 0)n=_.once(n);a.push(t.on(e,n,t))}return a})},Luca.util.rejectBlanks=function(e){var t,n,r;n={};for(t in e)r=e[t],_.isBlank(r)!==!0&&(n[t]=r);return n},Luca.util.enableDropdowns=function(e){var t;return e==null&&(e=".dropdown-toggle"),typeof (t=$(e)).dropdown=="function"?t.dropdown():void 0}}.call(this),function(){var e=[].slice;Luca.stats={},Luca.stats.reset=function(){return Luca.__stats={}},Luca.stats.increment=function(e){var t;return Luca.__stats||(Luca.__stats={}),(t=Luca.__stats)[e]||(t[e]=1),Luca.__stats[e]=Luca.__stats[e]+1,Luca.__stats[e]},Luca.stats.report=function(){var e,t,n,r;console.log("Stats..."),n=Luca.__stats,r=[];for(e in n)t=n[e],r.push(console.log(e,t));return r},Luca.warn=function(){var t;t=1<=arguments.length?e.call(arguments,0):[];if(Luca.config.showWarnings!==!0)return;return Luca.isComponent(this)&&t.unshift(this.identifier()),t.unshift("Warning:"),console.log.apply(console,t)},Luca.log=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],Luca.isComponent(this)&&t.unshift(this.identifier()),console.log.apply(console,t)}}.call(this),function(){Luca.util.deprecateComponent=function(e,t){var n,r;n=_.template(""+e+" has been renamed to "+t+".  Please update your definitions."),(r=Luca.registry.componentAliases)[t]||(r[t]=[]),Luca.registry.componentAliases[t].push(e);if(e!==t)return Luca.registry.deprecatedComponents[e]={message:n({previous:e,newName:t}),newName:t}},Luca.util.checkDeprecationStatusOf=function(e){var t;return(t=Luca.registry.deprecatedComponents[e]
)?(Luca.log(t.message),t.newName):e}}.call(this),function(){Luca.util.setupKeymaster=Luca.util.setupKeyBindings=function(e,t){t==null&&(t="all");if(!_.isFunction(Luca.key))throw"Keymaster library has not been included.";return{on:function(n){var r,i,s;n.on("before:remove",function(){var e;return(e=Luca.key)!=null?e.deleteScope(t):void 0}),s=[];for(i in e)r=e[i],_.isString(r)&&_.isFunction(n[r])&&(r=n[r]),_.isFunction(r)?(r=_.bind(r,n),s.push(Luca.key(i,t,r))):s.push(void 0);return s}}}}.call(this),function(){}.call(this),function(){Luca.concern=function(e){var t,n;return t=_(Luca.concern.namespaces).detect(function(t){var n;return((n=Luca.util.resolve(t))!=null?n[e]:void 0)!=null}),t||(t="Luca.concerns"),n=Luca.util.resolve(t)[e],n==null&&console.log("Could not find "+e+" in ",Luca.concern.namespaces),n},Luca.concern.namespaces=["Luca.concerns"],Luca.concern.namespace=function(e){return Luca.concern.namespaces.push(e),Luca.concern.namespaces=_(Luca.concern.namespaces).uniq()},Luca.concern.setup=function(){var e,t,n,r,i,s,o,u;if(((r=this.concerns)!=null?r.length:void 0)>0){i=this.concerns,u=[];for(t=0,n=i.length;t<n;t++)e=i[t],u.push((s=Luca.concern(e))!=null?(o=s.__initializer)!=null?o.call(this,this,e):void 0:void 0);return u}},Luca.decorate=function(e){var t,n,r;try{_.isString(e)&&(n=e,t=Luca.util.resolve(n)),_.isFunction(e)&&(t=e),r=t.prototype,n=n||t.displayName,n||(n=r.displayName)}catch(i){throw console.log(i.message),console.log(i.stack),console.log("Error calling Luca.decorate on ",t,r,n),i}return{"with":function(e){var i,s,o,u,a,f,l;o=Luca.concern(e),o.__displayName||(o.__displayName=e),u=_(o).chain().keys().select(function(e){return(""+e).match(/^__/)||e==="classMethods"}),a=_(o).omit(u.value()),_.extend(r,a);if(o.classMethods!=null){l=o.classMethods;for(s in l)i=l[s],t[s]=_.bind(i,t)}return o!=null&&typeof o.__included=="function"&&o.__included(n,t,o),f=r._superClass().prototype.concerns,r.concerns||(r.concerns=[]),r.concerns.push(e),r.concerns=r.concerns.concat(f),r.concerns=_(r.concerns).chain().uniq().compact().value(),r}}}}.call(this),function(){var ComponentDefinition,cd,__slice=[].slice;ComponentDefinition=function(){function ComponentDefinition(e,t){var n;this.autoRegister=t!=null?t:!0,this.namespace=Luca.util.namespace(),this.componentId=this.componentName=e,this.superClassName="Luca.View",this.properties||(this.properties={}),this._classProperties||(this._classProperties={}),e.match(/\./)&&(this.namespaced=!0,n=e.split("."),this.componentId=n.pop(),this.namespace=n.join("."),Luca.registry.addNamespace(n.join("."))),Luca.define.__definitions.push(this)}return ComponentDefinition.create=function(e,t){return t==null&&(t=Luca.config.autoRegister),new ComponentDefinition(e,t)},ComponentDefinition.prototype.isValid=function(){return _.isObject(this.properties)?Luca.util.resolve(this.superClassName)==null?!1:this.componentName==null?!1:!0:!1},ComponentDefinition.prototype.isDefined=function(){return this.defined===!0},ComponentDefinition.prototype.isOpen=function(){return!!this.isValid()&&!this.isDefined()},ComponentDefinition.prototype.meta=function(e,t){var n,r;return r=this.namespace+"."+this.componentId,r=r.replace(/^\./,""),n=Luca.registry.addMetaData(r,e,t),this.properties.componentMetaData=function(){return Luca.registry.getMetaDataFor(r)}},ComponentDefinition.prototype["in"]=function(e){return this.namespace=e,this},ComponentDefinition.prototype.from=function(e){return this.superClassName=e,this},ComponentDefinition.prototype["extends"]=function(e){return this.superClassName=e,this},ComponentDefinition.prototype.extend=function(e){return this.superClassName=e,this},ComponentDefinition.prototype.aliases=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],this._aliases=e,this.meta("aliases",this._aliases),this},ComponentDefinition.prototype.replaces=function(){var e,t,n,r,i;t=1<=arguments.length?__slice.call(arguments,0):[],this._aliases||(this._aliases=[]),i=[];for(n=0,r=t.length;n<r;n++)e=t[n],this._aliases.push(e),i.push(Luca.util.deprecateComponent(e,this.componentName));return i},ComponentDefinition.prototype.triggers=function(){var e,t,n,r;t=1<=arguments.length?__slice.call(arguments,0):[],_.defaults(this.properties||(this.properties={}),{hooks:[]});for(n=0,r=t.length;n<r;n++)e=t[n],this.properties.hooks.push(e);return this.properties.hooks=_.uniq(this.properties.hooks),this.meta("hooks",this.properties.hooks),this},ComponentDefinition.prototype.includes=function(){var e,t,n,r;t=1<=arguments.length?__slice.call(arguments,0):[],_.defaults(this.properties||(this.properties={}),{include:[]});for(n=0,r=t.length;n<r;n++)e=t[n],this.properties.include.push(e);return this.properties.include=_.uniq(this.properties.include),this.meta("includes",this.properties.include),this},ComponentDefinition.prototype.mixesIn=function(){var e,t,n,r;t=1<=arguments.length?__slice.call(arguments,0):[],_.defaults(this.properties||(this.properties={}),{concerns:[]});for(n=0,r=t.length;n<r;n++)e=t[n],this.properties.concerns.push(e);return this.properties.concerns=_.uniq(this.properties.concerns),this.meta("concerns",this.properties.concerns),this},ComponentDefinition.prototype.contains=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],_.defaults(this.properties,{components:[]}),this.properties.components=e,this},ComponentDefinition.prototype.validatesConfigurationWith=function(e){return e==null&&(e={}),this.meta("configuration validations",e),this.properties.validatable=!0,this},ComponentDefinition.prototype.beforeDefinition=function(e){return this._classProperties.beforeDefinition=e,this},ComponentDefinition.prototype.afterDefinition=function(e){return this._classProperties.afterDefinition=e,this},ComponentDefinition.prototype.classConfiguration=function(e){return e==null&&(e={}),this.meta("class configuration",_.keys(e)),_.defaults(this._classProperties||(this._classProperties={}),e),this},ComponentDefinition.prototype.configuration=function(e){return e==null&&(e={}),this.meta("public configuration",_.keys(e)),_.defaults(this.properties||(this.properties={}),e),this},ComponentDefinition.prototype.publicConfiguration=function(e){return e==null&&(e={}),this.meta("public configuration",_.keys(e)),_.defaults(this.properties||(this.properties={}),e),this},ComponentDefinition.prototype.privateConfiguration=function(e){return e==null&&(e={}),this.meta("private configuration",_.keys(e)),_.defaults(this.properties||(this.properties={}),e),this},ComponentDefinition.prototype.classInterface=function(e){return e==null&&(e={}),this.meta("class interface",_.keys(e)),_.defaults(this._classProperties||(this._classProperties={}),e),this},ComponentDefinition.prototype.methods=function(e){return e==null&&(e={}),this.meta("public interface",_.keys(e)),_.defaults(this.properties||(this.properties={}),e),this},ComponentDefinition.prototype["public"]=function(e){return e==null&&(e={}),this.meta("public interface",_.keys(e)),_.defaults(this.properties||(this.properties={}),e),this},ComponentDefinition.prototype.publicInterface=function(e){return e==null&&(e={}),this.meta("public interface",_.keys(e)),_.defaults(this.properties||(this.properties={}),e),this},ComponentDefinition.prototype["private"]=function(e){return e==null&&(e={}),this.meta("private interface",_.keys(e)),_.defaults(this.properties||(this.properties={}),e),this},ComponentDefinition.prototype.privateInterface=function(e){return e==null&&(e={}),this.meta("private interface",_.keys(e)),_.defaults(this.properties||(this.properties={}),e),this},ComponentDefinition.prototype.definePrototype=function(properties){var alias,at,componentType,definition,include,type_alias,_base,_i,_j,_len,_len1,_ref,_ref1,_ref2,_ref3,_ref4;properties==null&&(properties={}),_.defaults(this.properties||(this.properties={}),properties),at=this.namespaced?Luca.util.resolve(this.namespace,window||global):window||global,this.namespaced&&at==null&&(eval("(window||global)."+this.namespace+" = {}"),at=Luca.util.resolve(this.namespace,window||global)),this.meta("super class name",this.superClassName),this.meta("display name",this.componentName),this.properties.displayName=this.componentName,this.properties.componentMetaData=function(){return Luca.registry.getMetaDataFor(this.displayName)},(_ref=this._classProperties)!=null&&typeof _ref.beforeDefinition=="function"&&_ref.beforeDefinition(this),definition=at[this.componentId]=Luca.extend(this.superClassName,this.componentName,this.properties);if(_.isArray((_ref1=this.properties)!=null?_ref1.include:void 0)){_ref2=this.properties.include;for(_i=0,_len=_ref2.length;_i<_len;_i++)include=_ref2[_i],_.isString(include)&&(include=Luca.util.resolve(include)),include==null&&console.log("Attempt to include module failed. "+include+" not defined."),_.extend(definition.prototype,include)}if(this._aliases!=null){_ref3=this._aliases;for(_j=0,_len1=_ref3.length;_j<_len1;_j++)alias=_ref3[_j],eval(""+alias+" = definition;")}return this.autoRegister===!0&&(Luca.isViewPrototype(definition)&&(componentType="view"),Luca.isCollectionPrototype(definition)&&((_base=Luca.Collection).namespaces||(_base.namespaces=[]),Luca.Collection.namespaces.push(this.namespace),componentType="collection"),Luca.isModelPrototype(definition)&&(componentType="model"),type_alias=_.string.underscored(this.componentId),Luca.registerComponent(type_alias,this.componentName,componentType)),this.defined=!0,_.isEmpty(this._classProperties)||_.extend(definition,this._classProperties),definition!=null&&(_ref4=definition.afterDefinition)!=null&&_ref4.call(definition,this),definition},ComponentDefinition}(),cd=ComponentDefinition.prototype,cd.concerns=cd.behavesAs=cd.uses=cd.mixesIn,cd.register=cd.defines=cd.defaults=cd.exports=cd.defaultProperties=cd.definePrototype,cd.defaultsTo=cd.enhance=cd["with"]=cd.definePrototype,cd.publicMethods=cd.publicInterface,cd.privateMethods=cd.privateInterface,cd.classProperites=cd.classMethods=cd.classInterface,_.extend(Luca.define=ComponentDefinition.create,{__definitions:[],incomplete:function(){return _(Luca.define.__definitions).select(function(e){return e.isOpen()})},close:function(){var e,t,n,r;r=Luca.define.incomplete();for(t=0,n=r.length;t<n;t++)e=r[t],e.isValid()&&e.register();return Luca.define.__definitions.length=0},findDefinition:function(e){return _(Luca.define.__definitions).detect(function(t){return t.componentName===e})}}),Luca.register=function(e){return new ComponentDefinition(e,!0)},_.mixin({def:Luca.define}),Luca.extend=function(e,t,n){var r,i,s,o,u,a,f;n==null&&(n={}),e=Luca.util.checkDeprecationStatusOf(e),s=Luca.util.resolve(e,window||global);if(!_.isFunction(s!=null?s.extend:void 0))throw"Error defining "+t+". "+e+" is not a valid component to extend from";o=Luca.registry.getMetaDataFor(e),o.descendants().push(t),n.displayName=t,n._superClass=function(){return s.displayName||(s.displayName=e),s},n._super=function(e,t,n){var r;return t==null&&(t=this),n==null&&(n=[]),(r=this._superClass().prototype[e])!=null?r.apply(t,n):void 0},r=s.extend(n);if(_.isArray(n!=null?n.include:void 0)){f=n.include;for(u=0,a=f.length;u<a;u++)i=f[u],_.isString(i)&&(i=Luca.util.resolve(i)),_.extend(r.prototype,i)}return r}}.call(this),function(){var e,t;t={classes:{},model_classes:{},collection_classes:{},namespaces:["Luca.containers","Luca.components"]},e={cid_index:{},name_index:{}},Luca.config.defaultComponentClass=Luca.defaultComponentClass="Luca.View",Luca.config.defaultComponentType=Luca.defaultComponentType="view",Luca.registry.deprecatedComponents={},Luca.registry.componentAliases={},Luca.registry.typeAliases={grid:"grid_view",form:"form_view",text:"text_field",button:"button_field",select:"select_field",card:"card_view",paged:"card_view",wizard:"card_view",collection:"collection_view",list:"collection_view",multi:"collection_multi_view",table:"table_view"},Luca.registerComponent=function(e,n,r){var i,s,o,u,a,f;r==null&&(r="view"),Luca.trigger("component:registered",e,n);switch(r){case"model":i=t.model_classes[e],t.model_classes[e]=n;break;case"collection":i=t.collection_classes[e],t.collection_classes[e]=n;break;case"view":i=t.classes[e],t.classes[e]=n;break;default:i=t.classes[e],t.classes[e]=n}if(i!=null&&Luca.config.developmentMode===!0){o=Luca.registry.findInstancesByClassName(n);if(o.length>0){f=[];for(u=0,a=o.length;u<a;u++)s=o[u],f.push(typeof s.refreshEventBindings=="function"?s.refreshEventBindings():void 0);return f}}},Luca.registry.addNamespace=Luca.registry.namespace=function(e){return t.namespaces.push(e),t.namespaces=_(t.namespaces).uniq()},Luca.registry.namespaces=function(e){return e==null&&(e=!0),_(t.namespaces).map(function(t){return e?Luca.util.resolve(t):t})},Luca.registry.lookup=function(e){var n,r,i,s,o,u;if(n=Luca.registry.typeAliases[e])e=n;return r=t.classes[e],r!=null?r:(i=Luca.util.classify(e),o=Luca.registry.namespaces(),s=(u=_(o).chain().map(function(e){return e[i]}).compact().value())!=null?u[0]:void 0)},Luca.registry.instances=function(){return _(e.cid_index).values()},Luca.registry.findInstancesByClass=function(e){return Luca.registry.findInstancesByClassName(e.displayName)},Luca.registry.findInstancesByClassName=function(e){var t;return _.isString(e)||(e=e.displayName),t=Luca.registry.instances(),_(t).select(function(t){var n,r;return n=t.displayName===e,t.displayName===e||(typeof t._superClass=="function"?(r=t._superClass())!=null?r.displayName:void 0:void 0)===e})},Luca.registry.classes=function(e){return e==null&&(e=!1),_(_.extend({},t.classes,t.model_classes,t.collection_classes)).map(function(t,n){return e?t:{className:t,ctype:n}})},Luca.registry.find=function(e){return Luca.util.resolve(e)||Luca.define.findDefinition(e)},Luca.remove=Luca.registry.removeInstance=function(t){if(t==null)return;return _(e.name_index)["delete"](t),_(e.cid_index)["delete"](t)},Luca.cache=Luca.registry.cacheInstance=function(t,n){var r;if(t==null)return;return(n!=null?n.doNotCache:void 0)===!0?n:(n!=null&&(e.cid_index[t]=n),n=e.cid_index[t],(n!=null?n.component_name:void 0)!=null?e.name_index[n.component_name]=n.cid:(n!=null?n.name:void 0)!=null&&(e.name_index[n.name]=n.cid),n!=null?n:(r=e.name_index[t],e.cid_index[r]))}}.call(this),function(){var e;Luca.registry.componentMetaData={},Luca.registry.getMetaDataFor=function(t){return new e(Luca.registry.componentMetaData[t])},Luca.registry.addMetaData=function(e,t,n){var r,i;return r=(i=Luca.registry.componentMetaData)[e]||(i[e]={}),r[t]=_(n).clone(),r},e=function(){function e(e){this.meta=e!=null?e:{},_.defaults(this.meta,{"super class name":"","display name":"",descendants:[],aliases:[],"public interface":[],"public configuration":[],"private interface":[],"private configuration":[],"class configuration":[],"class interface":[]})}return e.prototype.className=function(){return this.meta["display name"]},e.prototype.superClass=function(){return Luca.util.resolve(this.meta["super class name"])},e.prototype.componentDefinition=function(){return Luca.registry.find(this.meta["display name"])},e.prototype.componentPrototype=function(){var e;return(e=this.componentDefinition())!=null?e.prototype:void 0},e.prototype.prototypeFunctions=function(){return _.functions(this.componentPrototype())},e.prototype.classAttributes=function(){return _.uniq(this.classInterface().concat(this.classConfiguration()))},e.prototype.publicAttributes=function(){return _.uniq(this.publicInterface().concat(this.publicConfiguration()))},e.prototype.privateAttributes=function(){return _.uniq(this.privateInterface().concat(this.privateConfiguration()))},e.prototype.classMethods=function(){var e;return e=_.functions(this.componentDefinition()),_(e).intersection(this.classAttributes())},e.prototype.publicMethods=function(){return _(this.prototypeFunctions()).intersection(this.publicAttributes())},e.prototype.privateMethods=function(){return _(this.prototypeFunctions()).intersection(this.privateAttributes())},e.prototype.classConfiguration=function(){return this.meta["class configuration"]},e.prototype.publicConfiguration=function(){return this.meta["public configuration"]},e.prototype.privateConfiguration=function(){return this.meta["private configuration"]},e.prototype.classInterface=function(){return this.meta["class interface"]},e.prototype.publicInterface=function(){return this.meta["public interface"]},e.prototype.privateInterface=function(){return this.meta["private interface"]},e.prototype.triggers=function(){return this.meta.hooks},e.prototype.hooks=function(){return this.meta.hooks},e.prototype.descendants=function(){return this.meta.descendants},e.prototype.styleHierarchy=function(){var e;return e=_(this.classHierarchy()).map(function(e){return Luca.util.toCssClass(e,"views","components","core","fields","containers")}),_(e).without("backbone-view","luca-view")},e.prototype.classHierarchy=function(){var e,t,n,r,i,s;e=[this.meta["display name"],this.meta["super class name"]],t=(n=this.superClass())!=null?(r=n.prototype)!=null?typeof r.componentMetaData=="function"?r.componentMetaData():void 0:void 0:void 0;while(!!t)e=e.concat(t!=null?t.classHierarchy():void 0),t=(i=t.superClass())!=null?(s=i.prototype)!=null?typeof s.componentMetaData=="function"?s.componentMetaData():void 0:void 0:void 0;return _(e).uniq()},e}()}.call(this),function(){}.call(this),function(){var e=[].slice;Luca.Observer=function(){function t(e){var t=this;this.options=e!=null?e:{},_.extend(this,Backbone.Events),this.type=this.options.type,this.options.debugAll&&this.bind("all",function(e,t,n){return console.log("ALL",e,t,n)})}return t.prototype.relay=function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],console.log("Relaying",trigger,t),this.trigger("event",n,t),this.trigger("event:"+t[0],n,t.slice(1))},t}(),Luca.Observer.enableObservers=function(e){return e==null&&(e={}),Luca.enableGlobalObserver=!0,Luca.ViewObserver=new Luca.Observer(_.extend(e,{type:"view"})),Luca.CollectionObserver=new Luca.Observer(_.extend(e,{type:"collection"}))}}.call(this),function(){var e=[].slice;Luca.DeferredBindingProxy=function(){function e(e,t,n){var r;this.object=e,n==null&&(n=!0),_.isFunction(t)?r=t:_.isString(t)&&_.isFunction(this.object[t])&&(r=this.object[t]);if(!_.isFunction(r))throw"Must pass a function or a string representing one";n===!0?this.fn=_.bind(function(){return _.defer(r)},this.object):this.fn=_.bind(r,this.object),this}return e.prototype.until=function(e,t){return e!=null&&t==null&&(t=e,e=this.object),e.once(t,this.fn),this.object},e}(),Luca.EventRelayer=function(){function t(e){e==null&&(e={}),this.target=e.target,this.events=e.events,this.prefix=e.prefix,this.source=e.source,this.events.length>0&&this.target&&this.source&&this.setup(),this}return t.prototype.prefixedBy=function(e){return this.prefix=e!=null?e:"",this},t.prototype.from=function(e){return this.source=e,this},t.prototype.to=function(e){return this.target=e,this},t.prototype.setup=function(t){var n,r,i,s,o,u;this.target=t,r=this.prefix,t=this.target,o=this.events,u=[];for(i=0,s=o.length;i<s;i++)n=o[i],console.log("Binding to ",n,r,this.target.name,this.source.name),u.push(this.source.on(n,function(){var t,i;return t=1<=arguments.length?e.call(arguments,0):[],i=_([r,n]).compact().join(":"),t.unshift(i),this.trigger.apply(this,t)},t));return u},t}(),Luca.Events={relays:function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],new Luca.EventRelayer({relayer:this,events:t})},defer:function(e,t){return t==null&&(t=!0),new Luca.DeferredBindingProxy(this,e,t)},once:function(e,t,n){var r;return n||(n=this),r=function(){return t.apply(n,arguments),this.unbind(e,r)},this.bind(e,r)}},Luca.EventsExt={waitUntil:function(e,t){return this.waitFor.call(this,e,t)},waitFor:function(t,n){var r,i;return i=this,r={on:function(e){return e.waitFor.call(e,t,n)},and:function(){var r,s,o,u,f;s=1<=arguments.length?e.call(arguments,0):[],f=[];for(o=0,u=s.length;o<u;o++)r=s[o],r=_.isFunction(r)?r:i[r],f.push(i.once(t,r,n));return f},andThen:function(){return i.and.apply(i,arguments)}}},relayEvent:function(t){var n=this;return{on:function(){var r;return r=1<=arguments.length?e.call(arguments,0):[],{to:function(){var i,s,o,u,f,l;o=1<=arguments.length?e.call(arguments,0):[],l=[];for(u=0,f=o.length;u<f;u++)s=o[u],l.push(function(){var n,o,u,f=this;u=[];for(n=0,o=r.length;n<o;n++)i=r[n],u.push(i.on(t,function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],n.unshift(t),s.trigger.apply(s,n)}));return u}.call(n));return l}}}}}}}.call(this),function(){var e,t;Luca.templates||(Luca.templates={});if(window.JST!=null)for(t in JST){e=JST[t];if(!t.match(/^luca\/templates\//))continue;Luca.templates[t.replace("luca/templates/","")]=e,_(JST)["delete"](t)}Luca.template=function(e,t,n){var r,i,s,o,u;window.JST||(window.JST={});if(_.isFunction(e))return e(t);i=(u=Luca.templates)!=null?u[e]:void 0,r=typeof JST!="undefined"&&JST!==null?JST[e]:void 0,i==null&&r==null&&(s=new RegExp(""+e+"$"),i=_(Luca.templates).detect(function(e,t){return s.exec(t)}),r=_(JST).detect(function(e,t){return s.exec(t)}));if(!i&&!r)throw"Could not find template named "+e;return o=i||r,o instanceof Hogan.template&&t!=null?o.render(t,n):t!=null?o(t):o},Luca.available_templates=function(e){var t;return e==null&&(e=""),t=_(Luca.templates).keys(),e.length>0?_(t).select(function(t){return t.match(e)}):t}}.call(this),function(){Luca.concerns.ApplicationEventBindings={__initializer:function(){var e,t,n,r,i,s,o,u;if(_.isEmpty(this.applicationEvents))return;e=this.app;if(_.isString(e)||_.isUndefined(e))e=(s=Luca.Application)!=null?typeof s.get=="function"?s.get(e):void 0:void 0;if(!Luca.supportsEvents(e))throw"Error binding to the application object on "+(this.name||this.cid);o=this.applicationEvents,u=[];for(n=r=0,i=o.length;r<i;n=++r){t=o[n],_.isString(n)&&(n=this[n]);if(!_.isFunction(n))throw"Error registering application event "+t+" on "+(this.name||this.cid);u.push(e.on(t,n,this))}return u}}}.call(this),function(){var e,t=[].slice;Luca.concerns.CollectionEventBindings={__initializer:function(){var t=this;this.defer(function(){return Luca.concerns.CollectionEventBindings.__setup.call(t)}).until("after:initialize");if(this.collectionEventBindingsSetup!==!0)return Luca.isBackboneCollection(this.collection)&&(this.collection.on("reset",e("collection:reset"),this),this.collection.on("add",e("collection:add"),this),this.collection.on("remove",e("collection:remove"),this),this.collection.on("change",e("collection:change"),this),this.collection.on("before:fetch",e("collection:fetch"),this)),this.collectionEventBindingsSetup=!0},__setup:function(){var e,t,n,r,i,s,o,u,a;if(_.isEmpty(this.collectionEvents))return;i=this.collectionManager||Luca.CollectionManager.get(),o=this.collectionEvents,a=[];for(s in o){n=o[s],u=s.split(" "),r=u[0],t=u[1],e=i.getOrCreate(r);if(!e)throw"Could not find collection specified by "+r;_.isString(n)&&(n=this[n]);if(!_.isFunction(n))throw"invalid collectionEvents configuration";try{a.push(e.on(t,n,this))}catch(f){throw console.log("Error Binding To Collection in registerCollectionEvents",this),f}}return a}},e=function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],n.unshift(e),this.trigger.apply(this,n)}}}.call(this),function(){Luca.concerns.Deferrable={configure_collection:function(e){var t,n,r;e==null&&(e=!0);if(!this.collection)return;_.isString(this.collection)&&(t=(n=Luca.CollectionManager)!=null?n.get():void 0)&&(this.collection=t.getOrCreate(this.collection)),_.isObject(this.collection)&&!Luca.isBackboneCollection(this.collection)&&(this.collection=new Luca.Collection(this.collection.initial_set,this.collection));if((r=this.collection)!=null?r.deferrable_trigger:void 0)this.deferrable_trigger=this.collection.deferrable_trigger;if(e)return this.deferrable=this.collection}}}.call(this),function(){Luca.concerns.DevelopmentToolHelpers={refreshEventBindings:function(){var e,t,n,r,i,s,o,u,a;s=this,console.log("Refreshing Event Bindings ON ",s.name||s.cid),s.undelegateEvents(),t=(typeof s.definitionClass=="function"?(o=s.definitionClass())!=null?o.events:void 0:void 0)||s.events;for(r in t){n=t[r];if(_.isString(n)!==!0)continue;e=typeof s.definitionClass=="function"?(u=s.definitionClass())!=null?u[n]:void 0:void 0,console.log("Rebinding dom event",r,n,e),s.events[r]=e}return s.state!=null&&s.stateful!=null&&(Luca.concerns.StateModel.__setupModelBindings.call(s,"off"),Luca.concerns.StateModel.__setupModelBindings.call(s,"on")),s.isContainer===!0&&!_.isEmpty(s.componentEvents)&&(Luca.Container.prototype.registerComponentEvents.call(this,void 0,"off"),i=typeof s.definitionClass=="function"?(a=s.definitionClass())!=null?a.componentEvents:void 0:void 0,Luca.Container.prototype.registerComponentEvents.call(this,i,"on")),s.delegateEvents()}}}.call(this),function(){Luca.concerns.DomHelpers={__initializer:function(){var e,t,n,r,i,s,o,u,a,f,l,c;t=_(this.additionalClassNames||[]).clone(),this.wrapperClass!=null&&this.$wrap(this.wrapperClass),_.isString(t)&&(t=t.split(" ")),(s=this.gridSpan||this.span)&&t.push("span"+s),(i=this.gridOffset||this.offset)&&t.push("offset"+i),(this.gridRowFluid||this.rowFluid)&&t.push("row-fluid"),(this.gridRow||this.row)&&t.push("row");if(t==null)return;for(o=0,a=t.length;o<a;o++)e=t[o],this.$el.addClass(e);if(Luca.config.autoApplyClassHierarchyAsCssClasses===!0){n=(typeof this.componentMetaData=="function"?(l=this.componentMetaData())!=null?l.styleHierarchy():void 0:void 0)||[],c=[];for(u=0,f=n.length;u<f;u++)r=n[u],r!=="luca-view"&&r!=="backbone-view"&&c.push(this.$el.addClass(r));return c}},$wrap:function(e){return _.isString(e)&&!e.match(/[<>]/)&&(e=this.make("div",{"class":e,"data-wrapper":!0})),this.$el.wrap(e)},$wrapper:function(){return this.$el.parent('[data-wrapper="true"]')},$template:function(e,t){var n;t==null&&(t={});try{return this.$el.html(Luca.template(e,t))}catch(r){return console.log("Error in $template: "+e+" "+(((n=typeof this.identifier==="function"?this.identifier():void 0)!=null?n:this.name)||this.cid))}},$html:function(e){return e!=null?this.$el.html(e):this.$el.html()},$append:function(e){return this.$el.append(e)},$attach:function(){return this.$container().append(this.el)},$bodyEl:function(){return this.$el},$container:function(){return $(this.container)}}}.call(this),function(){Luca.concerns.EnhancedProperties={__initializer:function(){if(Luca.config.enhancedViewProperties!==!0)return;_.isString(this.collection)&&Luca.CollectionManager.get()&&(this.collection=Luca.CollectionManager.get().getOrCreate(this.collection)),this.template!=null&&this.$template(this.template,this);if(_.isString(this.collectionManager))return this.collectionManager=Luca.CollectionManager.get(this.collectionManager)}}}.call(this),function(){var e,t={}.hasOwnProperty,n=function(e,n){function r(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};Luca.concerns.Filterable={classMethods:{prepare:function(){var e,t,n;this.trigger("data:refresh");if(!this.isRemote())return;return e=_.clone(this.getRemoteQuery()),t=_.clone(this.getQueryOptions()),n=this.prepareRemoteFilter(e,t),this.collection.applyFilter(n,{remote:!0})}},__included:function(e,t){return _.extend(Luca.Collection.prototype,{__filters:{}})},__initializer:function(e,t){var n,r,i,s=this;if(this.filterable===!1)return;this.filterable===!0&&(this.filterable={}),Luca.isBackboneCollection(this.collection)||(this.collection=typeof (r=Luca.CollectionManager).get=="function"?(i=r.get())!=null?i.getOrCreate(this.collection):void 0:void 0);if(!Luca.isBackboneCollection(this.collection)){this.debug("Skipping Filterable due to no collection being present on "+(this.name||this.cid)),this.debug("Collection",this.collection);return}return this.getCollection||(this.getCollection=function(){return this.collection}),n=this.getFilterState(),this.querySources||(this.querySources=[]),this.optionsSources||(this.optionsSources=[]),this.query||(this.query={}),this.queryOptions||(this.queryOptions={}),this.querySources.push(function(e){return e==null&&(e={}),s.getFilterState().toQuery()}),this.optionsSources.push(function(e){return e==null&&(e={}),s.getFilterState().toOptions()}),n.on("change",function(){return s.trigger("filter:change")}),this.on("filter:change",Luca.concerns.Filterable.classMethods.prepare,this),t},prepareRemoteFilter:function(e,t){return e==null&&(e={}),t==null&&(t={}),t.limit!=null&&(e[Luca.config.apiLimitParameter]=t.limit),t.page!=null&&(e[Luca.config.apiPageParameter]=t.page),t.sortBy!=null&&(e[Luca.config.apiSortByParameter]=t.sortBy),e},isRemote:function(){var e;if(this.getQueryOptions().remote===!0)return!0;if(this.remoteFilterFallback===!0&&((e=this.getCollection())!=null?e.length:void 0)===0)return!0},getFilterState:function(){var t,n,r,i,s,o;return o=t=this.filterable||{},n=o.options,r=o.query,!_.isEmpty(t)&&_.isEmpty(r)&&_.isEmpty(n)&&_.extend(n,_(t).pluck("sortBy","page","limit")),(i=this.collection.__filters)[s=this.cid]||(i[s]=new e({query:r||{},options:n||{}}))},setSortBy:function(e,t){return t==null&&(t={}),this.getFilterState().setOption("sortBy",e,t)},applyFilter:function(e,t){return e==null&&(e={}),t==null&&(t={}),t=_.defaults(t,this.getQueryOptions()),this.getFilterState().clear({silent:!0}),this.getFilterState().set({query:e,options:t},t)}},e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return n(t,e),t.prototype.defaults={options:{},query:{}},t.prototype.setOption=function(e,t,n){var r;return r={},r[e]=t,this.set("options",_.extend(this.toOptions(),r),n)},t.prototype.setQueryOption=function(e,t,n){var r;return r={},r[e]=t,this.set("query",_.extend(this.toQuery(),r),n)},t.prototype.toOptions=function(){return _.clone(this.toJSON().options)},t.prototype.toQuery=function(){return _.clone(this.toJSON().query)},t.prototype.toRemote=function(){return Luca.concerns.Filterable.prepareRemoteFilter.call(this,this.toQuery(),this.toOptions())},t}(Backbone.Model)}.call(this),function(){Luca.concerns.FormModelBindings={__initializer:function(){if(this.trackModelChanges!==!0)return;return this.on("state:change:currentModel",this.onStateChangeCurrentModel,this),_.bindAll(this,"onStateChangeCurrentModel","unbindFromModel","onModelChange","bindToModel")},onStateChangeCurrentModel:function(e,t,n){Luca.isBackboneModel(n)&&this.unbindFromModel(n);if(Luca.isBackboneModel(t))return this.bindToModel(t)},unbindFromModel:function(e){var t;return(t=e||this.currentModel())!=null?t.unbind("change",this.onModelChange):void 0},onModelChange:function(e){return this.setValues(e,{modelChange:!0})},bindToModel:function(e){var t;return(t=e||this.currentModel())!=null?t.bind("change",this.onModelChange,this):void 0}}}.call(this),function(){Luca.concerns.GridLayout={_initializer:function(){this.gridSpan&&this.$el.addClass("span"+this.gridSpan),this.gridOffset&&this.$el.addClass("offset"+this.gridOffset),this.gridRowFluid&&this.$el.addClass("row-fluid");if(this.gridRow)return this.$el.addClass("row")}}}.call(this),function(){Luca.concerns.LoadMaskable={__initializer:function(){var e=this;if(this.loadMask===!1||this.loadMask==null)return;return this.loadMask===!0&&(this.loadMask={enableEvent:"enable:loadmask",disableEvent:"disable:loadmask"}),this.on("collection:fetch",function(){return e.trigger("enable:loadmask")}),this.on("collection:reset",function(){return e.trigger("disable:loadmask")}),this.on("after:render",function(){this.$el.addClass("with-mask");if(this.$(".load-mask").length===0&&this.loadMaskTemplate!=null)return this.loadMaskTarget().prepend(Luca.template(this.loadMaskTemplate,this)),this.$(".load-mask").hide()},this),this.on(this.loadMask.enableEvent,this.applyLoadMask,this),this.on(this.loadMask.disableEvent,this.applyLoadMask,this)},showLoadMask:function(){return this.trigger("enable:loadmask")},hideLoadMask:function(){return this.trigger("disable:loadmask")},loadMaskTarget:function(){return this.loadMaskEl!=null?this.$(this.loadMaskEl):this.$bodyEl()},disableLoadMask:function(){return this.$(".load-mask .bar").css("width","100%"),this.$(".load-mask").hide(),clearInterval(this.loadMaskInterval)},enableLoadMask:function(){var e,t=this;this.$(".load-mask").show().find(".bar").css("width","0%"),e=this.$(".load-mask .progress").width(),e<20&&(e=this.$el.width())<20&&(e=this.$el.parent().width()),this.loadMaskInterval=setInterval(function(){var e,n;return e=t.$(".load-mask .bar").width(),n=e+12,t.$(".load-mask .bar").css("width",n)},200);if(this.loadMaskTimeout==null)return;return _.delay(function(){return t.disableLoadMask()},this.loadMaskTimeout)},applyLoadMask:function(){return this.$(".load-mask").is(":visible")?this.disableLoadMask():this.enableLoadMask()}}}.call(this
),function(){Luca.LocalStore=function(){function e(e){var t;this.name=e,t=localStorage.getItem(this.name),this.data=t&&JSON.parse(t)||{}}return e.prototype.guid=function(){var e;return e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e.prototype.save=function(){return localStorage.setItem(this.name,JSON.stringify(this.data))},e.prototype.create=function(e){return e.id||(e.id=e.attribtues.id=this.guid()),this.data[e.id]=e,this.save(),e},e.prototype.update=function(e){return this.data[e.id]=e,this.save(),e},e.prototype.find=function(e){return this.data[e.id]},e.prototype.findAll=function(){return _.values(this.data)},e.prototype.destroy=function(e){return delete this.data[e.id],this.save(),e},e}(),Backbone.LocalSync=function(e,t,n){var r,i;return i=t.localStorage||t.collection.localStorage,r=function(){switch(e){case"read":return t.id?i.find(t):i.findAll();case"create":return i.create(t);case"update":return i.update(t);case"delete":return i.destroy(t)}}(),r?n.success(r):n.error("Record not found")}}.call(this),function(){Luca.concerns.ModalView={version:3,closeOnEscape:!0,showOnInitialize:!1,backdrop:!1,__initializer:function(){if(this.modal!==!0)return;return this.on("before:render",this.applyModalConfig,this),this},applyModalConfig:function(){return this.$el.addClass("modal"),this.fade===!0&&this.$el.addClass("fade"),this.$el.modal({backdrop:this.backdrop===!0,keyboard:this.closeOnEscape===!0,show:this.showOnInitialize===!0}),this.showOnInitialize!==!0&&this.$el.css("display","none"),this},container:function(){return $("body")},toggle:function(){return this.$el.modal("toggle")},show:function(){return this.rendered!==!0&&this.render(),this.trigger("before:show"),this.$el.modal("show"),this.trigger("after:show")},hide:function(){return this.trigger("before:hide"),this.$el.modal("hide"),this.trigger("after:hide")},setModalDimensions:function(e,t){var n;_.isObject(e)&&(n=e,e=n.height,t=n.width),e!=null&&this.setModalHeight(e);if(t!=null)return this.setModalWidth(t)},setModalWidth:function(e){return this.$el.css({width:e,"max-width":e,"margin-left":e*.5*-1})},setModalHeight:function(e){return this.$el.css({"max-height":e,"margin-top":e*.5*-1,height:e})}}}.call(this),function(){Luca.concerns.ModelPresenter={classMethods:{getPresenter:function(e){var t;return(t=this.presenters)!=null?t[e]:void 0},registerPresenter:function(e,t){return this.presenters||(this.presenters={}),this.presenters[e]=t}},presentAs:function(e){var t,n=this;try{return t=this.componentMetaData().componentDefinition().getPresenter(e),t==null?this.toJSON():_(t).reduce(function(e,t){return e[t]=n.read(t),e},{})}catch(r){return console.log("Error presentAs",r.stack,r.message),this.toJSON()}}}}.call(this),function(){Luca.concerns.Paginatable={paginatorViewClass:"Luca.components.PaginationControl",paginationSelector:".toolbar.bottom.pagination-container",__included:function(){return _.extend(Luca.Collection.prototype,{__paginators:{}})},__initializer:function(){var e,t,n=this;if(this.paginatable===!1)return;if(_.isNumber(this.paginatable)||_.isString(this.paginatable))this.paginatable={limit:parseInt(this.paginatable),page:1};if(!Luca.isBackboneCollection(this.collection)){this.debug("Skipping Paginatable due to no collection being present on "+(this.name||this.cid)),this.debug("collection",this.collection);return}return _.bindAll(this,"paginationControl","pager"),e=(this.getCollection||(this.getCollection=function(){return this.collection}))(),t=this.getPaginationState(),this.optionsSources||(this.optionsSources=[]),this.queryOptions||(this.queryOptions={}),this.optionsSources.push(function(){var e;return e=_(t.toJSON()).pick("limit","page","sortBy"),_.extend(e,{pager:n.pager})}),t.on("change:page",function(){return n.trigger("pagination:change")}),this.on("pagination:change",Luca.concerns.Filterable.classMethods.prepare,this),this.on("before:render",this.renderPaginationControl,this)},pager:function(e,t){return this.getPaginationState().set({numberOfPages:e,itemCount:t.length}),this.paginationControl().updateWithPageCount(e,t)},isRemote:function(){return this.getQueryOptions().remote===!0},getPaginationState:function(){var e,t;return(e=this.collection.__paginators)[t=this.cid]||(e[t]=this.paginationControl().state)},paginationContainer:function(){return this.$(">"+this.paginationSelector)},setCurrentPage:function(e,t){return e==null&&(e=1),t==null&&(t={}),this.getPaginationState().set("page",e,t)},setPage:function(e,t){return e==null&&(e=1),t==null&&(t={}),this.getPaginationState().set("page",e,t)},setLimit:function(e,t){return e==null&&(e=0),t==null&&(t={}),this.getPaginationState().set("limit",e,t)},paginationControl:function(){return this.paginator!=null?this.paginator:(_.defaults(this.paginatable||(this.paginatable={}),{page:1,limit:20}),this.paginator=Luca.util.lazyComponent({type:"pagination_control",collection:this.getCollection(),defaultState:this.paginatable,parent:this.name||this.cid,debugMode:this.debugMode}),this.paginator)},renderPaginationControl:function(){var e;return e=this.paginationControl(),this.paginationContainer().append(e.render().$el),e}}}.call(this),function(){Luca.concerns.QueryCollectionBindings={getCollection:function(){return this.collection},loadModels:function(e,t){var n;return e==null&&(e=[]),t==null&&(t={}),(n=this.getCollection())!=null?n.reset(e,t):void 0},applyQuery:function(e,t){return e==null&&(e={}),t==null&&(t={}),this.query=e,this.queryOptions=t,this.refresh(),this},getQuery:function(e){var t,n,r,i,s;e==null&&(e={}),t=this.query||(this.query={}),s=_(this.querySources||[]).compact();for(r=0,i=s.length;r<i;r++)n=s[r],t=_.extend(t,n(e)||{});return Luca.util.readAll(t)},getRemoteQuery:function(e){return e==null&&(e={}),this.getQuery(e)},getLocalQuery:function(e){return e==null&&(e={}),this.getQuery(e)},getQueryOptions:function(e){var t,n,r,i,s;e==null&&(e={}),n=this.queryOptions||(this.queryOptions={}),s=_(this.optionsSources||[]).compact();for(r=0,i=s.length;r<i;r++)t=s[r],n=_.extend(n,t(e)||{});return n},getModels:function(e,t){var n;return((n=this.collection)!=null?n.query:void 0)?(e||(e=this.getLocalQuery()),t||(t=this.getQueryOptions()),t.prepare||(t.prepare=this.prepareQuery),this.collection.query(e,t)):this.collection.models}}}.call(this),function(){var e;Luca.concerns.Sortable={__included:function(e,t){return _.extend(Luca.Collection.prototype,{__sortables:{}})},__initializer:function(){var e,t,n=this;if(this.sortable===!1)return;_.isString(this.sortable)&&(this.sortable={sortBy:this.sortable});if(!Luca.isBackboneCollection(this.collection)){this.debug("Skipping Sortable due to no collection being present on "+(this.name||this.cid)),this.debug("collection",this.collection);return}return e=(this.getCollection||(this.getCollection=function(){return this.collection}))(),t=this.getSortableState(),this.optionsSources||(this.optionsSources=[]),this.queryOptions||(this.queryOptions={}),this.optionsSources.push(function(){return _(t.toJSON()).pick("sortBy","order")}),t.on("change",function(){return n.trigger("sortable:change")}),this.defer(function(){return n.$(".sortable-toggle").on("click",function(e){var t,r;return t=r=n.$(e.target),t=r=r.closest(".sortable-toggle"),n.toggleSortOrderDirection(r.data("sortableSortBy"))})}).until("after:render"),this.on("sortable:change",Luca.concerns.Filterable.classMethods.prepare,this)},isRemote:function(){return this.getQueryOptions().remote===!0},getSortableState:function(){var t,n,r;return t=_(this.sortable||{}).pick("sortBy","order"),(n=this.collection.__sortables)[r=this.cid]||(n[r]=new e(t))},sortBy:function(e,t){return e!=null&&this.setSortBy(e),t!=null&&this.setOrder(t),this},setSortBy:function(e,t){return t==null&&(t={}),this.getSortableState().set("sortBy",e,t),this},toggleSortOrderDirection:function(e){var t,n;return n=this.getSortableState().get("order")||"ASC",t=n==="ASC"?"DESC":"ASC",e||(e=this.getSortableState().get("sortBy")),this.sortBy(e,t)},setOrder:function(e,t){return t==null&&(t={}),this.getSortableState().set("order",e,t),this}},Luca.util.makeSortableToggleElement=function(e,t,n){return $(e).attr("data-sortable-sort-by",t).attr("data-sortable-order",n),$(e)},e=Backbone.Model.extend()}.call(this),function(){var e,t=[].slice;e=Luca.register("Luca.ViewState")["extends"]("Luca.Model"),Luca.concerns.StateModel={__onModelChange:function(){var e,n,r,i,s,o,u,a;e=1<=arguments.length?t.call(arguments,0):[],i=this,r=i.state,(o=this.trigger).call.apply(o,[i,"state:change"].concat(t.call(e))),u=r.changedAttributes(),a=[];for(n in u)s=u[n],a.push(this.trigger.call(i,"state:change:"+n,r,s,r.previous(n)));return a},__initializer:function(){var e,t,n,r,i,s,o;this.stateAttributes!=null&&(this.stateful=this.stateAttributes);if(this.stateful==null)return;r=this,_.isObject(this.stateful)&&this.defaultState==null&&(this.defaultState=this.stateful),this.state||(this.state=new Luca.ViewState(this.defaultState||{})),s=this,this.get=function(){return s.state.get.apply(s.state,arguments)},this.set=function(){return s.state.set.apply(s.state,arguments)},o=this.state.toJSON();for(n in o)i=o[n],t="on"+_.str.capitalize(n)+"Change",e="get"+_.str.capitalize(n),_.isFunction(this[e])||1,_.isFunction(this[t])&&1;return Luca.concerns.StateModel.__setupModelBindings.call(this,"on")},__setupModelBindings:function(e){var t,n,r,i,s,o;e==null&&(e="on"),s=this,o=this.stateChangeEvents;for(t in o)r=o[t],n=_.isString(r)?s[r]:r,t==="*"?s[e]("state:change",n,s):s[e]("state:change:"+t,n,s);return i=s.state,s.state[e]("change",Luca.concerns.StateModel.__onModelChange,s)}}}.call(this),function(){Luca.concerns.Templating={__initializer:function(){var e,t,n;n=Luca.util.read.call(this,this.bodyTemplateVars)||{};if(e=this.bodyTemplate){this.$el.empty();try{t=Luca.template(e,n)}catch(r){console.log("Error Rendering "+e+" in View: "+((typeof this.identifier=="function"?this.identifier():void 0)||this.name||this.cid))}return Luca.View.prototype.$html.call(this,t)}}}}.call(this),function(){var e,t;e=Luca.register("Luca.Model"),e["extends"]("Backbone.Model"),e.includes("Luca.Events"),e.defines({initialize:function(){return Backbone.Model.prototype.initialize(this,arguments),t.call(this),Luca.concern.setup.call(this)},read:function(e){return _.isFunction(this[e])?this[e].call(this):this.get(e)||this[e]},get:function(e){var t;return((t=this.computed)!=null?t.hasOwnProperty(e):void 0)?this._computed[e]:Backbone.Model.prototype.get.call(this,e)}}),t=function(){var e,t,n,r,i=this;if(_.isUndefined(this.computed))return;this._computed={},n=this.computed,r=[];for(e in n)t=n[e],this.on("change:"+e,function(){return i._computed[e]=i.read(e)}),_.isString(t)&&(t=t.split(",")),r.push(_(t).each(function(t){i.on("change:"+t,function(){return i.trigger("change:"+e)});if(i.has(t))return i.trigger("change:"+e)}));return r},Luca.Model._originalExtend=Backbone.Model.extend,Luca.Model.extend=function(e){var t,n,r,i,s;e==null&&(e={}),e.concerns!=null&&(e.concerns||(e.concerns=e.concerns)),t=Luca.Model._originalExtend.call(this,e);if(e.concerns!=null&&_.isArray(e.concerns)){s=e.concerns;for(r=0,i=s.length;r<i;r++)n=s[r],Luca.decorate(t)["with"](n)}return t}}.call(this),function(){var e;e=Luca.register("Luca.Collection"),e["extends"]("Backbone.QueryCollection"),e.includes("Luca.Events"),e.triggers("after:initialize","before:fetch","after:response"),e.publicConfiguration({model:Luca.Model,cachedMethods:[],remoteFilter:!1,cache_key:void 0,manager:void 0,initialize:function(e,t){var n,r=this;e==null&&(e=[]),this.options=t,_.extend(this,this.options),this._reset(),this.cached&&console.log("The @cached property of Luca.Collection is being deprecated.  Please change to cache_key");if(this.cache_key||(this.cache_key=this.cached))this.bootstrap_cache_key=Luca.util.read(this.cache_key);(this.registerAs||this.registerWith)&&console.log("This configuration API is deprecated.  use @name and @manager properties instead"),this.name||(this.name=this.registerAs),this.manager||(this.manager=this.registerWith),this.manager!=null&&(this.manager=Luca.util.read(this.manager)),this.name&&!this.manager&&(this.manager=Luca.CollectionManager.get()),this.manager&&(this.name||(this.name=Luca.util.read(this.cache_key)),this.name=Luca.util.read(this.name),!this["private"]&&!this.anonymous&&this.bind("after:initialize",function(){return r.register(r.manager,r.name,r)}));if(this.useLocalStorage===!0&&window.localStorage!=null)throw n=this.bootstrap_cache_key||this.name,"Must specify a cache_key property or method to use localStorage";return _.isArray(this.data)&&this.data.length>0&&(this.memoryCollection=!0),this.useNormalUrl!==!0&&this.__wrapUrl(),Backbone.Collection.prototype.initialize.apply(this,[e,this.options]),e&&this.reset(e,{silent:!0,parse:t!=null?t.parse:void 0}),Luca.concern.setup.call(this),Luca.util.setupHooks.call(this,this.hooks),this.setupMethodCaching(),this.trigger("after:initialize")},__wrapUrl:function(){var e,t,n=this;return _.isFunction(this.url)?this.url=_.wrap(this.url,function(e){var t,r,i,s,o;return o=e.apply(n),i=o.split("?"),i.length>1&&(t=_.last(i)),s=n.queryString(),t&&o.match(t)&&(s=s.replace(t,"")),r=""+o+"?"+s,r.match(/\?$/)&&(r=r.replace(/\?$/,"")),r}):(t=this.url,e=this.queryString(),this.url=_([t,e]).compact().join("?"))},queryString:function(){var e,t=this;return e=_(this.base_params||(this.base_params=Luca.Collection.baseParams())).inject(function(e,t,n){var r;return r=""+n+"="+t,e.push(r),e},[]),_.uniq(e).join("&")},resetFilter:function(){return this.base_params=_(Luca.Collection.baseParams()).clone(),this},applyFilter:function(e,t){return e==null&&(e={}),t==null&&(t={}),t=_(t).clone(),t.remote!=null==1||this.remoteFilter===!0?(this.applyParams(e),this.fetch(_.extend(t,{refresh:!0,remote:!0}))):this.reset(this.query(e,t))},applyParams:function(e){return this.base_params=_(Luca.Collection.baseParams()).clone()||{},_.extend(this.base_params,e),this},register:function(e,t,n){t==null&&(t=""),e||(e=Luca.CollectionManager.get());if(!(t.length>=1))throw"Attempt to register a collection without specifying a key.";_.isString(e)&&(e=Luca.util.resolve(e));if(e==null)throw"Attempt to register with a non existent collection manager.";if(_.isFunction(e.add))return e.add(t,n);if(_.isObject(e))return e[t]=n},loadFromBootstrap:function(){if(!this.bootstrap_cache_key)return;return this.reset(this.cached_models()),this.trigger("bootstrapped",this)},bootstrap:function(){return this.loadFromBootstrap()},cached_models:function(){return Luca.Collection.cache(this.bootstrap_cache_key)},fetch:function(e){var t;e==null&&(e={}),this.trigger("before:fetch",this);if(this.memoryCollection===!0)return this.reset(this.data);if(this.cached_models().length&&e.refresh!==!0&&e.remote!==!0)return this.bootstrap();t=_.isFunction(this.url)?this.url():this.url;if(!(t&&t.length>1||this.localStorage))return!0;this.fetching=!0;try{return Backbone.Collection.prototype.fetch.apply(this,arguments)}catch(n){throw console.log("Error in Collection.fetch",n),n}},onceLoaded:function(e,t){var n,r=this;t==null&&(t={}),_.defaults(t,{autoFetch:!0});if(this.length>0&&!this.fetching){e.apply(this,[this]);return}n=function(){return e.apply(r,[r])},this.bind("reset",function(){return n(),this.unbind("reset",this)});if(!this.fetching&&!!t.autoFetch)return this.fetch()},ifLoaded:function(e,t){var n,r=this;t==null&&(t={scope:this,autoFetch:!0}),n=t.scope||this,this.length>0&&!this.fetching&&e.apply(n,[this]),this.bind("reset",function(t){return e.call(n,t)});if(!(this.fetching===!0||!t.autoFetch||this.length>0))return this.fetch()},parse:function(e){var t;return this.fetching=!1,this.trigger("after:response",e),t=this.root!=null?e[this.root]:e,this.bootstrap_cache_key&&Luca.Collection.cache(this.bootstrap_cache_key,t),t},restoreMethodCache:function(){var e,t,n,r;n=this._methodCache,r=[];for(t in n)e=n[t],e.original!=null?(e.args=void 0,r.push(this[t]=e.original)):r.push(void 0);return r},clearMethodCache:function(e){return this._methodCache[e].value=void 0},clearAllMethodsCache:function(){var e,t,n,r;n=this._methodCache,r=[];for(t in n)e=n[t],r.push(this.clearMethodCache(t));return r},setupMethodCaching:function(){var t,n,r;if(((r=this.cachedMethods)!=null?r.length:void 0)>0)return e=this,n=["reset","add","remove"],t=this._methodCache={},_(this.cachedMethods).each(function(r){var i,s,o,u,f;t[r]={name:r,original:e[r],value:void 0},e[r]=function(){var n;return(n=t[r]).value||(n.value=t[r].original.apply(e,arguments))};for(u=0,f=n.length;u<f;u++)s=n[u],e.bind(s,function(){return e.clearAllMethodsCache()});i=r.split(":")[1];if(i)return o=i.split(","),_(o).each(function(t){return e.bind("change:"+t,function(){return e.clearMethodCache({method:r})})})});return},query:function(e,t){var n;return e==null&&(e={}),t==null&&(t={}),Backbone.QueryCollection!=null?(_.isFunction(n=t.prepare||this.prepareQuery)&&(e=n(e)),Backbone.QueryCollection.prototype.query.call(this,e,t)):this.models}}),e.register(),_.extend(Luca.Collection.prototype,{trigger:function(){return Luca.enableGlobalObserver&&(Luca.CollectionObserver||(Luca.CollectionObserver=new Luca.Observer({type:"collection"})),Luca.CollectionObserver.relay(this,arguments)),Backbone.View.prototype.trigger.apply(this,arguments)}}),Luca.Collection._originalExtend=Backbone.Collection.extend,Luca.Collection.extend=function(e){var t,n,r,i,s;e==null&&(e={}),e.concerns!=null&&(e.concerns||(e.concerns=e.concerns)),t=Luca.Collection._originalExtend.call(this,e);if(e.concerns!=null&&_.isArray(e.concerns)){s=e.concerns;for(r=0,i=s.length;r<i;r++)n=s[r],Luca.decorate(t)["with"](n)}return t},Luca.Collection.namespace=function(e){var t;return _.isString(e)&&(e=Luca.util.resolve(e)),e!=null&&(Luca.Collection.__defaultNamespace=e),(t=Luca.Collection).__defaultNamespace||(t.__defaultNamespace=window||global),Luca.util.read(Luca.Collection.__defaultNamespace)},Luca.Collection.baseParams=function(e){return _.isString(e)&&(e=Luca.util.resolve(e)),e&&(Luca.Collection._baseParams=e),Luca.util.read(Luca.Collection._baseParams)},Luca.Collection.resetBaseParams=function(){return Luca.Collection._baseParams={}},Luca.Collection._bootstrapped_models={},Luca.Collection.bootstrap=function(e){return _.extend(Luca.Collection._bootstrapped_models,e)},Luca.Collection.cache=function(e,t){return t?Luca.Collection._bootstrapped_models[e]=t:Luca.Collection._bootstrapped_models[e]||[]}}.call(this),function(){var e,t,n,r=[].slice;n=Luca.register("Luca.View"),n["extends"]("Backbone.View"),n.includes("Luca.Events","Luca.concerns.DomHelpers","Luca.concerns.DevelopmentToolHelpers"),n.mixesIn("DomHelpers","Templating","EnhancedProperties","CollectionEventBindings","ApplicationEventBindings","StateModel"),n.triggers("before:initialize","after:initialize","before:render","after:render","first:activation","activation","deactivation"),n.publicConfiguration({name:void 0,autoBindEventHandlers:!1,_inheritEvents:void 0}),n.publicMethods({identifier:function(){return(this.displayName||this.type)+":"+(this.name||this.role||this.cid)},remove:function(){return this.trigger("before:remove",this),Luca.remove(this),Backbone.View.prototype.remove.apply(this,arguments)},initialize:function(t){var n,i,s,o,u;this.options=t!=null?t:{},this.trigger("before:initialize",this,this.options),_.extend(this,this.options),(this.autoBindEventHandlers===!0||this.bindAllEvents===!0)&&e.call(this),this.name!=null&&(this.cid=_.uniqueId(this.name)),this.$el.attr("data-luca-id",this.name||this.cid),Luca.registry.cacheInstance(this.cid,this),this.setupHooks(_(Luca.View.prototype.hooks.concat(this.hooks)).uniq()),Luca.concern.setup.call(this),_.isEmpty(this.events)||this.delegateEvents(),this.trigger("after:initialize",this),((s=this.bindMethods)!=null?s.legth:void 0)>0&&_.bindAll.apply(_,[this].concat(r.call(this.bindMethods)));if(!_.isEmpty(this._inheritEvents)){o=this._inheritEvents,u=[];for(n in o)i=o[n],u.push(this.registerEvent(n,i));return u}},debug:function(){var e;e=1<=arguments.length?r.call(arguments,0):[];if(this.debugMode===!0||window.LucaDebugMode===!0)return e.unshift(this.identifier()),console.log.apply(console,e)},trigger:function(){return Luca.enableGlobalObserver&&(Luca.developmentMode===!0||this.observeEvents===!0)&&(Luca.ViewObserver||(Luca.ViewObserver=new Luca.Observer({type:"view"})),Luca.ViewObserver.relay(this,arguments)),Backbone.View.prototype.trigger.apply(this,arguments)},make:function(e,t,n){var r;return r=document.createElement(e),t&&Backbone.$(r).attr(t),n!==null&&Backbone.$(r).html(n),r},registerEvent:function(e,t){this.events||(this.events={});if(_.isObject(e))this.events=_.extend(this.events,e);else if(_.isFunction(t)||_.isString(t)&&this[t]!=null)this.events[e]=t;return this.delegateEvents()}}),n.privateMethods({definitionClass:function(){var e;return(e=Luca.util.resolve(this.displayName,window))!=null?e.prototype:void 0},_collections:function(){return Luca.util.selectProperties(Luca.isBackboneCollection,this)},_models:function(){return Luca.util.selectProperties(Luca.isBackboneModel,this)},_views:function(){return Luca.util.selectProperties(Luca.isBackboneView,this)},setupHooks:Luca.util.setupHooks}),n.afterDefinition(function(){if(Backbone.View.prototype.make==null)return Backbone.View.prototype.make=function(){return console.log("Backbone.View::make has been removed from backbone.  You should use Luca.View::make instead."),Luca.View.prototype.make}}),n.register(),Luca.View._originalExtend=Backbone.View.extend,Luca.View.renderStrategies={legacy:function(e){var t,r,i,s,o,u=this;return n=this,this.deferrable?(s=this.deferrable_target,Luca.isBackboneCollection(this.deferrable)||(this.deferrable=this.collection),s||(s=this.deferrable),o=this.deferrable_event?this.deferrable_event:Luca.View.deferrableEvent,r=function(){return e.call(n),this.rendered=!0,n.trigger("after:render",n)},n.defer(r).until(s,o),n.trigger("before:render",this),t=this.deferrable_trigger||this.deferUntil,t==null?s[this.deferrable_method||"fetch"].call(s):(i=_.once(function(){var e,t;return typeof (e=u.deferrable)[t=u.deferrable_method||"fetch"]=="function"?e[t]():void 0}),(this.deferrable_target||this).bind(this.deferrable_trigger,i)),this):(this.trigger("before:render",this),e.apply(this,arguments),this.rendered=!0,this.trigger("after:render",this),this)},improved:function(e){var t,r=this;this.trigger("before:render",this),t=function(){return e.apply(r,arguments),r.trigger("after:render",r)},console.log("doing the improved one",this.deferrable);if(this.deferrable!=null&&!_.isString(this.deferrable))throw"Deferrable property is expected to be a event id";return _.isString(this.deferrable)?(console.log("binding to "+this.deferrable+" on "+this.cid),n.on(this.deferrable,function(){return console.log("did the improved one"),t.call(n),n.unbind(listenForEvent,this)})):t.call(this)}},Luca.View.renderWrapper=function(e){var t;return t=e.render,t||(t=function(){return this.trigger("empty:render")}),e.render=function(){var e;e=Luca.View.renderStrategies[this.renderStrategy||(this.renderStrategy="legacy")];if(!_.isFunction(e))throw"Invalid rendering strategy.  Please see Luca.View.renderStrategies";return e.call(this,t),this},e},e=function(){var e,n,r,i,s;i=[this.events,this.componentEvents,this.collectionEvents,this.applicationEvents],s=[];for(n=0,r=i.length;n<r;n++)e=i[n],_.isEmpty(e)||s.push(t.call(this,e));return s},t=function(e){var t,n,r;e==null&&(e={}),r=[];for(t in e){n=e[t];if(_.isString(n))try{r.push(_.bindAll(this,n))}catch(i){r.push(console.log("Error binding to handler - "+n+" = "+i+" "+this.identifier()))}else r.push(void 0)}return r},Luca.View.deferrableEvent="reset",Luca.View.extend=function(e){var t,n,r,i,s;e==null&&(e={}),e=Luca.View.renderWrapper(e),e.concerns!=null&&(e.concerns||(e.concerns=e.concerns)),t=Luca.View._originalExtend.call(this,e);if(e.concerns!=null&&_.isArray(e.concerns)){s=e.concerns;for(r=0,i=s.length;r<i;r++)n=s[r],Luca.decorate(t)["with"](n)}return t}}.call(this),function(){var e;e=Luca.register("Luca.Panel"),e.replaces("Luca.Panel"),e["extends"]("Luca.View"),e.configuration({topToolbar:void 0,bottomToolbar:void 0}),e.publicMethods({applyStyles:function(e,t){var n,r,i;e==null&&(e={}),t==null&&(t=!1),r=t?this.$bodyEl():this.$el;for(n in e)i=e[n],r.css(n,i);return this},$bodyEl:function(){var e,t,n,r;return n=this.bodyTagName||"div",t=this.bodyClassName||"view-body",this.bodyEl||(this.bodyEl=""+n+"."+t),e=this.$(this.bodyEl),e.length>0?e:e.length!==0||this.bodyClassName==null&&this.bodyTagName==null?this.$el:(r=this.make(n,{"class":t,"data-auto-appended":!0}),this.$el.append(r),this.$(this.bodyEl))},$wrap:function(e){return _.isString(e)&&!e.match(/[<>]/)&&(e=this.make("div",{"class":e})),this.$el.wrap(e)},$template:function(e,t){return t==null&&(t={}),this.$html(Luca.template(e,t))},$empty:function(){return this.$bodyEl().empty()},$html:function(e){return e!=null?this.$bodyEl().html(e):this.$bodyEl().html()},$append:function(e){return this.$bodyEl().append(e)}}),e.privateMethods({beforeRender:function(){var e;return(e=Luca.View.prototype.beforeRender)!=null&&e.apply(this,arguments),this.styles!=null&&this.applyStyles(this.styles),this.bodyStyles!=null&&this.applyStyles(this.bodyStyles,!0),typeof this.renderToolbars=="function"?this.renderToolbars():void 0},renderToolbars:function(){var e=this;return _(["top","left","right","bottom"]).each(function(t){var n;if(n=e[""+t+"Toolbar"])return e.renderToolbar(t,n)})},renderToolbar:function(e,t){var n;return e==null&&(e="top"),t==null&&(t={}),t.parent=this,t.orientation=e,n=Luca.util.read(t.container),n||(n=Luca.util.read(t.targetEl)),Luca.Panel.attachToolbar.call(this,t,n)}}),e.classMethods({attachToolbar:function(e,t){var n,r,i,s;return e==null&&(e={}),e.orientation||(e.orientation="top"),e.type||(e.type=e.ctype||(e.ctype=this.toolbarType||"panel_toolbar")),e.additionalClassNames=""+Luca.config.toolbarContainerClass+" "+e.orientation,i=Luca.util.lazyComponent(e),e.orientation==="bottom"&&(this.getBottomToolbar||(this.getBottomToolbar=function(){return i})),e.orientation==="top"&&(this.getTopToolbar||(this.getTopToolbar=function(){return i})),e.orientation==="right"&&(this.getRightToolbar||(this.getRightToolbar=function(){return i})),e.orientation==="left"&&(this.getLeftToolbar||(this.getLeftToolbar=function(){return i})),r=this.bodyClassName||this.bodyTagName,n=e.attachmentAction,n||(n=function(){switch(e.orientation){case"top":case"left":return r&&(t!=null?!t.length:!void 0)>0?"before":"prepend";case"bottom":case"right":return r&&(t!=null?!t.length:!void 0)>0?"after":"append"}}()),s=(t!=null?t.length:void 0)>0?this.$(t):this.$bodyEl(),s[n](i.render().el)}}),e.defines({version:3})}.call(this),function(){}.call(this),function(){var e,t,n;Luca.CollectionManager=function(){function n(e){var n,r,i,s;this.options=e!=null?e:{},_.extend(this,this.options),r=this;if(n=typeof (i=Luca.CollectionManager).get=="function"?i.get(this.name):void 0)throw"Attempt to create a collection manager with a name which already exists";this.collectionNamespace||(this.collectionNamespace=Luca.util.read(Luca.Collection.namespace)),(s=Luca.CollectionManager).instances||(s.instances={}),_.extend(this,Backbone.Events),_.extend(this,Luca.Events),Luca.CollectionManager.instances[this.name]=r,Luca.CollectionManager.get=function(e){return e==null?r:Luca.CollectionManager.instances[e]},this.state=new Luca.Model,this.initialCollections&&this.on("ready",t,this),this.autoStart===!0&&this.trigger("ready")}return n.prototype.name="primary",n.prototype.__collections={},n.prototype.autoStart=!0,n.prototype.relayEvents=!0,n.prototype.add=function(e,t){var n;return(n=this.currentScope())[e]||(n[e]=t)},n.prototype.allCollections=function(){return _(this.currentScope()).values()},n.prototype.create=function(t,n,r){var i,s,o;n==null&&(n={}),r==null&&(r=[]),i=n.base,i||(i=e.call(this,t)),n["private"]&&(n.name="");try{s=new i(r,n)}catch(u){throw console.log("Error creating collection",i,n,t),u}return this.add(t,s),o=this,this.relayEvents===!0&&this.bind("*",function(){return console.log("Relay Events on Collection Manager *",s,arguments)}),s},n.prototype.currentScope=function(){var e,t;return(e=this.getScope())?(t=this.__collections)[e]||(t[e]={}):this.__collections},n.prototype.each=function(e){return _(this.all()).each(e)},n.prototype.get=function(e){return this.currentScope()[e]},n.prototype.getScope=function(){return void 0},n.prototype.destroy=function(e){var t;return t=this.get(e),delete this.currentScope()[e],t},n.prototype.getOrCreate=function(e,t,n){return t==null&&(t={}),n==null&&(n=[]),this.get(e)||this.create(e,t,n,!1)},n.prototype.collectionCountDidChange=function(){if(this.allCollectionsLoaded())return this.trigger("all_collections_loaded"),this.trigger("initial:load")},n.prototype.allCollectionsLoaded=function(){return this.totalCollectionsCount()===this.loadedCollectionsCount()},n.prototype.totalCollectionsCount=function(){return this.state.get("collections_count")},n.prototype.loadedCollectionsCount=function(){return this.state.get("loaded_collections_count")},n.prototype["private"]=function(e,t,n){return t==null&&(t={}),n==null&&(n=[]),this.create(e,t,n,!0)},n}(),Luca.CollectionManager.isRunning=function(){return _.isEmpty(Luca.CollectionManager.instances)!==!0},Luca.CollectionManager.destroyAll=function(){return Luca.CollectionManager.instances={}},Luca.CollectionManager.loadCollectionsByName=function(e,t){var n,r,i,s,o;o=[];for(i=0,s=e.length;i<s;i++)r=e[i],(n=this.getOrCreate(r))?(n.on("reset",function(){return t(n),n.unbind("reset",this)}),o.push(n.fetch())):o.push(void 0);return o},e=function(e){var t,n,r,i;return t=Luca.util.classify(e),_.isString(this.collectionNamespace)&&(this.collectionNamespace=Luca.util.resolve(this.collectionNamespace)),n=(this.collectionNamespace||window||global)[t],n||(n=(this.collectionNamespace||window||global)[""+t+"Collection"]),n==null&&((i=Luca.Collection.namespaces)!=null?i.length:void 0)>0&&(r=_(Luca.Collection.namespaces.reverse()).map(function(e){return Luca.util.resolve(""+e+"."+t)||Luca.util.resolve(""+e+"."+t+"Collection")}),r=_(r).compact(),r.length>0&&(n=r[0])),n},n=function(){var e,t,n=this;return e=function(e){var t;return t=n.state.get("loaded_collections_count"),n.state.set("loaded_collections_count",t+1),n.trigger("collection_loaded",e.name),e.unbind("reset")},t=this.initialCollections,Luca.CollectionManager.loadCollectionsByName.call(this,t,e)},t=function(){var e=this;return this.state.set({loaded_collections_count:0,collections_count:this.initialCollections.length}),this.state.bind("change:loaded_collections_count",function(){return e.collectionCountDidChange()}),this.useProgressLoader&&(this.loaderView||(this.loaderView=new Luca.components.CollectionLoaderView({manager:this,name:"collection_loader_view"}))),n.call(this),this}}.call(this),function(){var e;e=Luca.register("Luca.SocketManager"),e["extends"]("Luca.Model"),e.defines({defaults:{autoStart:!0,providerAvailable:!1,ready:!1,provider:"faye.js"},initialize:function(e){var t,n,r,i=this;return this.attributes=e!=null?e:{},this.providerLibraryIsAvailable()||this.loadProviderSource(),(r=Luca.Model.prototype.initialize)!=null&&r.apply(this,arguments),n=this,t=function(){if(i.isReady())return i.connect()},n.on("change:ready",function(){return t(),n.unbind("change:ready",this)}),n.on("change:providerAvailable",function(){return t(),n.unbind("change:ready",this)}),this.on("ready",_.once(function(){return i.set("ready",!0)})),this.trigger("change")},isReady:function(){return this.get("ready")===!0&&this.get("providerAvailable")===!0},providerLibraryIsAvailable:function(){var e;return e=function(){switch(this.get("provider")){case"socket.io":return"io";case"faye.js":return"Faye.Client"}}.call(this),Luca.util.resolve(e)!=null},connect:function(){switch(this.get("provider")){case"socket.io":return this.client=io.connect(this.get("host"));case"faye.js":return this.client=new Faye.Client(this.get("host")),this.set("client",this.client)}},providerSourceLoaded:function(){return this.set("providerAvailable",!0)},providerSourceUrl:function(){switch(this.get("provider")){case"socket.io":return""+this.get("host")+"/socket.io/socket.io.js";case"faye.js":return""+this.get("host")+"/faye.js"}},loadProviderSource:function(){var e,t=this;return e=document.createElement("script"),e.setAttribute("type","text/javascript"),e.setAttribute("src",this.providerSourceUrl()),e.onload=_.bind(this.providerSourceLoaded,this),Luca.util.isIE()&&(e.onreadystatechange=function(){if(e.readyState==="loaded")return t.providerSourceLoaded()}),document.getElementsByTagName("head")[0].appendChild(e)}})}.call(this),function(){}.call(this),function(){var e,t,n,r,i,s,o,u;t=Luca
.register("Luca.Container"),t["extends"]("Luca.Panel"),t.triggers("before:components","before:render:components","before:layout","after:components","after:layout","first:activation"),t.replaces("Luca.Container"),t.publicConfiguration({components:[],defaults:{},extensions:{},componentEvents:{}}),t.privateConfiguration({className:"luca-ui-container",isContainer:!0,generateComponentElements:!1,emptyContainerElements:!1,componentTag:"div",componentClass:"luca-ui-panel",rendered:!1}),t.privateMethods({initialize:function(e){var t,n,r,i;this.options=e!=null?e:{},_.extend(this,this.options),this.components||(this.components=this.fields||(this.fields=this.pages||(this.pages=this.cards||(this.cards=this.views)))),i=this.components;for(n=0,r=i.length;n<r;n++)t=i[n],_.isString(t)&&(t={type:t,role:t,name:t});return _.bindAll(this,"beforeRender"),this.setupHooks(Luca.Container.prototype.hooks),u(this),Luca.View.prototype.initialize.apply(this,arguments)},remove:function(){return Luca.View.prototype.remove.apply(this,arguments),this.eachComponent(function(e){return typeof e.remove=="function"?e.remove():void 0})},beforeRender:function(){var e;return s.call(this),i.call(this),(e=Luca.Panel.prototype.beforeRender)!=null?e.apply(this,arguments):void 0},customizeContainerEl:function(e,t,n){return e},prepareLayout:function(){var n,r,i,s,o,u,f;t=this,this.componentContainers=_(this.components).map(function(n,r){return e.call(t,n,r)}),n=this._().select(function(e){var n;return _.isString(e.container)&&((n=e.container)!=null?n.match(/^\./):void 0)&&t.$(e.container).length>0});if(n.length>0){f=[];for(o=0,u=n.length;o<u;o++)i=n[o],r=_.uniqueId("container"),s=t.$(i.container),s.length>0?($(s).attr("data-container-assignment",r),f.push(i.container+="[data-container-assignment='"+r+"']")):f.push(void 0);return f}},prepareComponents:function(){var e=this;return t=this,_(this.components).each(function(n,r){var i,s,o,u,f,l;i=s=(f=e.componentContainers)!=null?f[r]:void 0,i["class"]=i["class"]||i.className||i.classes,e.generateComponentElements&&(u=e.make(e.componentTag,s,""),e.$append(u)),t.defaults!=null&&(n=_.defaults(n,t.defaults||{})),_.isArray(t.extensions)&&_.isObject((l=t.extensions)!=null?l[r]:void 0)&&(o=t.extensions[r],n=_.extend(n,o)),n.role!=null&&_.isObject(t.extensions)&&_.isObject(t.extensions[n.role])&&(o=t.extensions[n.role],n=_.extend(n,o));if(n.container==null)return e.generateComponentElements&&(n.container="#"+s.id),n.container||(n.container=e.$bodyEl())})},createComponents:function(){var e,n=this;if(this.componentsCreated===!0)return;return e=this.componentIndex={name_index:{},cid_index:{},role_index:{}},t=this,this.components=_(this.components).map(function(e,r){var i,s,u;return i=Luca.isComponent(e)?e:(e.component!=null&&!e.type&&!e.ctype?(e.type=e.component,e.name||(e.name=e.component),e.role||(e.role=e.component)):void 0,e.type||(e.type=e.ctype),e.type==null?e.components!=null?e.type=e.ctype="container":e.type=e.ctype=Luca.defaultComponentType:void 0,e._parentCid||(e._parentCid=t.cid),s=Luca.util.lazyComponent(e)),!i.container&&((u=i.options)!=null?u.container:void 0)&&(i.container=i.options.container),i.getParent||(i.getParent=function(){return Luca(i._parentCid)}),i.container==null&&(console.log(i,r,n),console.error("could not assign container property to component on container "+(n.name||n.cid))),o(i).at(r)["in"](n.componentIndex),i}),this.componentsCreated=!0,e},renderComponents:function(e){return this.debugMode=e!=null?e:"",this.debug("container render components"),t=this,_(this.components).each(function(e){var n;try{return e.trigger("before:attach"),n=t.$(e.container),n.length===0&&(_.isString(e.container)&&1,n.length===0&&(n=this.$(e.container).eq(0))),this.emptyContainerElements===!0&&n.empty(),n.append(e.el),e.trigger("after:attach"),e.render(),e.rendered=!0}catch(r){console.log("Error Rendering Component "+(e.name||e.cid),e),_.isObject(r)&&(console.log(r.message),console.log(r.stack));if(Luca.silenceRenderErrors!=null!=1)throw r}})},firstActivation:function(){var e;return e=this,this.each(function(t,n){var r;if((t!=null?t.previously_activated:void 0)!==!0)return t!=null&&(r=t.trigger)!=null&&r.call(t,"first:activation",t,e),t.previously_activated=!0})},registerComponentEvents:function(e,n){var r,i,s,o,u,a,f,l,c=this;n==null&&(n="on"),t=this,a=e||this.componentEvents||{},l=[];for(u in a){o=a[u],f=u.split(" "),i=f[0],s=f[1];if(!_.isFunction(this[o]))throw console.log("Error registering component event",u,i,s),"Invalid component event definition "+u+". Specified handler is not a method on the container";if(i==="*")l.push(this.eachComponent(function(e){return e.on(s,c[o],t)}));else{r=this.findComponentForEventBinding(i);if(r==null||!Luca.isComponent(r))throw console.log("Error registering component event",u,i,s),"Invalid component event definition: "+i;l.push(r[n](s,this[o],t))}}return l}}),t.publicMethods({_:function(){return _(this.components)},pluck:function(e){return this._().pluck(e)},invoke:function(e){return this._().invoke(e)},select:function(e){return this._().select(e)},detect:function(e){return this._().detect(e)},reject:function(e){return this._().reject(e)},map:function(e){return this._().map(e)},subContainers:function(){return this.select(function(e){return e.isContainer===!0})},roles:function(){return _(this.allChildren()).chain().pluck("role").compact().value()},allChildren:function(){var e,t;return e=this.components,t=_(this.subContainers()).map(function(e){return e!=null?typeof e.allChildren=="function"?e.allChildren():void 0:void 0}),_([e,t]).chain().compact().flatten().value()},find:function(e){return _(this.components).detect(function(t){return t.name===e})},findComponentForEventBinding:function(e,t){return t==null&&(t=!0),this.findComponentByName(e,t)||this.findComponentByGetter(e,t)||this.findComponentByRole(e,t)},findComponentByGetter:function(e,t){return t==null&&(t=!1),_(this.allChildren()).detect(function(t){return(t!=null?t.getter:void 0)===e})},findComponentByRole:function(e,t){return t==null&&(t=!1),_(this.allChildren()).detect(function(t){return(t!=null?t.role:void 0)===e||(t!=null?t.type:void 0)===e||(t!=null?t.ctype:void 0)===e})},findComponentByType:function(e,t){return t==null&&(t=!1),_(this.allChildren()).detect(function(t){return e===(t.type||t.ctype)})},findComponentByName:function(e,t){return t==null&&(t=!1),_(this.allChildren()).detect(function(t){return t.name===e})},findComponentById:function(e,t){return t==null&&(t=!1),this.findComponent(e,"cid_index",t)},findComponent:function(e,t,n){var r,i,s,o;t==null&&(t="name"),n==null&&(n=!1),this.componentsCreated!==!0&&this.createComponents(),i=(o=this.componentIndex)!=null?o[t][e]:void 0,r=this.components[i];if(r)return r;if(n===!0)return s=_(this.components).detect(function(n){return n!=null?typeof n.findComponent=="function"?n.findComponent(e,t,!0):void 0:void 0}),s!=null?typeof s.findComponent=="function"?s.findComponent(e,t,!0):void 0:void 0},each:function(e){return this.eachComponent(e,!1)},eachComponent:function(e,t){var n=this;return t==null&&(t=!0),_(this.components).each(function(n,r){var i;e.call(n,n,r);if(t)return n!=null?(i=n.eachComponent)!=null?i.apply(n,[e,t]):void 0:void 0})},indexOfComponentName:function(e){var t;return t=_(this.components).pluck("name"),_(t).indexOf(e)},indexOf:function(e){if(_.isString(e))return this.indexOfComponentName(e);if(_.isObject(e))return _(this.components).indexOf(e)},activeComponent:function(){return this.activeItem?this.components[this.activeItem]:this},componentElements:function(){return this.$("[data-luca-parent='"+(this.name||this.cid)+"']")},getComponent:function(e){return this.components[e]},isRootComponent:function(){return this.rootComponent===!0||this.getParent==null},getRootComponent:function(){return this.isRootComponent()?this:this.getParent().getRootComponent()},selectByAttribute:function(e,t,n){var r;return t==null&&(t=void 0),n==null&&(n=!1),r=_(this.components).map(function(r){var i,s;return i=[],s=r[e],(s===t||t==null&&s!=null)&&i.push(r),n===!0&&i.push(typeof r.selectByAttribute=="function"?r.selectByAttribute(e,t,!0):void 0),_.compact(i)}),_.flatten(r)}}),t.register(),Luca.Container.componentRenderer=function(e,t){var n;return n=$(t.container)[t.attachWith||"append"],n(t.render().el)},s=function(){return this.trigger("before:layout",this),this.prepareLayout(),this.trigger("after:layout",this)},e=function(e,t){var n,r;return r=[],e.height!=null&&r.push("height: "+(_.isNumber(e.height)?e.height+"px":e.height)),e.width!=null&&r.push("width: "+(_.isNumber(e.width)?e.width+"px":e.width)),e.float&&r.push("float: "+e.float),n={"class":(e!=null?e.classes:void 0)||this.componentClass,id:""+this.cid+"-"+t,style:r.join(";"),"data-luca-parent":this.name||this.cid},this.customizeContainerEl!=null&&(n=this.customizeContainerEl(n,e,t)),n},n=function(){var e;return t=this,e=_(this.allChildren()).select(function(e){return(e!=null?e.getter:void 0)!=null}),_(e).each(function(e){var n;return t[n=e.getter]||(t[n]=function(){return e})})},r=function(){var e;return t=this,e=_(this.allChildren()).select(function(e){return(e!=null?e.role:void 0)!=null}),_(e).each(function(e){var n,r;return n=_.str.camelize("get_"+e.role),r=function(){return e},t[n]||(t[n]=_.bind(r,t))})},i=function(){return this.trigger("before:components",this,this.components),this.prepareComponents(),this.trigger("before:create:components",this,this.components),this.createComponents(),this.trigger("before:render:components",this,this.components),this.renderComponents(),this.trigger("after:components",this,this.components),this.skipGetterMethods!==!0&&(n.call(this),r.call(this)),this.registerComponentEvents()},u=function(){return!0},o=function(e){return{at:function(t){return{"in":function(n){e.cid!=null&&(n.cid_index[e.cid]=t),e.role!=null&&(n.role_index[e.role]=t);if(e.name!=null)return n.name_index[e.name]=t}}}}}}.call(this),function(){var e;e=Luca.register("Luca.containers.CardView"),e["extends"]("Luca.Container"),e.publicConfiguration({activeCard:0,components:[]}),e.classInterface({activationContext:"current"}),e.privateConfiguration({hooks:["before:card:switch","after:card:switch"],componentClass:"luca-ui-card",generateComponentElements:!0}),e.publicMethods({atFirst:function(){return this.activeCard===0},atLast:function(){return this.activeCard===this.components.length-1},next:function(){if(this.atLast())return;return this.activate(this.activeCard+1)},previous:function(){if(this.atFirst())return;return this.activate(this.activeCard-1)},cycle:function(){var e;return e=this.atLast()?0:this.activeCard+1,this.activate(e)},find:function(e){return _(this.components).detect(function(t){return t.name===e})},activate:function(e,t,n){var r,i,s,o=this;t==null&&(t=!1),_.isFunction(t)&&(t=!1,n=t);if(e===this.activeCard)return;s=this.activeComponent(),i=this.getComponent(e);if(i==null){e=this.indexOf(e);if(!(i=this.getComponent(e)))return}t!==!0&&(this.trigger("before:card:switch",s,i),s!=null&&s.trigger("before:deactivation",this,s,i),i!=null&&i.trigger("before:activation",this,s,i),_.defer(function(){return o.$el.data(o.activeAttribute||"active-card",i.name)})),this.componentElements().hide(),i.previously_activated!==!0&&(i.rendered===!0?i.trigger("first:activation"):i.once("after:render",function(){return i.rendered=!0,i.trigger("first:activation")}),i.previously_activated=!0),this.activeCard=e,this.activeComponentElement().show(),t!==!0&&(this.trigger("after:card:switch",s,i),s!=null&&s.trigger("deactivation",this,s,i),i!=null&&i.trigger("activation",this,s,i)),r=this,Luca.containers.CardView.activationContext==="current"&&(r=i);if(_.isFunction(n))return n.apply(r,[this,s,i])}}),e.privateMethods({initialize:function(e){return this.options=e,this.components||(this.components=this.pages||(this.pages=this.cards)),Luca.Container.prototype.initialize.apply(this,arguments),this.setupHooks(this.hooks),this.defer(this.simulateActivationEvent,this).until("after:render")},simulateActivationEvent:function(){var e;e=this.activeComponent();if(e!=null&&(this.visible||this.$el.is(":visible"))){e!=null&&e.trigger("activation",this,e,e);if(!e.previously_activated)return e.trigger("first:activation"),e.previously_activated=!0}},prepareComponents:function(){var e;return(e=Luca.Container.prototype.prepareComponents)!=null&&e.apply(this,arguments),this.componentElements().hide(),this.activeComponentElement().show()},activeComponentElement:function(){return this.componentElements().eq(this.activeCard)},activeComponent:function(){return this.getComponent(this.activeCard)},customizeContainerEl:function(e,t,n){return e.style+=n===this.activeCard?"display:block;":"display:none;",e},firstActivation:function(){var e;if(e=this.activeComponent())return e.trigger("first:activation",this,this.activeComponent())}}),e.register()}.call(this),function(){var e;e=Luca.register("Luca.containers.ModalView"),e["extends"]("Luca.Container"),e.publicConfiguration({closeOnEscape:!0,showOnInitialize:!1,backdrop:!1,className:"modal"}),e.publicMethods({container:function(){return $("body")},toggle:function(){return this.$el.modal("toggle")},show:function(){return this.$el.modal("show")},hide:function(){return this.$el.modal("hide")},render:function(){return this.$el.addClass("modal"),this.fade===!0&&this.$el.addClass("fade"),$("body").append(this.$el),this.$el.modal({backdrop:this.backdrop===!0,keyboard:this.closeOnEscape===!0,show:this.showOnInitialize===!0}),this}}),e.register()}.call(this),function(){var e;e=Luca.register("Luca.containers.PageController"),e["extends"]("Luca.Container"),e.privateMethods({initialize:function(e){var t,n,r,i;this.options=e!=null?e:{},this.components||(this.components=this.pages||this.options.pages),i=this.components;for(n=0,r=i.length;n<r;n++)t=i[n],t.components||(t.components=t.pages);return Luca.Container.prototype.initialize.apply(this,arguments)}}),e.register()}.call(this),function(){var e,t,n,r;n=Luca.register("Luca.PanelToolbar"),n["extends"]("Luca.View"),n.defines({buttons:[],orientation:"top",autoBindEventHandlers:!0,events:{"click a.btn, click .dropdown-menu li":"clickHandler"},initialize:function(e){var t;this.options=e!=null?e:{},this._super("initialize",this,arguments);if(this.group===!0&&((t=this.buttons)!=null?t.length:void 0)>=0)return this.buttons=[{group:!0,buttons:this.buttons}]},clickHandler:function(e){var t,n,r,i,s;r=i=$(e.target),r.is("i")&&(r=i=$(e.target).parent()),this.selectable===!0&&(i.siblings().removeClass("is-selected"),r.addClass("is-selected"));if(!(t=i.data("eventid")))return;return n=Luca.util.hook(t),s=this.parent||this,_.isFunction(s[n])?s[n].call(this,r,e):s.trigger(t,r,e)},beforeRender:function(){this._super("beforeRender",this,arguments),this.well===!0&&this.$el.addClass("well"),this.selectable===!0&&this.$el.addClass("btn-selectable"),this.$el.addClass("toolbar-"+this.orientation),this.align==="right"&&this.$el.addClass("pull-right");if(this.align==="left")return this.$el.addClass("pull-left")},render:function(){var e,t,n,i;this.$el.empty(),i=r(this.buttons);for(t=0,n=i.length;t<n;t++)e=i[t],this.$el.append(e);return this}}),t=Luca.View.prototype.make,e=function(e,n){var i,s,o,u,a,f,l,c,h,p,v,m;n==null&&(n=!0);if(e.ctype!=null||e.type!=null){e.className||(e.className=""),e.className+="toolbar-component",p=Luca(e).render();if(Luca.isBackboneView(p))return p.$el}return e.spacer?t("div",{"class":"spacer "+e.spacer}):e.text?t("div",{"class":"toolbar-text"},e.text):(m="btn-group",e.wrapper!=null&&(m+=""+e.wrapper),e.align!=null&&(m+="pull-"+e.align+" align-"+e.align),e.selectable===!0&&(m+="btn-selectable"),e.group!=null&&e.buttons!=null?(u=r(e.buttons,!1),t("div",{"class":m},u)):(c=e.label||(e.label=""),e.eventId||(e.eventId=_.string.dasherize(e.label.toLowerCase())),e.icon&&(_.string.isBlank(c)&&(c=" "),e.white&&(v="icon-white"),c="<i class='"+(v||"")+" icon-"+e.icon+"' /> "+c),s={"class":_.compact(["btn",e.classes,e.className]).join(" "),"data-eventId":e.eventId,title:e.title||e.description},e.color!=null&&(s["class"]+=" btn-"+e.color),e.selected!=null&&(s["class"]+=" is-selected"),e.dropdown&&(c=""+c+" <span class='caret'></span>",s["class"]+=" dropdown-toggle",s["data-toggle"]="dropdown",l=function(){var n,r,i,s;i=e.dropdown,s=[];for(n=0,r=i.length;n<r;n++)f=i[n],_.isObject(f)&&(f=_.values(f).reverse()),h=t("a",{},f[1]),s.push(t("li",{"data-eventId":f[0]},h));return s}(),a=t("ul",{"class":"dropdown-menu"},l)),o=t("a",s,c),i="btn-group",e.align!=null&&(i+=" align-"+e.align),n===!0?t("div",{"class":i},[o,a]):o))},r=function(t,n){var r,i,s,o;t==null&&(t=[]),n==null&&(n=!0),o=[];for(i=0,s=t.length;i<s;i++)r=t[i],o.push(e(r,n));return o}}.call(this),function(){var e;e=Luca.register("Luca.containers.TabView"),e["extends"]("Luca.containers.CardView"),e.triggers("before:select","after:select"),e.publicConfiguration({tab_position:"top",tabVerticalOffset:"50px"}),e.privateConfiguration({additionalClassNames:"tabbable",navClass:"nav-tabs",bodyTemplate:"containers/tab_view",bodyClassName:"tab-content",skipGetterMethods:!0}),e.defines({initialize:function(e){return this.options=e!=null?e:{},this.navStyle==="list"&&(this.navClass="nav-list"),Luca.containers.CardView.prototype.initialize.apply(this,arguments),_.bindAll(this,"select","highlightSelectedTab"),this.setupHooks(this.hooks),this.bind("after:card:switch",this.highlightSelectedTab)},activeTabSelector:function(){return this.tabSelectors().eq(this.activeCard||this.activeTab||this.activeItem)},beforeLayout:function(){var e;return this.$el.addClass("tabs-"+this.tab_position),this.activeTabSelector().addClass("active"),this.createTabSelectors(),(e=Luca.containers.CardView.prototype.beforeLayout)!=null?e.apply(this,arguments):void 0},afterRender:function(){var e,t;(t=Luca.containers.CardView.prototype.afterRender)!=null&&t.apply(this,arguments),e=this.tabContainer().attr("id"),this.registerEvent("click #"+e+" li a","tabSelectClickHandler");if(Luca.config.enableBootstrap&&(this.tab_position==="left"||this.tab_position==="right"))return this.tabContainerWrapper().addClass("span2"),this.tabContentWrapper().addClass("span9")},createTabSelectors:function(){return e=this,this.each(function(t,n){var r,i,s,o;t.tabIcon&&(r="<i class='icon-"+t.tabIcon+"'></i>"),i="<a href='#'>"+(r||"")+" "+t.title+"</a>",s=e.make("li",{"class":"tab-selector","data-target":n},i),e.tabContainer().append(s);if(t.navHeading!=null&&((o=e.navHeadings)!=null?!o[t.navHeading]:!void 0))return $(s).before(e.make("li",{"class":"nav-header"},t.navHeading)),e.navHeadings||(e.navHeadings={}),e.navHeadings[t.navHeading]=!0})},highlightSelectedTab:function(){return this.tabSelectors().removeClass("active"),this.activeTabSelector().addClass("active")},tabSelectClickHandler:function(e){var t,n,r;return e!=null&&e.preventDefault(),t=n=$(e.target),t=n||(n=this.tabSelectors()[0]),r=n.parent().data("target"),this.select(r)},select:function(e){return e==null&&(e=0),this.trigger("before:select",this),this.activate(e),this.trigger("after:select",this)},componentElements:function(){return this.$(">.tab-content >."+this.componentClass)},tabContentWrapper:function(){return $("#"+this.cid+"-tab-view-content")},tabContainerWrapper:function(){return $("#"+this.cid+"-tabs-selector")},tabContainer:function(){return this.$("ul."+this.navClass,this.tabContainerWrapper())},tabSelectors:function(){return this.$("li.tab-selector",this.tabContainer())},bodyTemplateVars:function(){return{cid:this.cid,navClass:this.navClass}}})}.call(this),function(){var e;e=Luca.register("Luca.containers.Viewport"),e["extends"]("Luca.Container"),e.defines({fullscreen:!0,fluid:!1,applyWrapper:!0,initialize:function(e){this.options=e!=null?e:{},_.extend(this,this.options),Luca.config.enableBoostrap===!0&&this.applyWrapper===!0&&(this.wrapperClass=this.fluid===!0?Luca.config.fluidWrapperClass:Luca.config.wrapperClass),Luca.Container.prototype.initialize.apply(this,arguments);if(this.fullscreen===!0)return this.enableFullscreen()},enableFluid:function(){return this.enableWrapper()},disableFluid:function(){return this.disableWrapper()},enableWrapper:function(){if(this.wrapperClass!=null)return this.$el.parent().addClass(this.wrapperClass)},disableWrapper:function(){if(this.wrapperClass!=null)return this.$el.parent().removeClass(this.wrapperClass)},enableFullscreen:function(){return $("html,body").addClass("luca-ui-fullscreen"),this.$el.addClass("fullscreen-enabled")},disableFullscreen:function(){return $("html,body").removeClass("luca-ui-fullscreen"),this.$el.removeClass("fullscreen-enabled")},beforeRender:function(){var e;(e=Luca.Container.prototype.beforeRender)!=null&&e.apply(this,arguments),this.topNav!=null&&this.renderTopNavigation();if(this.bottomNav!=null)return this.renderBottomNavigation()},height:function(){return this.$el.height()},width:function(){return this.$el.width()},afterRender:function(){var e;(e=Luca.Container.prototype.afterRender)!=null&&e.apply(this,arguments);if(Luca.config.enableBoostrap===!0&&this.containerClassName)return this.$el.children().wrap('<div class="#{ containerClassName }" />')},renderTopNavigation:function(){var e;if(this.topNav==null)return;return _.isString(this.topNav)&&(this.topNav=Luca.util.lazyComponent(this.topNav)),_.isObject(this.topNav)&&((e=this.topNav).ctype||(e.ctype=this.topNav.type||"nav_bar"),Luca.isBackboneView(this.topNav)||(this.topNav=Luca.util.lazyComponent(this.topNav))),this.topNav.app=this,$("body").prepend(this.topNav.render().el)},renderBottomNavigation:function(){}}),Luca.containers.Viewport.defaultWrapperClass=Luca.config.wrapperClass||"container",Luca.containers.Viewport.fluidWrapperClass=Luca.config.fluidWrapperClass||"container-fluid"}.call(this),function(){}.call(this),function(){var e;e=Luca.register("Luca.CollectionView"),e["extends"]("Luca.Panel"),e.replaces("Luca.components.CollectionView"),e.mixesIn("QueryCollectionBindings","LoadMaskable","Filterable","Paginatable","Sortable"),e.triggers("before:refresh","after:refresh","refresh","empty:results"),e.publicConfiguration({collection:void 0,tagName:"ol",bodyClassName:"collection-ui-panel",itemTagName:"li",itemClassName:"collection-item",itemTemplate:void 0,itemRenderer:void 0,itemProperty:void 0,observeChanges:!1}),e.publicMethods({initialize:function(e){var t,n;this.options=e!=null?e:{},_.extend(this,this.options),_.bindAll(this,"refresh");if(this.collection==null&&!this.options.collection)throw console.log("Error on initialize of collection view",this),"Collection Views must specify a collection";if(this.itemTemplate==null&&this.itemRenderer==null&&this.itemProperty==null)throw"Collection Views must specify an item template or item renderer function";_.isString(this.collection)&&(Luca.CollectionManager.get()?this.collection=Luca.CollectionManager.get().getOrCreate(this.collection):console.log("String Collection but no collection manager"));if(!Luca.isBackboneCollection(this.collection))throw console.log("Missing Collection on "+(this.name||this.cid),this,this.collection),"Collection Views must have a valid backbone collection";this.on("data:refresh",this.refresh,this),this.on("collection:reset",this.refresh,this),this.on("collection:remove",this.refresh,this),this.on("collection:add",this.refresh,this),this.observeChanges===!0&&this.on("collection:change",this.refreshModel,this),Luca.Panel.prototype.initialize.apply(this,arguments),t=this;if(((n=this.getCollection())!=null?n.length:void 0)>0)return this.on("after:render",function(){return t.refresh(),t.unbind("after:render",this)})},locateItemElement:function(e){return this.$("."+this.itemClassName+"[data-model-id='"+e+"']")},refresh:function(){var e,t,n;return n=this.getLocalQuery(),t=this.getQueryOptions(),e=this.getModels(n,t),this.$bodyEl().empty(),this.trigger("before:refresh",e,n,t),e.length===0&&this.trigger("empty:results",n,t),this.renderModels(e,n,t),this.trigger("after:refresh",e,n,t),this}}),e.privateMethods({renderModels:function(e,t,n){var r,i,s,o,u;r=0,u=[];for(s=0,o=e.length;s<o;s++)i=e[s],u.push(this.$append(this.makeItem(i,r++)));return u},attributesForItem:function(e,t){return _.extend({},{"class":this.itemClassName,"data-index":e.index,"data-model-id":e.model.get("id")})},contentForItem:function(e){var t,n;return e==null&&(e={}),this.itemTemplate!=null&&(n=Luca.template(this.itemTemplate))?t=n.call(this,e):this.itemRenderer!=null&&_.isFunction(this.itemRenderer)?t=this.itemRenderer.call(this,e,e.model,e.index):this.itemProperty&&e.model!=null?t=e.model.read(this.itemProperty):""},makeItem:function(e,t){var n,r,i;i=this.prepareItem!=null?this.prepareItem.call(this,e,t):{model:e,index:t},n=this.attributesForItem(i,e),r=this.contentForItem(i);try{return Luca.View.prototype.make(this.itemTagName,n,r)}catch(s){return console.log("Error generating DOM element for CollectionView",this,e,t)}},refreshModel:function(e){var t;return t=this.collection.indexOf(e),this.locateItemElement(e.get("id")).empty().append(this.contentForItem({model:e,index:t},e)),this.trigger("model:refreshed",t,e)},registerEvent:function(e,t,n){var r;return n==null&&_.isFunction(t)&&(n=t,t=void 0),r=_([e,""+this.itemTagName+"."+this.itemClassName,t]).compact().join(" "),Luca.View.prototype.registerEvent(r,n)}}),e.register()}.call(this),function(){var e;e=Luca.register("Luca.components.SimpleCollectionView"),e["extends"]("Luca.CollectionView"),e.defines({filterable:!1,paginatable:!1,sortable:!1,loadMask:!1})}.call(this),function(){var e;e=Luca.register("Luca.components.GridLayoutView"),e["extends"]("Luca.CollectionView"),e.publicConfiguration({itemsPerRow:3}),e.privateConfiguration({className:"grid-layout-view",tagName:"div",itemTagName:"div"}),e.privateMethods({attributesForItem:function(){var e,t;return e=Luca.CollectionView.prototype.attributesForItem.apply(this,arguments),_.isNumber(this.itemsPerRow)&&this.itemsPerRow>1||(this.itemsPerRow=3),t=parseInt(12/this.itemsPerRow),e["class"]+=" span"+t,e},renderModels:function(e){var t,n,r,i,s,o,u,a;t=0,i=0,s=function(){var s,o,u;u=[];for(s=0,o=e.length;s<o;s++)n=e[s],i++===0&&(r=this.make("div",{"class":"row-fluid"})),$(r).append(this.makeItem(n,t++)),t>0&&t%this.itemsPerRow===0&&(i=0),u.push(r);return u}.call(this),a=[];for(o=0,u=s.length;o<u;o++)r=s[o],a.push(this.$append(r));return a}}),e.register()}.call(this),function(){var e;e=Luca.register("Luca.components.TableView"),e["extends"]("Luca.CollectionView"),e.publicConfiguration({widths:[],columns:[],emptyText:"There are no results to display"}),e.privateConfiguration({additionalClassNames:"table",tagName:"table",bodyTemplate:"table_view",bodyTagName:"tbody",bodyClassName:"table-body",stateful:!0,itemTagName:"tr",observeChanges:!0}),e.privateMethods({lastColumn:function(){return this.columns[this.columns.length-1]},eachColumn:function(e,t){var n,r,i,s,o,u;t==null&&(t=this),r=0,o=this.columns,u=[];for(i=0,s=o.length;i<s;i++)n=o[i],u.push(e.call(t,n,r++,this));return u},itemRenderer:function(e,t){return Luca.components.TableView.rowRenderer.call(this,e,t)},initialize:function(e){var t,n,r,i=this;return this.options=e!=null?e:{},Luca.components.CollectionView.prototype.initialize.apply(this,arguments),n=0,this.columns=function(){var e,i,s,o;s=this.columns,o=[];for(e=0,i=s.length;e<i;e++){t=s[e];if(r=this.widths[n])t.width=r;_.isString(t)&&(t={reader:t}),t.header==null&&(t.header=_.str.titleize(_.str.humanize(t.reader))),n++,o.push(t)}return o}.call(this),this.defer(function(){return Luca.components.TableView.renderHeader.call(i,i.columns,i.$("thead"))}).until("after:render")}}),e.classMethods({renderHeader:function(e,t){var n,r,i,s,o,u,a,f,l,c;s=0,this.$(t).append("<tr></tr>");for(u=0,f=e.length;u<f;u++)r=e[u],n={"data-col-index":s++},r.sortable&&(n["class"]="sortable-toggle",n["data-sortable-sort-by"]=r.sortBy||r.sortable,n["data-sortable-order"]=r.order),i=r.header,r.sortable&&(i="<a class='link'>"+r.header+"</a>"),this.$(t).find("tr").append(Luca.View.prototype.make("th",n,i));s=0,c=[];for(a=0,l=e.length;a<l;a++){r=e[a];if(r.width==null)continue;o=this.$("th[data-col-index='"+s++ +"']",t),c.push(o.css("width",r.width))}return c},rowRenderer:function(e,t,n){var r,i,s,o,u,a;r=0,u=this.columns,a=[];for(s=0,o=u.length;s<o;s++)i=u[s],a.push(Luca.components.TableView.renderColumn.call(this,i,e,t,r++));return a},renderColumn:function(e,t,n,r){var i;return i=n.read(e.reader),_.isFunction(e.renderer)&&(i=e.renderer.call(this,i,n,e)),Luca.View.prototype.make("td",{"data-col-index":r},i)}}),e.register()}.call(this),function(){var e;e=Luca.register("Luca.components.MultiCollectionView"),e["extends"]("Luca.containers.CardView"),e.mixesIn("QueryCollectionBindings","LoadMaskable","Filterable","Paginatable","Sortable"),e.triggers("before:refresh","after:refresh","refresh","empty:results"),e["private"]({stateful:{activeView:0},initialize:function(e){var t,n,r,i;this.options=e!=null?e:{},this.components||(this.components=this.views),i=this.components;for(n=0,r=i.length;n<r;n++)t=i[n],Luca.components.MultiCollectionView.validateComponent(t);return Luca.containers.CardView.prototype.initialize.apply(this,arguments),this.on("data:refresh",this.refresh,this),this.on("after:card:switch",this.refresh,this),this.on("after:components",Luca.components.MultiCollectionView.propagateCollectionComponents,this)},relayAfterRefresh:function(e,t,n){return this.trigger("after:refresh",e,t,n)},refresh:function(){var e;return(e=this.activeComponent())!=null?e.refresh():void 0}}),e.classMethods({propagateCollectionComponents:function(){var e,t,n,r,i,s,o=this;t=this,i=this.components,s=[];for(n=0,r=i.length;n<r;n++)e=i[n],e.on("after:refresh",function(e,t,n){return o.debug("collection member after refresh"),o.trigger("after:refresh",e,t,n)}),_.extend(e,{collection:t.getCollection(),getQuery:_.bind(t.getQuery,t),getQueryOptions:_.bind(t.getQueryOptions,t)}),t.prepareQuery!=null?s.push(_.extend(e,{prepareQuery:_.bind(t.prepareQuery,t)})):s.push(void 0);return s},validateComponent:function(e){var t;t=e.type||e.ctype;if(t==="collection"||t==="collection_view"||t==="table"||t==="table_view")return;throw"The MultiCollectionView expects to contain multiple collection views"}}),e.defines({version:3})}.call(this),function(){var e;e=Luca.register("Luca.components.ScrollableTable"),e["extends"]("Luca.components.TableView"),e.replaces("Luca.components.GridView"),e.publicConfiguration({maxHeight:void 0}),e.privateMethods({$scrollableWrapperEl:function(){return this.$el.parent(".scrollable-wrapper")},setMaxHeight:function(){var e;return e=this.$scrollableWrapperEl(),e.css({overflow:"auto","max-height":this.maxHeight})},afterRender:function(){return this.$wrap("scrollable-wrapper"),this.setMaxHeight()}}),e.defines({version:1})}.call(this),function(){var e,t=[].slice;e=Luca.register("Luca.Application"),e["extends"]("Luca.containers.Viewport"),e.triggers("controller:change","action:change"),e.publicConfiguration({name:"MyApp",stateful:{},autoBoot:!1,autoStartHistory:"before:render",pushState:!1,startHistorySilently:!1,rootUrl:void 0,useCollectionManager:!0,collectionManager:{},collectionManagerClass:"Luca.CollectionManager",plugin:!1,useController:!0,mainControllerContainer:void 0,keyEvents:{},createRoleBasedGetters:!1,useSocketManager:!1,socketManagerOptions:{}}),e.publicMethods({initialize:function(e){var t,n,r,i=this;this.options=e!=null?e:{},n=this,r=this.name,t=typeof Luca.getApplication=="function"?Luca.getApplication():void 0,Luca.Application.registerInstance(this),Luca.concerns.StateModel.__initializer.call(this),this.setupCollectionManager(),this.setupSocketManager(),Luca.containers.Viewport.prototype.initialize.apply(this,arguments),this.useController===!0&&this.setupMainController(),this.defer(function(){return n.render()}).until(this,"ready"),this.setupRouter(),(this.useKeyHandler===!0||this.useKeyRouter===!0)&&this.keyEvents!=null&&this.setupKeyHandler(),this.plugin!==!0&&!t&&(Luca.getApplication=function(e){return e==null?n:Luca.Application.instances[e]});if(this.autoBoot){if(Luca.util.resolve(this.name))throw"Attempting to override window."+this.name+" when it already exists";$(function(){return window[r]=n,n.boot()})}return Luca.trigger("application:available",this)},activeView:function(){var e;return(e=this.activeSubSection())?this.view(e):this.view(this.activeSection())},activeSection:function(){return this.get("active_section")},activeSubSection:function(){return this.get("active_sub_section")},activePages:function(){var e=this;return console.log("This method will be getting removed in Luca 1.0"),this.$(".luca-controller").map(function(e,t){return $(t).data("active-section")})},boot:function(){var e,t,n,r,i;this.trigger("ready"),r=[this.collectionManager,this.socket,this.router],i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(e!=null?e.trigger("ready"
):void 0);return i},collection:function(){return this.collectionManager.getOrCreate.apply(this.collectionManager,arguments)},get:function(e){return this.state.get(e)},set:function(e,t,n){return this.state.set.apply(this.state,arguments)},view:function(e){return Luca.cache(e)},navigate_to:function(e,t){return this.getMainController().navigate_to(e,t)}}),e.privateMethods({setupControllerBindings:function(){var e,t,n,r=this;return e=this,(t=this.getMainController())!=null&&t.bind("after:card:switch",function(t,n){return r.state.set({active_section:n.name}),e.trigger("controller:change",t.name,n.name)}),(n=this.getMainController())!=null?n.each(function(t){var n;n=t.type||t.ctype;if(n.match(/controller$/))return t.bind("after:card:switch",function(t,n){return r.state.set({active_sub_section:n.name}),e.trigger("action:change",t.name,n.name)})}):void 0},setupMainController:function(){var e,t,n=this;return this.useController===!0&&(t=this.components||[],e={type:"controller",name:"main_controller",role:"main_controller",components:t},this.mainControllerContainer!=null&&_.extend(e,{container:this.mainControllerContainer}),this.components=[e]),this.getMainController=function(){return n.findComponentByRole("main_controller")},this.defer(this.setupControllerBindings,!1).until("after:components")},setupCollectionManager:function(){var e,t,n,r,i;if(this.useCollectionManager!==!0)return;if(this.collectionManager!=null&&((n=this.collectionManager)!=null?n.get:void 0)!=null)return;_.isString(this.collectionManagerClass)&&(this.collectionManagerClass=Luca.util.resolve(this.collectionManagerClass)),e=this.collectionManagerOptions||{},_.isObject(this.collectionManager)&&!_.isFunction((r=this.collectionManager)!=null?r.get:void 0)&&(e=this.collectionManager,this.collectionManager=void 0),_.isString(this.collectionManager)&&(e={name:this.collectionManager}),this.collectionManager=typeof (t=Luca.CollectionManager).get=="function"?t.get(e.name):void 0;if(!_.isFunction((i=this.collectionManager)!=null?i.get:void 0))return e.autoStart=!1,this.collectionManager=new this.collectionManagerClass(e)},setupSocketManager:function(){if(_.isEmpty(this.socketManagerOptions))return;return _.extend(this.socketManagerOptions,{autoStart:!1}),this.socket=new Luca.SocketManager(this.socketManagerOptions)},setupRouter:function(){var e,t,n,r,i,s,o,u,a,f;if(this.router==null&&this.routes==null)return;s=Luca.Router,_.isString(this.router)&&(s=Luca.util.resolve(this.router)),o=s.prototype,o.routes||(o.routes={}),o.app=this;if(_.isObject(this.routes)){u=this.routes;for(i in u)t=u[i],t.match(/\ /)?(a=t.split(" "),r=a[0],e=a[1]):t.match(/\#/)&&(f=t.split("#"),r=f[0],e=f[1]),n=_.uniqueId(r),o[n]=Luca.Application.routeTo(r).action(e),o.routes[i]=n}this.router=new s(o);if(this.router&&this.autoStartHistory)return this.autoStartHistory===!0&&(this.autoStartHistory="before:render"),this.defer(Luca.Application.startHistory,!1).until(this,this.autoStartHistory)},setupKeyHandler:function(){var e,t,n,r,i,s,o;if(!this.keyEvents)return;(n=this.keyEvents).control_meta||(n.control_meta={}),this.keyEvents.meta_control&&_.extend(this.keyEvents.control_meta,this.keyEvents.meta_control),e=_.bind(this.keyHandler,this),s=this.keypressEvents||["keydown"],o=[];for(r=0,i=s.length;r<i;r++)t=s[r],o.push($(document).on(t,e));return o}}),e.classMethods({instances:{},pageHierarchy:function(){var e,t,n;return e=Luca(),n=e.getMainController(),t=function(e){return e.components==null&&e.pages==null?{}:_(e.components||e.pages).reduce(function(e,n){return e[n.name]=n.name,n.navigate_to!=null&&(e[n.name]=t(n)),e},{})},t(n)},registerInstance:function(e){return Luca.Application.instances[e.name]=e},checkForKeymaster:function(){var e;if(typeof window!="undefined"&&window!==null?(e=window.key)!=null?e.noConflict:void 0:void 0)return Luca.key=window.key.noConflict(),Luca.Application.prototype.setupKeyHandler=function(){if(!this.keyEvents)return;return Luca.util.setupKeymaster(this.keyEvents,"all").on(this)}},routeTo:function(){var e,n,r,i,s,o;return i=1<=arguments.length?t.call(arguments,0):[],r=_(i).last(),n=_(i).first(),e=void 0,o=void 0,s=function(){var s,u,f,l,h,p,v,m,y,w;u=1<=arguments.length?t.call(arguments,0):[],p=this.app||Luca(),f=0,i.length===1&&(v=Luca(n))&&(i=v.controllerPath()),w=[];for(m=0,y=i.length;m<y;m++){h=i[m];if(!_.isString(h))continue;l=i[++f],v=Luca(h),h===r&&(o!=null&&v[o]==null&&v.routeHandler==null&&console.log("You specified a component action to call when a route matches, but it does not exist on the component"),e=o!=null&&v[o]!=null?_.bind(v[o],v):v.routeHandler!=null?v.routeHandler:void 0),e||(e=_.isFunction(l)?_.bind(l,v):_.isObject(l)?(s=l.action&&v[s]!=null)?_.bind(v[s],v):void 0:void 0),w.push(p=p.navigate_to(h,function(){return e!=null?e.apply(v,u):void 0}))}return w},s.action=function(e){return o=e,s},s},startHistory:function(){return Backbone.history.start({pushState:this.pushState,rootUrl:this.rootUrl,silent:this.startHistorySilently})}}),e.afterDefinition(function(){return Luca.routeHelper=Luca.Application.routeTo,Luca.Application.checkForKeymaster()}),e.register()}.call(this),function(){var e;e=Luca.register("Luca.components.CollectionLoaderView"),e["extends"]("Luca.View"),e.defines({className:"luca-ui-collection-loader-view",template:"components/collection_loader_view",initialize:function(e){return this.options=e!=null?e:{},Luca.components.Template.prototype.initialize.apply(this,arguments),this.container||(this.container=$("body")),this.manager||(this.manager=Luca.CollectionManager.get()),this.setupBindings()},modalContainer:function(){return $("#progress-modal",this.el)},setupBindings:function(){var e=this;return this.manager.bind("collection_loaded",function(t){var n,r,i,s;return r=e.manager.loadedCollectionsCount(),s=e.manager.totalCollectionsCount(),i=parseInt(r/s*100),n=_.string.titleize(_.string.humanize(t)),e.modalContainer().find(".progress .bar").attr("style","width: "+i+"%;"),e.modalContainer().find(".message").html("Loaded "+n+"...")}),this.manager.bind("all_collections_loaded",function(){return e.modalContainer().find(".message").html("All done!"),_.delay(function(){return e.modalContainer().modal("hide")},400)})}})}.call(this),function(){var e;e=Luca.register("Luca.components.Controller"),e["extends"]("Luca.containers.CardView"),e.publicConfiguration({tracker:"page",activeAttribute:"active-section",stateful:!0,defaultPage:void 0,defaultCard:0}),e.publicMethods({"default":function(e){return this.navigate_to(this.defaultPage||this.defaultCard,e)},activePage:function(){return this.activeSection()},navigate_to:function(e,t){var n=this;return e||(e=this.defaultCard),this.activate(e,!1,function(e,r,i){var s,o;i.activatedByController===!0?i.trigger("on:controller:reactivation"):(i.trigger("on:controller:activation"),i.activatedByController=!0),n.state.set({active_section:i.name}),n.tracker!=null&&(s=n.app||(typeof Luca.getApplication=="function"?Luca.getApplication():void 0))&&s.state.set(n.tracker,i.name),(o=Luca.key)!=null&&o.setScope(i.name);if(_.isFunction(t))return t.call(i)}),this.find(e)}}),e.classMethods({setupComponentKeyEvents:function(){return this._().each(function(e){if(_.isObject(e.keyEvents)&&e.name!=null)return Luca.util.setupKeymaster(e.keyEvents,e.name).on(e)})},controllerPath:function(){var e,t,n;t=this,n=[t.name],e=!1;while(t&&!e)t=typeof t.getParent=="function"?t.getParent():void 0,(t!=null?t.role:void 0)==="main_controller"&&(e=!0),t!=null&&!e&&n.push(t.name);return n.reverse()}}),e.afterDefinition(function(){return Luca.View.prototype.hooks.push("on:controller:activation")}),e.defines({initialize:function(e){var t;this.options=e,this.defaultCard||(this.defaultCard=this.defaultPage||(this.defaultPage=((t=this.components[0])!=null?t.name:void 0)||0)),this.defaultPage||(this.defaultPage=this.defaultCard),this.defaultState||(this.defaultState={active_section:this.defaultPage}),Luca.containers.CardView.prototype.initialize.apply(this,arguments);if(this.defaultCard==null)throw"Controllers must specify a defaultCard property and/or the first component must have a name";return this._().each(function(e){return e.controllerPath=Luca.components.Controller.controllerPath}),this.on("after:render",this["default"],this),this.on("before:render",Luca.components.Controller.setupComponentKeyEvents,this)},each:function(e){var t=this;return _(this.components).each(function(n){return e.call(t,n)})},activeSection:function(){return this.get("active_section")},pageControllers:function(e){return e==null&&(e=!1),this.controllers.apply(this,arguments)},controllers:function(e){return e==null&&(e=!1),this.select(function(e){var t;return t=e.type||e.ctype,t==="controller"||t==="page_controller"})},availablePages:function(){return this.availableSections.apply(this,arguments)},availableSections:function(){var e,t=this;return console.log("The availableSections()/availablePages() method will be removed in 1.0"),e={},e[this.name]=this.sectionNames(),_(this.controllers()).reduce(function(e,t){return e[t.name]=t.sectionNames(),e},e)},pageNames:function(){return this.sectionNames()},sectionNames:function(e){return e==null&&(e=!1),this.pluck("name")}})}.call(this),function(){var e;e=Luca.register("Luca.core.Field"),e["extends"]("Luca.View"),e.triggers("before:validation","after:validation","on:change"),e.publicConfiguration({className:"luca-ui-field",disabled:void 0,helperText:void 0,label:void 0,labelAlign:"top",placeHolder:void 0,required:void 0,statuses:["warning","error","success"],valueType:"string"}),e.publicMethods({disable:function(){return this.getInputElement().attr("disabled",!0)},enable:function(){return this.getInputElement().attr("disabled",!1)},getValue:function(){var e,t;return e=(t=this.getInputElement())!=null?t.val():void 0,this.getParsedValue(e)},setValue:function(e){var t;return(t=this.getInputElement())!=null?t.val(e):void 0},updateState:function(e){var t,n,r,i;i=this.statuses;for(n=0,r=i.length;n<r;n++)t=i[n],this.$el.removeClass(t);return this.$el.addClass(e)},clearErrors:function(){return this.$el.removeClass("error")},displayErrors:function(e){return this.updateState("error")}}),e.privateMethods({getParsedValue:function(e){if(_.str.isBlank(e))return e;switch(this.valueType){case"integer":return parseInt(e);case"string":return""+e;case"float":return parseFloat(e);default:return e}}}),e.privateConfiguration({isField:!0,template:"fields/text_field"}),e.privateMethods({initialize:function(e){var t;this.options=e!=null?e:{},_.extend(this,this.options),this.input_id||(this.input_id=_.uniqueId("field")),this.input_name||(this.input_name=this.name),this.input_class||(this.input_class=""),this.input_type||(this.input_type=""),this.helperText||(this.helperText="");if(this.label==null||this.label.length===0)this.label=this.name;return this.required&&((t=this.label)!=null?!t.match(/^\*/):!void 0)&&(this.label||(this.label="*"+this.label)),this.inputStyles||(this.inputStyles=""),this.input_value||(this.input_value=this.value||""),this.disabled&&this.disable(),this.updateState(this.state),this.placeHolder||(this.placeHolder=""),Luca.View.prototype.initialize.apply(this,arguments)},beforeRender:function(){Luca.config.enableBoostrap&&this.$el.addClass("control-group");if(this.required)return this.$el.addClass("required")},change_handler:function(e){return this.trigger("on:change",this,e)},getInputElement:function(){return this.input||(this.input=this.$("input").eq(0))}}),e.register()}.call(this),function(){var e;e=Luca.register("Luca.fields.ButtonField"),e["extends"]("Luca.core.Field"),e.triggers("button:click"),e.publicConfiguration({buttonSize:void 0,"class":void 0,icon_class:void 0,label:void 0,text:void 0,white:!1}),e.privateConfiguration({readOnly:!0,input_value:void 0,input_type:"button",icon_class:void 0,input_name:void 0,buttonClasses:""}),e.privateConfiguration({isButton:!0,autoBindEventHandlers:!0,template:"fields/button_field",events:{"click input":"clickHandler"}}),e.privateMethods({clickHandler:function(e){var t,n;return t=n=$(e.currentTarget),this.trigger("button:click")},initialize:function(e){var t;this.options=e!=null?e:{},_.extend(this,this.options),Luca.core.Field.prototype.initialize.apply(this,arguments);if((t=this.icon_class)!=null?t.length:void 0)return this.template="fields/button_field_link"},afterInitialize:function(){var e;this.input_id||(this.input_id=_.uniqueId("button")),this.input_name||(this.input_name=this.name||(this.name=this.input_id)),this.input_value||(this.input_value=this.label||(this.label=this.text)),this.input_class||(this.input_class=this["class"]||(this["class"]=this.buttonClasses)),((e=this.buttonSize)!=null?e.length:void 0)>0&&(this.input_class+=" "+buttonSize.replace(/btn-/,"")),this.icon_class||(this.icon_class=""),this.icon_class.length&&!this.icon_class.match(/^icon-/)&&(this.icon_class="icon-"+this.icon_class);if(this.white)return this.icon_class+=" icon-white"},setValue:function(){return!0}}),e.register()}.call(this),function(){var e;e=Luca.register("Luca.fields.CheckboxArray"),e["extends"]("Luca.core.Field"),e.privateConfiguration({template:"fields/checkbox_array",className:"luca-ui-checkbox-array",events:{"click input":"clickHandler"},selectedItems:[]}),e.privateMethods({initialize:function(e){return this.options=e!=null?e:{},_.extend(this,this.options),_.extend(this,Luca.concerns.Deferrable),_.bindAll(this,"renderCheckboxes","clickHandler","checkSelected"),Luca.core.Field.prototype.initialize.apply(this,arguments),this.input_id||(this.input_id=_.uniqueId("field")),this.input_name||(this.input_name=this.name),this.label||(this.label=this.name),this.valueField||(this.valueField="id"),this.displayField||(this.displayField="name")},afterInitialize:function(e){var t;this.options=e!=null?e:{};try{this.configure_collection()}catch(n){console.log("Error Configuring Collection",this,n.message)}t=this;if(!Luca.isBackboneCollection(this.collection))throw"Checkbox Array Fields must specify a @collection property";return this.collection.length>0?this.renderCheckboxes():this.defer("renderCheckboxes").until(this.collection,"reset")},clickHandler:function(e){var t;t=$(e.target);if(t.prop("checked"))return this.selectedItems.push(t.val());if(_(this.selectedItems).include(t.val()))return this.selectedItems=_(this.selectedItems).without(t.val())},controls:function(){return this.$(".controls")},renderCheckboxes:function(){var e=this;return this.controls().empty(),this.selectedItems=[],this.collection.each(function(t){var n,r,i,s,o;return o=t.get(e.valueField),s=t.get(e.displayField),i=_.uniqueId(""+e.cid+"_checkbox"),r=e.make("input",{type:"checkbox","class":"array-checkbox",name:e.input_name,value:o,id:i}),n=e.make("label",{"for":i},r),$(n).append(" "+s),e.controls().append(n)}),this.trigger("checkboxes:rendered",this.checkboxesRendered=!0),this},uncheckAll:function(){return this.allFields().prop("checked",!1)},allFields:function(){return this.controls().find("input[type='checkbox']")}}),e.publicMethods({checkSelected:function(e){var t,n,r,i,s;e!=null&&(this.selectedItems=e),this.uncheckAll(),s=this.selectedItems;for(r=0,i=s.length;r<i;r++)n=s[r],t=this.controls().find("input[value='"+n+"']"),t.prop("checked",!0);return this.selectedItems},getValue:function(){var e,t,n,r,i;r=this.allFields(),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],this.$(e).prop("checked")&&i.push(this.$(e).val());return i},setValue:function(e){var t;return this.selectedItems=e,this.checkboxesRendered===!0?this.checkSelected(e):(t=this,this.defer(function(){return t.checkSelected(e)}).until("checkboxes:rendered"))},getValues:function(){return this.getValue()},setValues:function(e){return this.setValue(e)}})}.call(this),function(){var e;e=Luca.register("Luca.fields.CheckboxField"),e["extends"]("Luca.core.Field"),e.triggers("checked","unchecked"),e.publicConfiguration({send_blanks:!0,input_value:1}),e.privateConfiguration({template:"fields/checkbox_field",events:{"change input":"change_handler"}}),e.privateInterface({change_handler:function(e){var t,n;return t=n=$(e.target),t.is(":checked")?this.trigger("checked"):this.trigger("unchecked"),this.trigger("on:change",this,e,t.is(":checked"))},initialize:function(e){return this.options=e!=null?e:{},_.extend(this,this.options),_.bindAll(this,"change_handler"),Luca.core.Field.prototype.initialize.apply(this,arguments),this.input_id||(this.input_id=_.uniqueId("field")),this.input_name||(this.input_name=this.name),this.label||(this.label=this.name)}}),e.publicInterface({setValue:function(e){return this.getInputElement().attr("checked",e)},getValue:function(){return this.getInputElement().is(":checked")}}),e.defines({version:1})}.call(this),function(){var e;e=Luca.register("Luca.fields.FileUploadField"),e["extends"]("Luca.core.Field"),e.defines({version:1,template:"fields/file_upload_field",afterInitialize:function(){return this.input_id||(this.input_id=_.uniqueId("field")),this.input_name||(this.input_name=this.name),this.label||(this.label=this.name),this.helperText||(this.helperText="")}})}.call(this),function(){var e;e=Luca.register("Luca.fields.HiddenField"),e["extends"]("Luca.core.Field"),e.defines({template:"fields/hidden_field",afterInitialize:function(){return this.input_id||(this.input_id=_.uniqueId("field")),this.input_name||(this.input_name=this.name),this.input_value||(this.input_value=this.value),this.label||(this.label=this.name)}})}.call(this),function(){var e;e=Luca.register("Luca.components.LabelField"),e["extends"]("Luca.core.Field"),e.defines({formatter:function(e){return e||(e=this.getValue()),_.str.titleize(e)},setValue:function(e){return this.trigger("change",e,this.getValue()),this.getInputElement().attr("value",e),this.$(".value").html(this.formatter(e))}})}.call(this),function(){var e;e=Luca.register("Luca.fields.SelectField"),e["extends"]("Luca.core.Field"),e.triggers("after:select","on:change"),e.publicConfiguration({allowMultiple:!1,includeBlank:!0,blankValue:"",blankText:"Select One",maxDisplayLength:0,retainValue:void 0,label:void 0}),e.privateConfiguration({template:"fields/select_field",events:{"change select":"change_handler"}}),e.publicMethods({setValue:function(e){return this.currentValue=e,Luca.core.Field.prototype.setValue.apply(this,arguments)},getValue:function(){var e,t,n=this;return e=(t=this.getInputElement())!=null?t.val():void 0,this.allowMultiple?_.map(e,function(e){return n.getParsedValue(e)}):this.getParsedValue(e)}}),e.privateMethods({initialize:function(e){this.options=e!=null?e:{},_.extend(this,this.options),_.extend(this,Luca.concerns.Deferrable),_.bindAll(this,"change_handler"),_.isArray(this.collection)&&(this.collection={data:this.collection}),Luca.core.Field.prototype.initialize.apply(this,arguments),this.input_id||(this.input_id=_.uniqueId("field")),this.input_name||(this.input_name=this.name),this.valueField==="id"&&(this.valueType||(this.valueType=Luca.config.idAttributeType)),this.label||(this.label=this.name);if(this.retainValue==null)return this.retainValue=!0},afterInitialize:function(){var e,t,n;if((e=this.collection)!=null?e.data:void 0)this.valueField||(this.valueField="id"),this.displayField||(this.displayField="name"),this.sortOptionsBy||(this.sortOptionsBy=this.displayField),this.parseData();try{this.configure_collection(this.setAsDeferrable)}catch(r){console.log("Error Configuring Collection",this,r.message)}return(t=this.collection)!=null&&t.bind("before:fetch",this.beforeFetch,this),(n=this.collection)!=null?n.bind("reset",this.populateOptions,this):void 0},parseData:function(){var e=this;return this.collection.data=_(this.collection.data).map(function(t){var n;return _.isArray(t)?(n={},n[e.valueField]=t[0],n[e.displayField]=t[1]||t[0],n):t})},getInputElement:function(){return this.input||(this.input=this.$("select").eq(0))},afterRender:function(){var e,t,n;return((e=this.collection)!=null?(t=e.models)!=null?t.length:void 0:void 0)>0?this.populateOptions():(n=this.collection)!=null?n.trigger("reset"):void 0},beforeFetch:function(){return this.resetOptions()},change_handler:function(e){return this.trigger("on:change",this,e)},resetOptions:function(){this.getInputElement().html("");if(this.allowMultiple)return this.getInputElement().attr({multiple:!0});if(this.includeBlank)return this.getInputElement().append("<option value='"+this.blankValue+"'>"+this.blankText+"</option>")},populateOptions:function(){var e,t,n,r,i,s,o,u,a,f=this;this.resetOptions();if(((a=this.collection)!=null?a.length:void 0)>0){this.sortOptionsBy!=null?n=this.collection.sortBy(function(e){return e.read!=null?e.read(f.sortOptionsBy):e.get(f.sortOptionsBy)}):n=this.collection.models;for(o=0,u=n.length;o<u;o++)t=n[o],s=(typeof t.read=="function"?t.read(this.valueField):void 0)||t.get(this.valueField),e=(typeof t.read=="function"?t.read(this.displayField):void 0)||t.get(this.displayField),this.maxDisplayLength&&this.maxDisplayLength>0&&(e=_.str.truncate(e,this.maxDisplayLength)),this.selected&&s===this.selected&&(i="selected"),r="<option "+i+" value='"+s+"'>"+e+"</option>",this.getInputElement().append(r)}return this.trigger("after:populate:options",this),this.setValue(this.currentValue)}}),e.register()}.call(this),function(){var e;e=Luca.register("Luca.fields.TextAreaField"),e["extends"]("Luca.core.Field"),e.defines({autoBindEventHandlers:!0,events:{"blur textarea":"blur_handler","focus textarea":"focus_handler"},template:"fields/text_area_field",height:"200px",width:"90%",keyEventThrottle:300,initialize:function(e){this.options=e!=null?e:{},this.input_id||(this.input_id=_.uniqueId("field")),this.input_name||(this.input_name=this.name),this.label||(this.label=this.name),this.input_class||(this.input_class=this["class"]),this.input_value||(this.input_value=""),this.inputStyles||(this.inputStyles="height:"+this.height+";width:"+this.width),this.placeHolder||(this.placeHolder=""),Luca.core.Field.prototype.initialize.apply(this,arguments);if(this.enableKeyEvents===!0)return this.keyup_handler=_.debounce(this.keyup_handler,this.keyEventThrottle||10),console.log("Registering Key Events"),this.registerEvent("keyup textarea","keyup_handler"),this.registerEvent("keydown textarea","keyup_handler")},setValue:function(e){return $(this.field()).val(e)},getValue:function(){return $(this.field()).val()},field:function(){return this.input=this.$("textarea")},keyup_handler:function(e){return this.trigger("on:change",this,e),this.trigger("on:keyup",this,e)},blur_handler:function(e){return this.trigger("on:blur",this,e)},focus_handler:function(e){return this.trigger("on:focus",this,e)},change_handler:function(e){return this.trigger("on:change",this,e)}})}.call(this),function(){var e;e=Luca.register("Luca.fields.TextField"),e["extends"]("Luca.core.Field"),e.defines({_inheritEvents:{"blur input":"blur_handler","focus input":"focus_handler","change input":"change_handler"},template:"fields/text_field",autoBindEventHandlers:!0,send_blanks:!0,keyEventThrottle:300,initialize:function(e){return this.options=e!=null?e:{},this.enableKeyEvents&&(this.keyEventThrottle&&(this.keyup_handler=_.debounce(this.keyup_handler,this.keyEventThrottle)),this.registerEvent("keyup input","keyup_handler")),this.input_id||(this.input_id=_.uniqueId("field")),this.input_name||(this.input_name=this.name),this.label||(this.label=this.name),this.input_class||(this.input_class=this["class"]),this.input_value||(this.input_value=this.value||""),this.prepend&&(this.$el.addClass("input-prepend"),this.addOn=this.prepend),this.append&&(this.$el.addClass("input-append"),this.addOn=this.append),this.placeHolder||(this.placeHolder=""),Luca.core.Field.prototype.initialize.apply(this,arguments)},keyup_handler:function(e){return this.trigger("on:change",this,e),this.trigger("on:keyup",this,e)},blur_handler:function(e){return this.trigger("on:blur",this,e)},focus_handler:function(e){return this.trigger("on:focus",this,e)},change_handler:function(e){return this.trigger("on:change",this,e)}})}.call(this),function(){var e;e=Luca.register("Luca.fields.TypeAheadField"),e["extends"]("Luca.fields.TextField"),e.defines({getSource:function(){return Luca.util.read(this.source)||[]},matcher:function(e){return!0},beforeRender:function(){return Luca.fields.TextField.prototype.beforeRender.apply(this,arguments),this.getInputElement().attr("data-provide","typeahead")},afterRender:function(){return Luca.fields.TextField.prototype.afterRender.apply(this,arguments),this.getInputElement().typeahead({matcher:this.matcher,source:this.getSource()})}})}.call(this),function(){var e;e=Luca.register("Luca.components.FormView"),e["extends"]("Luca.Container"),e.mixesIn("LoadMaskable","FormModelBindings"),e.triggers("before:submit","before:reset","before:load","before:load:new","before:load:existing","after:submit","after:reset","after:load","after:load:new","after:load:existing","after:submit:success","after:submit:fatal_error","after:submit:error","state:change:dirty"),e.publicConfiguration({trackDirtyState:!1,trackModelChanges:!1,labelAlign:void 0,fieldLayoutClass:void 0,legend:"",toolbar:!0,toolbarConfig:void 0,defaultToolbar:"Luca.components.FormView.defaultToolbar",loadMask:!0,well:!1,searchForm:!1,horizontalForm:!1,inlineForm:!1,includeBlankValues:void 0}),e.privateConfiguration({tagName:"form",_inheritEvents:{"click .submit-button":"submitHandler","click .reset-button":"resetHandler"},bodyClassName:"form-view-body",stateful:{dirty:!1,currentModel:void 0}}),e.privateMethods({initialize:function(e){var t,n,r,i;this.options=e!=null?e:{},n=this,this.loadMask==null&&(this.loadMask=Luca.config.enableBoostrap),Luca.Container.prototype.initialize.apply(this,arguments),this.components||(this.components=this.fields),_.bindAll(this,"submitHandler","resetHandler","renderToolbars"),i=this._inheritEvents;for(t in i)r=i[t],this.registerEvent(t,r);return this.trackDirtyState===!0&&this.on("after:components",function(){var e,t,r,i,s;i=this.getFields(),s=[];for(t=0,r=i.length;t<r;t++)e=i[t],s.push(e.on("on:change",this.onFieldChange,n));return s},n),this.setupHooks(this.hooks),this.applyStyleClasses(),Luca.components.FormView.setupToolbar.call(this)},onFieldChange:function(e,t){return this.trigger("field:change",e,t),this.state.set("dirty",!0)},getDefaultToolbar:function(){var e;return e=this.toolbarConfig||this.defaultToolbar,Luca.util.resolve(Luca.util.read(e))},applyStyleClasses:function(){Luca.config.enableBoostrap&&this.applyBootstrapStyleClasses(),this.labelAlign&&this.$el.addClass("label-align-"+this.labelAlign);if(this.fieldLayoutClass)return this.$el.addClass(this.fieldLayoutClass)},applyBootstrapStyleClasses:function(){this.labelAlign==="left"&&(this.inlineForm=!0),this.well&&this.$el.addClass("well"),this.searchForm&&this.$el.addClass("form-search"),this.horizontalForm&&this.$el.addClass("form-horizontal");if(this.inlineForm)return this.$el.addClass("form-inline")},resetHandler:function(e){var t,n,r;t=n=$(e!=null?e.target:void 0);if(this.beforeReset!=null){r=this.beforeReset();if(r===!1)return}return this.reset(),this.trigger("after:reset",this)},submitHandler:function(e){var t;if(this.beforeSubmit!=null){t=this.beforeSubmit();if(t===!1)return}else this.trigger("before:submit",this);this.loadMask===!0&&this.trigger("enable:loadmask",this);if(this.hasModel())return this.submit()},afterComponents:function(){var e,t;return(t=Luca.Container.prototype.afterComponents)!=null&&t.apply(this,arguments),e=this,this.eachField(function(t){var n=this;return t.getForm=function(){return e},t.getModel=function(){return e.currentModel()}})},eachField:function(e){return _(this.getFields()).map(e)},getField:function(e){var t;return t=_(this.getFields("name",e)).first(),t!=null?t:_(this.getFields("input_name",e)).first()},getFields:function(e,t){var n;return n=this.selectByAttribute("isField",!0,!0),e!=null&&t!=null&&(n=_(n).select(function(n){var r;return r=n[e],_.isFunction(r)&&(r=r.call(n)),r===t})),n},loadModel:function(e){var t,n,r,i;r=this,n=this.getFields(),this.state.set("dirty",!1),this.trigger("before:load",this,e),e&&((i=e.beforeFormLoad)!=null&&i.apply(e,this),t="before:load:"+(e.isNew()?"new":"existing"),this.trigger(t,this,e)),this.state.set("currentModel",e),this.setValues(e||{},{silent:!0}),this.trigger("after:load",this,e);if(e)return this.trigger("after:load:"+(e.isNew()?"new":"existing"),this,e)},reset:function(){return this.loadModel(this.state.get("currentModel"))},clear:function(){var e=this;return this.state.set("currentModel",typeof this.defaultModel=="function"?this.defaultModel():void 0),_(this.getFields()).each(function(t){try{return t.setValue("")}catch(n){return console.log("Error Clearing",e,t)}})},isDirty:function(){return!!this.state.get("dirty")},setValues:function(e,t){var n,r=this;t==null&&(t={}),e||(e=this.currentModel()),n=this.getFields(),_(n).each(function(t){var n,r;n=t.input_name||t.name;if(e!=null?e[n]:void 0)r=Luca.util.read(e[n]);!r&&Luca.isBackboneModel(e)&&(r=e.get(n));if(t.readOnly!==!0)return t!=null?t.setValue(r):void 0});if(t.silent!=null!=1)return this.applyFormValuesToModel()},getValues:function(e){var t,n=this;return e==null&&(e={}),e.reject_blank==null&&(e.reject_blank=!0),e.skip_buttons==null&&(e.skip_buttons=!0),e.blanks===!1&&(e.reject_blank=!0),t=_(this.getFields()).inject(function(t,r){var i,s,o,u,f;u=r.getValue(),s=r.input_name||r.name,f=!!_.str.isBlank(u)||!!_.isUndefined(u),i=!e.reject_blank&&!r.send_blanks;if(r.includeBlank===!0||n.includeBlankValues===!0)i=!0;return e.debug&&console.log(""+s+" Options",e,"Value",u,"Value Is Blank?",f,"Allow Blanks?",i),e.skip_buttons&&r.isButton?o=!0:(f&&i===!1&&(o=!0),r.input_name==="id"&&f===!0&&(o=!0)),e.debug&&console.log("Skip is true on "+s),o!==!0&&(t[s]=u),t},e.defaults||{}),t},removeErrors:function(){var e,t,n,r,i;this.$(".alert.alert-error").remove(),this.$el.removeClass("error"),r=this.getFields(),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(e.clearErrors());return i},displayErrors:function(e){var t,n,r,i,s,o,u;i=!1,u=this.getFields();for(s=0,o=u.length;s<o;s++){t=u[s];for(r in e){n=e[r];if(r!==t.input_name)continue;t.displayErrors(n),i=!0}}if(i)return this.$el.addClass("error")},displayValidationErrorsMessage:function(){return this.errorMessage("Please fix the fields with errors")},submit_success_handler:function(e,t,n){return this.trigger("after:submit",this,e,t),this.loadMask===!0&&this.trigger("disable:loadmask",this),t&&(t!=null?t.success:void 0)===!0?this.trigger("after:submit:success",this,e,t):this.trigger("after:submit:error",this,e,t)},submit_fatal_error_handler:function(e,t,n){var r;this.trigger("after:submit",this,e,t),this.trigger("after:submit:fatal_error",this,e,t);try{r=$.parseJSON(t.responseText);if(!r.success&&r.errors!=null)return this.displayValidationErrorsMessage(),this.displayErrors(r.errors)}catch(i){}},submit:function(e,t){var n;e==null&&(e=!0),t==null&&(t={}),_.bindAll(this,"submit_success_handler","submit_fatal_error_handler"),t.success||(t.success=this.submit_success_handler),t.error||(t.error=this.submit_fatal_error_handler),this.removeErrors(),this.applyFormValuesToModel();if(!e)return;return(n=this.currentModel())!=null?n.save(this.currentModel().toJSON(),t):void 0},hasModel:function(){return this.currentModel()!=null},currentModel:function(e){return e==null&&(e={}),(e===!0||(e!=null?e.refresh:void 0)===!0)&&this.applyFormValuesToModel(),this.state.get("currentModel")},applyFormValuesToModel:function(e){var t;return(t=this.currentModel())!=null?t.set(this.getValues(),e):void 0},setLegend:function(e){return this.legend=e,$("fieldset legend",this.el).first().html(this.legend)},flash:function(e){return this.$(".toolbar-container.top").length>0?this.$(".toolbar-container.top").after(e):this.$bodyEl().prepend(e)},successFlashDelay:1500,successMessage:function(e){var t=this;return this.$(".alert.alert-success").remove(),this.flash(Luca.template("components/form_alert",{className:"alert alert-success",message:e})),_.delay(function(){return t.$(".alert.alert-success").fadeOut()},this.successFlashDelay||0)},errorMessage:function(e){return this.$(".alert.alert-error").remove(),this.flash(Luca.template("components/form_alert",{className:"alert alert-error",message:e}))}}),e.classInterface({setupToolbar:function(){if(this.toolbar!==!1&&!this.topToolbar&&!this.bottomToolbar){if(this.toolbar==="both"||this.toolbar==="top")this.topToolbar=_.clone(this.getDefaultToolbar());if(this.toolbar!=="top")return this.bottomToolbar=_.clone(this.getDefaultToolbar())}},defaultToolbar:{buttons:[{icon:"remove-sign",label:"Reset",eventId:"click:reset",className:"reset-button",align:"right"},{icon:"ok-sign",white:!0,label:"Save Changes",eventId:"click:submit",color:"success",className:"submit-button",align:"right"}]}}),e.defines({version:2})}.call(this),function(){var e;e=Luca.register("Luca.components.LoadMask"
),e["extends"]("Luca.View"),e.defines({className:"luca-ui-load-mask",bodyTemplate:"components/load_mask"})}.call(this),function(){var e;e=Luca.register("Luca.components.NavBar"),e["extends"]("Luca.View"),e.publicConfiguration({fixed:!0,position:"top",fluid:void 0,brand:"Luca.js",template:void 0}),e.privateConfiguration({className:"navbar",bodyTemplate:"nav_bar",bodyClassName:"luca-ui-navbar-body",beforeRender:function(){var e;return this.fixed&&this.$el.addClass("navbar-fixed-"+this.position),this.inverse===!0&&this.$el.addClass("navbar-inverse"),this.brand!=null&&(this.$(".brand").attr("href",this.homeLink||"#"),this.$(".brand").html(this.brand)),this.template&&this.navContainer().html(Luca.template(this.template,this)),this.fluid||((e=Luca.getApplication())!=null?e.fluid:void 0)?this.content().addClass(Luca.config.fluidWrapperClass):this.content().addClass(Luca.config.wrapperClass)},render:function(){return this},navContainer:function(){return this.$(".luca-ui-navbar-body .nav-collapse")},content:function(){return this.$(".luca-ui-navbar-body").eq(0)}}),e.register()}.call(this),function(){var e;e=Luca.register("Luca.components.Page"),e["extends"]("Luca.Container"),e.privateMethods({initialize:function(e){return this.options=e!=null?e:{},this.assignComponentsToRegions(),this.bodyTemplate=this.options.layout||this.layout,this.bodyTemplate||(this.bodyTemplate=this.options.template||this.template),Luca.Container.prototype.initialize.apply(this,arguments)},assignComponentsToRegions:function(){var e,t,n,r;return this.components||(this.components=[]),e=function(){var e,i;e=this.regions,i=[];for(r in e)n=e[r],_.isString(n)&&(t=Luca.registry.lookup(n))?n={component:n}:_.isString(n)&&Luca.template(n)&&(n={bodyTemplate:n}),i.push(_.extend(n,{container:"[data-region='"+r+"']"}));return i}.call(this),this.components=e}}),e.publicConfiguration({layout:void 0,regions:{}}),e.register()}.call(this),function(){var e;e=Luca.register("Luca.components.PaginationControl"),e["extends"]("Luca.View"),e.defines({template:"components/pagination",stateful:!0,stateChangeEvents:{numberOfPages:"onPageCountChange"},autoBindEventHandlers:!0,events:{"click a[data-page-number]":"selectPage","click a.next":"nextPage","click a.prev":"previousPage"},onPageCountChange:function(){return this.updateWithPageCount(this.get("numberOfPages"))},limit:function(){var e;return parseInt(this.get("limit")||((e=this.collection)!=null?e.length:void 0))},page:function(){return parseInt(this.get("page")||1)},nextPage:function(){if(!this.nextEnabled())return;return this.set("page",this.page()+1)},previousPage:function(){if(!this.previousEnabled())return;return this.set("page",this.page()-1)},selectPage:function(e){var t,n;return t=n=this.$(e.target),t.is("a.page")||(t=n=n.closest("a.page")),n.siblings().removeClass("is-selected"),t.addClass("is-selected"),this.setPage(n.data("page-number"))},setPage:function(e,t){return e==null&&(e=1),t==null&&(t={}),this.set("page",e,t)},setLimit:function(e,t){return e==null&&(e=1),t==null&&(t={}),this.set("limit",e,t)},pageButtonContainer:function(){return this.$(".group")},previousEnabled:function(){return this.page()>1},nextEnabled:function(){return this.page()<this.totalPages()},previousButton:function(){return this.$("a.page.prev")},nextButton:function(){return this.$("a.page.next")},pageButtons:function(){return this.$("a[data-page-number]",this.pageButtonContainer())},updateWithPageCount:function(e,t){var n,r=this;return this.pageCount=e,t==null&&(t=[]),n=t.length,this.pageButtonContainer().empty(),_(this.pageCount).times(function(e){var t,n;return n=e+1,t=r.make("a",{"data-page-number":n,"class":"page"},n),r.pageButtonContainer().append(t)}),this.toggleNavigationButtons(),this.selectActivePageButton(),this},toggleNavigationButtons:function(){this.$("a.next, a.prev").addClass("disabled"),this.nextEnabled()&&this.nextButton().removeClass("disabled");if(this.previousEnabled())return this.previousButton().removeClass("disabled")},selectActivePageButton:function(){return this.activePageButton().addClass("is-selected")},activePageButton:function(){return this.pageButtons().filter("[data-page-number='"+this.page()+"']")},totalPages:function(){return this.pageCount},totalItems:function(){var e;return parseInt(((e=this.collection)!=null?e.length:void 0)||0)},itemsPerPage:function(e,t){return t==null&&(t={}),e!=null&&this.set("limit",e,t),parseInt(this.get("limit"))}})}.call(this),function(){_.def("Luca.components.RecordManager")["extends"]("Luca.containers.CardView")["with"]({events:{"click .record-manager-grid .edit-link":"edit_handler","click .record-manager-filter .filter-button":"filter_handler","click .record-manager-filter .reset-button":"reset_filter_handler","click .add-button":"add_handler","click .refresh-button":"filter_handler","click .back-to-search-button":"back_to_search_handler"},record_manager:!0,initialize:function(e){var t=this;this.options=e!=null?e:{},Luca.containers.CardView.prototype.initialize.apply(this,arguments);if(!this.name)throw"Record Managers must specify a name";return _.bindAll(this,"add_handler","edit_handler","filter_handler","reset_filter_handler"),this.filterConfig&&_.extend(this.components[0][0],this.filterConfig),this.gridConfig&&_.extend(this.components[0][1],this.gridConfig),this.editorConfig&&_.extend(this.components[1][0],this.editorConfig),this.bind("after:card:switch",function(){t.activeCard===0&&t.trigger("activation:search",t);if(t.activeCard===1)return t.trigger("activation:editor",t)})},components:[{ctype:"split_view",relayFirstActivation:!0,components:[{ctype:"form_view"},{ctype:"grid_view"}]},{ctype:"form_view"}],getSearch:function(e,t){return e==null&&(e=!1),t==null&&(t=!0),e===!0&&this.activate(0),t===!0&&this.getEditor().clear(),_.first(this.components)},getFilter:function(){return _.first(this.getSearch().components)},getGrid:function(){return _.last(this.getSearch().components)},getCollection:function(){return this.getGrid().collection},getEditor:function(e,t){var n=this;return e==null&&(e=!1),t==null&&(t=!1),e===!0&&this.activate(1,function(e,t,n){return n.reset()}),_.last(this.components)},beforeRender:function(){var e;return this.$el.addClass(""+this.resource+"-manager"),(e=Luca.containers.CardView.prototype.beforeRender)!=null&&e.apply(this,arguments),this.$el.addClass(""+this.resource+" record-manager"),this.$el.data("resource",this.resource),$(this.getGrid().el).addClass(""+this.resource+" record-manager-grid"),$(this.getFilter().el).addClass(""+this.resource+" record-manager-filter"),$(this.getEditor().el).addClass(""+this.resource+" record-manager-editor")},afterRender:function(){var e,t,n,r,i,s,o=this;return(s=Luca.containers.CardView.prototype.afterRender)!=null&&s.apply(this,arguments),i=this,r=this.getGrid(),n=this.getFilter(),t=this.getEditor(),e=this.getCollection(),r.bind("row:double:click",function(e,n,r){return i.getEditor(!0),t.loadModel(n)}),t.bind("before:submit",function(){return $(".form-view-flash-container",o.el).html(""),$(".form-view-body",o.el).spin("large")}),t.bind("after:submit",function(){return $(".form-view-body",o.el).spin(!1)}),t.bind("after:submit:fatal_error",function(){return $(".form-view-flash-container",o.el).append("<li class='error'>There was an internal server error saving this record.  Please contact developers@benchprep.com to report this error.</li>"),$(".form-view-body",o.el).spin(!1)}),t.bind("after:submit:error",function(e,t,n){return _(n.errors).each(function(e){return $(".form-view-flash-container",o.el).append("<li class='error'>"+e+"</li>")})}),t.bind("after:submit:success",function(e,t,n){return $(".form-view-flash-container",o.el).append("<li class='success'>Successfully Saved Record</li>"),t.set(n.result),e.loadModel(t),r.refresh(),_.delay(function(){return $(".form-view-flash-container li.success",o.el).fadeOut(1e3),$(".form-view-flash-container",o.el).html("")},4e3)}),n.eachComponent(function(e){try{return e.bind("on:change",o.filter_handler)}catch(t){return void 0}})},firstActivation:function(){return this.getGrid().trigger("first:activation",this,this.getGrid()),this.getFilter().trigger("first:activation",this,this.getGrid())},reload:function(){var e,t,n,r;return r=this,n=this.getGrid(),t=this.getFilter(),e=this.getEditor(),t.clear(),n.applyFilter()},manageRecord:function(e){var t,n=this;return t=this.getCollection().get(e),t?this.loadModel(t):(console.log("Could Not Find Model, building and fetching"),t=this.buildModel(),t.set({id:e},{silent:!0}),t.fetch({success:function(e,t){return n.loadModel(e)}}))},loadModel:function(e){return this.current_model=e,this.getEditor(!0).loadModel(this.current_model),this.trigger("model:loaded",this.current_model)},currentModel:function(){return this.getEditor(!1).currentModel()},buildModel:function(){var e,t,n;return t=this.getEditor(!1),e=this.getCollection(),e.add([{}],{silent:!0,at:0}),n=e.at(0)},createModel:function(){return this.loadModel(this.buildModel())},reset_filter_handler:function(e){return this.getFilter().clear(),this.getGrid().applyFilter(this.getFilter().getValues())},filter_handler:function(e){return this.getGrid().applyFilter(this.getFilter().getValues())},edit_handler:function(e){var t,n,r,i;return t=r=$(e.currentTarget),i=r.parents("tr").data("record-id"),i&&(n=this.getGrid().collection.get(i)),n||(n=this.getGrid().collection.at(row_index))},add_handler:function(e){var t,n,r;return t=n=$(e.currentTarget),r=n.parents(".record-manager").eq(0).data("resource")},destroy_handler:function(e){},back_to_search_handler:function(){}})}.call(this),function(){var e;e=Luca.register("Luca.Router"),e["extends"]("Backbone.Router"),e.defines({routes:{"":"default"},initialize:function(e){var t,n=this;return this.options=e,_.extend(this,this.options),this.routeHandlers=_(this.routes).values(),_(this.routeHandlers).each(function(e){return n.bind("route:"+e,function(){return n.trigger.apply(n,["change:navigation",e].concat(_(arguments).flatten()))})}),(t=Backbone.Router.initialize)!=null?t.apply(this,arguments):void 0},navigate:function(e,t){return t==null&&(t=!1),Backbone.Router.prototype.navigate.apply(this,arguments),this.buildPathFrom(Backbone.history.getFragment())},buildPathFrom:function(e){var t=this;return _(this.routes).each(function(n,r){var i,s;s=t._routeToRegExp(r);if(s.test(e))return i=t._extractParameters(s,e),t.trigger.apply(t,["change:navigation",n].concat(i))})}})}.call(this),function(){}.call(this),Luca.VERSION="0.9.911",window.CodeMirror=function(){"use strict";function E(e,n){if(!(this instanceof E))return new E(e,n);this.options=n=n||{};for(var r in Sn)!n.hasOwnProperty(r)&&Sn.hasOwnProperty(r)&&(n[r]=Sn[r]);_(n);var i=this.display=S(e);i.wrapper.CodeMirror=this,A(this),n.autofocus&&!d&&St(this),this.view=x(new xr([new Sr([ur("",null,ht(i))])])),this.nextOpId=0,T(this),k(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),this.setValue(n.value||""),t&&setTimeout(ni(Et,this,!0),20),this.view.history=Mr(),Tt(this);var s;try{s=document.activeElement==i.input}catch(o){}s||n.autofocus&&!d?setTimeout(ni(Vt,this),20):$t(this),mt(this,function(){for(var e in En)En.propertyIsEnumerable(e)&&En[e](this,n[e],Tn);for(var t=0;t<Ln.length;++t)Ln[t](this)})()}function S(e){var t={},r=t.input=ui("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none;");i?r.style.width="1000px":r.setAttribute("wrap","off"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),t.inputDiv=ui("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),t.scrollbarH=ui("div",[ui("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),t.scrollbarV=ui("div",[ui("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),t.scrollbarFiller=ui("div",null,"CodeMirror-scrollbar-filler"),t.lineDiv=ui("div"),t.selectionDiv=ui("div",null,null,"position: relative; z-index: 1"),t.cursor=ui("div"," ","CodeMirror-cursor"),t.otherCursor=ui("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),t.measure=ui("div",null,"CodeMirror-measure"),t.lineSpace=ui("div",[t.measure,t.selectionDiv,t.lineDiv,t.cursor,t.otherCursor],null,"position: relative; outline: none"),t.mover=ui("div",[ui("div",[t.lineSpace],"CodeMirror-lines")],null,"position: relative"),t.sizer=ui("div",[t.mover],"CodeMirror-sizer"),t.heightForcer=ui("div"," ",null,"position: absolute; height: "+Vr+"px"),t.gutters=ui("div",null,"CodeMirror-gutters"),t.lineGutter=null;var s=ui("div",[t.sizer,t.heightForcer,t.gutters],null,"position: relative; min-height: 100%");return t.scroller=ui("div",[s],"CodeMirror-scroll"),t.scroller.setAttribute("tabIndex","-1"),t.wrapper=ui("div",[t.inputDiv,t.scrollbarH,t.scrollbarV,t.scrollbarFiller,t.scroller],"CodeMirror"),n&&(t.gutters.style.zIndex=-1,t.scroller.style.paddingRight=0),e.appendChild?e.appendChild(t.wrapper):e(t.wrapper),p&&(r.style.width="0px"),i||(t.scroller.draggable=!0),f?(t.inputDiv.style.height="1px",t.inputDiv.style.position="absolute"):n&&(t.scrollbarH.style.minWidth=t.scrollbarV.style.minWidth="18px"),t.viewOffset=t.showingFrom=t.showingTo=t.lastSizeC=0,t.lineNumWidth=t.lineNumInnerWidth=t.lineNumChars=null,t.prevInput="",t.alignWidgets=!1,t.pollingFast=!1,t.poll=new Jr,t.draggingText=!1,t.cachedCharWidth=t.cachedTextHeight=null,t.measureLineCache=[],t.measureLineCachePos=0,t.inaccurateSelection=!1,t.pasteIncoming=!1,t.wheelDX=t.wheelDY=t.wheelStartX=t.wheelStartY=null,t}function x(e){var t={line:0,ch:0};return{doc:e,frontier:0,highlight:new Jr,sel:{from:t,to:t,head:t,anchor:t,shift:!1,extend:!1},scrollTop:0,scrollLeft:0,overwrite:!1,focused:!1,maxLine:Tr(e,0),maxLineLength:0,maxLineChanged:!1,suppressEdits:!1,goalColumn:null,cantEdit:!1,keyMaps:[],overlays:[],modeGen:0}}function T(e){var t=e.view.doc;e.view.mode=E.getMode(e.options,e.options.mode),t.iter(0,t.size,function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.view.frontier=0,Q(e,100),e.view.modeGen++,e.curOp&&gt(e,0,t.size)}function N(e){var t=e.view.doc,n=ht(e.display);if(e.options.lineWrapping){e.display.wrapper.className+=" CodeMirror-wrap";var r=e.display.scroller.clientWidth/pt(e.display)-3;t.iter(0,t.size,function(e){if(e.height==0)return;var t=Math.ceil(e.text.length/r)||1;t!=1&&Nr(e,t*n)}),e.display.sizer.style.minWidth=""}else e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),M(e.view),t.iter(0,t.size,function(e){e.height!=0&&Nr(e,n)});gt(e,0,t.size),st(e),setTimeout(function(){D(e.display,e.view.doc.height)},100)}function C(e){var t=_n[e.options.keyMap].style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(t?" cm-keymap-"+t:"")}function k(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),st(e)}function L(e){A(e),I(e,!0)}function A(e){var t=e.display.gutters,n=e.options.gutters;ai(t);for(var r=0;r<n.length;++r){var i=n[r],s=t.appendChild(ui("div",null,"CodeMirror-gutter "+i));i=="CodeMirror-linenumbers"&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none"}function O(e,t){if(t.height==0)return 0;var n=t.text.length,r,i=t;while(r=$n(i)){var s=r.find();i=Tr(e,s.from.line),n+=s.from.ch-s.to.ch}i=t;while(r=Jn(i)){var s=r.find();n-=i.text.length-s.from.ch,i=Tr(e,s.to.line),n+=i.text.length-s.to.ch}return n}function M(e){e.maxLine=Tr(e.doc,0),e.maxLineLength=O(e.doc,e.maxLine),e.maxLineChanged=!0,e.doc.iter(1,e.doc.size,function(t){var n=O(e.doc,t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)})}function _(e){var t=!1;for(var n=0;n<e.gutters.length;++n)e.gutters[n]=="CodeMirror-linenumbers"&&(e.lineNumbers?t=!0:e.gutters.splice(n--,1));!t&&e.lineNumbers&&e.gutters.push("CodeMirror-linenumbers")}function D(e,t){var n=t+2*et(e);e.sizer.style.minHeight=e.heightForcer.style.top=n+"px";var r=Math.max(n,e.scroller.scrollHeight),i=e.scroller.scrollWidth>e.scroller.clientWidth,s=r>e.scroller.clientHeight;s?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=i?di(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=r-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):e.scrollbarV.style.display="",i?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=s?di(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):e.scrollbarH.style.display="",i&&s?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=di(e.measure)+"px"):e.scrollbarFiller.style.display="",l&&di(e.measure)===0&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=c?"18px":"12px")}function P(e,t,n){var r=e.scroller.scrollTop,i=e.wrapper.clientHeight;typeof n=="number"?r=n:n&&(r=n.top,i=n.bottom-n.top),r=Math.floor(r-et(e));var s=Math.ceil(r+i);return{from:Lr(t,r),to:Lr(t,s)}}function H(e){var t=e.display;if(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))return;var n=F(t)-t.scroller.scrollLeft+e.view.scrollLeft,r=t.gutters.offsetWidth,i=n+"px";for(var s=t.lineDiv.firstChild;s;s=s.nextSibling)if(s.alignable)for(var o=0,u=s.alignable;o<u.length;++o)u[o].style.left=i;e.options.fixedGutter&&(t.gutters.style.left=n+r+"px")}function B(e){if(!e.options.lineNumbers)return!1;var t=e.view.doc,n=j(e.options,t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(ui("div",[ui("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=i.firstChild.offsetWidth,o=i.offsetWidth-s;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(s,r.lineGutter.offsetWidth-o),r.lineNumWidth=r.lineNumInnerWidth+o,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",!0}return!1}function j(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function F(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function I(e,t,n){var r=e.display.showingFrom,i=e.display.showingTo,s=q(e,t,n);return s&&(Wr(e,e,"update",e),(e.display.showingFrom!=r||e.display.showingTo!=i)&&Wr(e,e,"viewportChange",e,e.display.showingFrom,e.display.showingTo)),V(e),D(e.display,e.view.doc.height),s}function q(e,t,r){var i=e.display,s=e.view.doc;if(!i.wrapper.clientWidth){i.showingFrom=i.showingTo=i.viewOffset=0;return}var o=P(i,s,r);if(t!==!0&&t.length==0&&o.from>i.showingFrom&&o.to<i.showingTo)return;t&&B(e)&&(t=!0);var u=i.sizer.style.marginLeft=i.gutters.offsetWidth+"px";i.scrollbarH.style.left=e.options.fixedGutter?u:"0";if(t!==!0&&w)for(var a=0;a<t.length;++a){var f=t[a],l;while(l=$n(Tr(s,f.from))){var c=l.find().from.line;f.diff&&(f.diff-=f.from-c),f.from=c}}var h=t===!0?0:Infinity;if(e.options.lineNumbers&&t&&t!==!0)for(var a=0;a<t.length;++a)if(t[a].diff){h=t[a].from;break}var c=Math.max(o.from-e.options.viewportMargin,0),p=Math.min(s.size,o.to+e.options.viewportMargin);i.showingFrom<c&&c-i.showingFrom<20&&(c=i.showingFrom),i.showingTo>p&&i.showingTo-p<20&&(p=Math.min(s.size,i.showingTo));if(w){c=Cr(Kn(s,Tr(s,c)));while(p<s.size&&Qn(Tr(s,p)))++p}var d=t===!0?[]:R([{from:i.showingFrom,to:i.showingTo}],t),v=0;for(var a=0;a<d.length;++a){var m=d[a];m.from<c&&(m.from=c),m.to>p&&(m.to=p),m.from>=m.to?d.splice(a--,1):v+=m.to-m.from}if(v==p-c&&c==i.showingFrom&&p==i.showingTo)return;d.sort(function(e,t){return e.from-t.from});var g=document.activeElement;v<(p-c)*.7&&(i.lineDiv.style.display="none"),z(e,c,p,d,h),i.lineDiv.style.display="",document.activeElement!=g&&g.offsetHeight&&g.focus();var y=c!=i.showingFrom||p!=i.showingTo||i.lastSizeC!=i.wrapper.clientHeight;y&&(i.lastSizeC=i.wrapper.clientHeight),i.showingFrom=c,i.showingTo=p,Q(e,100);var b=i.lineDiv.offsetTop;for(var E=i.lineDiv.firstChild,S;E;E=E.nextSibling)if(E.lineObj){if(n){var x=E.offsetTop+E.offsetHeight;S=x-b,b=x}else{var T=E.getBoundingClientRect();S=T.bottom-T.top}var N=E.lineObj.height-S;S<2&&(S=ht(i));if(N>.001||N<-0.001){Nr(E.lineObj,S);var C=E.lineObj.widgets;if(C)for(var a=0;a<C.length;++a)C[a].height=C[a].node.offsetHeight}}return i.viewOffset=Ar(e,Tr(s,c)),i.mover.style.top=i.viewOffset+"px",P(i,s,r).to>=p&&q(e,[],r),!0}function R(e,t){for(var n=0,r=t.length||0;n<r;++n){var i=t[n],s=[],o=i.diff||0;for(var u=0,a=e.length;u<a;++u){var f=e[u];i.to<=f.from&&i.diff?s.push({from:f.from+o,to:f.to+o}):i.to<=f.from||i.from>=f.to?s.push(f):(i.from>f.from&&s.push({from:f.from,to:i.from}),i.to<f.to&&s.push({from:i.to+o,to:f.to+o}))}e=s}return e}function U(e){var t=e.display,n={},r={};for(var i=t.gutters.firstChild,s=0;i;i=i.nextSibling,++s)n[e.options.gutters[s]]=i.offsetLeft,r[e.options.gutters[s]]=i.offsetWidth;return{fixedPos:F(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function z(e,t,n,r,s){function c(t){var n=t.nextSibling;return i&&v&&e.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),n}var o=U(e),u=e.display,a=e.options.lineNumbers;!r.length&&(!i||!e.display.currentWheelTarget)&&ai(u.lineDiv);var f=u.lineDiv,l=f.firstChild,h=r.shift(),p=t;e.view.doc.iter(t,n,function(t){h&&h.to==p&&(h=r.shift());if(Qn(t)){t.height!=0&&Nr(t,0);if(t.widgets&&l.previousSibling)for(var n=0;n<t.widgets.length;++n)if(t.widgets[n].showIfHidden){var i=l.previousSibling;if(i.nodeType=="pre"){var u=ui("div",null,null,"position: relative");i.parentNode.replaceChild(u,i),u.appendChild(i),i=u}i.appendChild(X(t.widgets[n],i,o))}}else if(h&&h.from<=p&&h.to>p){while(l.lineObj!=t)l=c(l);a&&s<=p&&l.lineNumber&&li(l.lineNumber,j(e.options,p)),l=l.nextSibling}else{var d=W(e,t,p,o);f.insertBefore(d,l),d.lineObj=t}++p});while(l)l=c(l)}function W(e,t,r,i){var s=mr(e,t),o=t.gutterMarkers,u=e.display;if(!e.options.lineNumbers&&!o&&!t.bgClass&&!t.wrapClass&&(!t.widgets||!t.widgets.length))return s;var a=ui("div",null,t.wrapClass,"position: relative");if(e.options.lineNumbers||o){var f=a.appendChild(ui("div",null,null,"position: absolute; left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"));e.options.fixedGutter&&(a.alignable=[f]),e.options.lineNumbers&&(!o||!o["CodeMirror-linenumbers"])&&(a.lineNumber=f.appendChild(ui("div",j(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+u.lineNumInnerWidth+"px")));if(o)for(var l=0;l<e.options.gutters.length;++l){var c=e.options.gutters[l],h=o.hasOwnProperty(c)&&o[c];h&&f.appendChild(ui("div",[h],"CodeMirror-gutter-elt","left: "+i.gutterLeft[c]+"px; width: "+i.gutterWidth[c]+"px"))}}t.bgClass&&a.appendChild(ui("div"," ",t.bgClass+" CodeMirror-linebackground")),a.appendChild(s);if(t.widgets)for(var p=0,d=t.widgets;p<d.length;++p){var v=d[p],m=X(v,a,i);v.above?a.insertBefore(m,e.options.lineNumbers&&t.height!=0?f:s):a.appendChild(m)}return n&&(a.style.zIndex=2),a}function X(e,t,n){var r=ui("div",[e.node],"CodeMirror-linewidget");r.widget=e;if(e.noHScroll){(t.alignable||(t.alignable=[])).push(r);var i=n.wrapperWidth;r.style.left=n.fixedPos+"px",e.coverGutter||(i-=n.gutterTotalWidth,r.style.paddingLeft=n.gutterTotalWidth+"px"),r.style.width=i+"px"}return e.coverGutter&&(r.style.zIndex=5,r.style.position="relative",e.noHScroll||(r.style.marginLeft=-n.gutterTotalWidth+"px")),r}function V(e){var t=e.display,n=tn(e.view.sel.from,e.view.sel.to);n||e.options.showCursorWhenSelecting?$(e):t.cursor.style.display=t.otherCursor.style.display="none",n?t.selectionDiv.style.display="none":J(e);var r=at(e,e.view.sel.head,"div"),i=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+s.top-i.top))+"px",t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+s.left-i.left))+"px"}function $(e){var t=e.display,n=at(e,e.view.sel.head,"div");t.cursor.style.left=n.left+"px",t.cursor.style.top=n.top+"px",t.cursor.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",t.cursor.style.display="",n.other?(t.otherCursor.style.display="",t.otherCursor.style.left=n.other.left+"px",t.otherCursor.style.top=n.other.top+"px",t.otherCursor.style.height=(n.other.bottom-n.other.top)*.85+"px"):t.otherCursor.style.display="none"}function J(e){function u(e,t,n,r){t<0&&(t=0),i.appendChild(ui("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(n==null?s-e:n)+"px; height: "+(r-t)+"px"))}function a(t,r,i,a){function h(n){return ut(e,{line:t,ch:n},"div",f)}var f=Tr(n,t),l=f.text.length,c=a?Infinity:-Infinity;return Ei(Or(f),r||0,i==null?l:i,function(e,t,n){var f=h(n=="rtl"?t-1:e),p=h(n=="rtl"?e:t-1),d=f.left,v=p.right;p.top-f.top>3&&(u(d,f.top,null,f.bottom),d=o,f.bottom<p.top&&u(d,f.bottom,null,p.top)),i==null&&t==l&&(v=s),r==null&&e==0&&(d=o),c=a?Math.min(p.top,c):Math.max(p.bottom,c),d<o+1&&(d=o),u(d,p.top,v-d,p.bottom)}),c}var t=e.display,n=e.view.doc,r=e.view.sel,i=document.createDocumentFragment(),s=t.lineSpace.offsetWidth,o=tt(e.display);if(r.from.line==r.to.line)a(r.from.line,r.from.ch,r.to.ch);else{var f=Tr(n,r.from.line),l=f,c,h=[r.from.line,r.from.ch],p;while(c=Jn(l)){var d=c.find();h.push(d.from.ch,d.to.line,d.to.ch);if(d.to.line==r.to.line){h.push(r.to.ch),p=!0;break}l=Tr(n,d.to.line)}if(p)for(var v=0;v<h.length;v+=3)a(h[v],h[v+1],h[v+2]);else{var m,g,y=Tr(n,r.to.line);r.from.ch?m=a(r.from.line,r.from.ch,null,!1):m=Ar(e,f)-t.viewOffset,r.to.ch?g=a(r.to.line,$n(y)?null:0,r.to.ch,!0):g=Ar(e,y)-t.viewOffset,m<g&&u(o,m,null,g)}}fi(t.selectionDiv,i),t.selectionDiv.style.display=""}function K(e){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",t.blinker=setInterval(function(){if(!t.cursor.offsetHeight)return;t.cursor.style.visibility=t.otherCursor.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate)}function Q(e,t){e.view.mode.startState&&e.view.frontier<e.display.showingTo&&e.view.highlight.set(t,ni(G,e))}function G(e){var t=e.view,n=t.doc;if(t.frontier>=e.display.showingTo)return;var r=+(new Date)+e.options.workTime,i=An(t.mode,Z(e,t.frontier)),s=[],o;n.iter(t.frontier,Math.min(n.size,e.display.showingTo+500),function(n){if(t.frontier>=e.display.showingFrom){var u=n.styles;n.styles=cr(e,n,i);var a=!u||u.length!=n.styles.length;for(var f=0;!a&&f<u.length;++f)a=u[f]!=n.styles[f];a&&(o&&o.end==t.frontier?o.end++:s.push(o={start:t.frontier,end:t.frontier+1})),n.stateAfter=An(t.mode,i)}else pr(e,n,i),n.stateAfter=t.frontier%5==0?An(t.mode,i):null;++t.frontier;if(+(new Date)>r)return Q(e,e.options.workDelay),!0}),s.length&&mt(e,function(){for(var e=0;e<s.length;++e)gt(this,s[e].start,s[e].end)})()}function Y(e,t){var n,r,i=e.view.doc;for(var s=t,o=t-100;s>o;--s){if(s==0)return 0;var u=Tr(i,s-1);if(u.stateAfter)return s;var a=Kr(u.text,null,e.options.tabSize);if(r==null||n>a)r=s-1,n=a}return r}function Z(e,t){var n=e.view;if(!n.mode.startState)return!0;var r=Y(e,t),i=r&&Tr(n.doc,r-1).stateAfter;return i?i=An(n.mode,i):i=On(n.mode),n.doc.iter(r,t,function(s){pr(e,s,i);var o=r==t-1||r%5==0||r>=n.showingFrom&&r<n.showingTo;s.stateAfter=o?An(n.mode,i):null,++r}),i}function et(e){return e.lineSpace.offsetTop}function tt(e){var t=fi(e.measure,ui("pre")).appendChild(ui("span","x"));return t.offsetLeft}function nt(e,t,n,r){var i=-1;r=r||rt(e,t);for(var s=n;;s+=i){var o=r[s];if(o)break;i<0&&s==0&&(i=1)}return{left:s<n?o.right:o.left,right:s>n?o.left:o.right,top:o.top,bottom:o.bottom}}function rt(e,t){var n=e.display,r=e.display.measureLineCache;for(var i=0;i<r.length;++i){var s=r[i];if(s.text==t.text&&s.markedSpans==t.markedSpans&&n.scroller.clientWidth==s.width)return s.measure}var o=it(e,t),s={text:t.text,width:n.scroller.clientWidth,markedSpans:t.markedSpans,measure:o};return r.length==16?r[++n.measureLineCachePos%16]=s:r.push(s),o}function it(e,r){var i=e.display,s=ti(r.text.length),o=mr(e,r,s);if(t&&!n&&!e.options.lineWrapping&&o.childNodes.length>100){var u=document.createDocumentFragment(),a=10,f=o.childNodes.length;for(var l=0,c=Math.ceil(f/a);l<c;++l){var h=ui("div",null,null,"display: inline-block");for(var p=0;p<a&&f;++p)h.appendChild(o.firstChild),--f;u.appendChild(h)}o.appendChild(u)}fi(i.measure,o);var d=i.lineDiv.getBoundingClientRect(),v=[],m=ti(r.text.length),g=o.offsetHeight;for(var l=0,y;l<s.length;++l)if(y=s[l]){var b=y.getBoundingClientRect(),w=Math.max(0,b.top-d.top),E=Math.min(b.bottom-d.top,g);for(var p=0;p<v.length;p+=2){var S=v[p],x=v[p+1];if(S>E||x<w)continue;if(S<=w&&x>=E||w<=S&&E>=x||Math.min(E,x)-Math.max(w,S)>=E-w>>1){v[p]=Math.min(w,S),v[p+1]=Math.max(E,x);break}}p==v.length&&v.push(w,E),m[l]={left:b.left-d.left,right:b.right-d.left,top:p}}for(var l=0,y;l<m.length;++l)if(y=m[l]){var T=y.top;y.top=v[T],y.bottom=v[T+1]}return m}function st(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.view.maxLineChanged=!0}function ot(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var s=sr(t.widgets[i]);n.top+=s,n.bottom+=s}if(r=="line")return n;r||(r="local");var o=Ar(e,t);r!="local"&&(o-=e.display.viewOffset);if(r=="page"){var u=e.display.lineSpace.getBoundingClientRect();o+=u.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var a=u.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);n.left+=a,n.right+=a}return n.top+=o,n.bottom+=o,n}function ut(e,t,n,r){return r||(r=Tr(e.view.doc,t.line)),ot(e,r,nt(e,r,t.ch),n)}function at(e,t,n,r,i){function s(t,s){var o=nt(e,r,t,i);return s?o.left=o.right:o.right=o.left,ot(e,r,o,n)}r=r||Tr(e.view.doc,t.line),i||(i=rt(e,r));var o=Or(r),u=t.ch;if(!o)return s(u);var a,f,l=o[0].level;for(var c=0;c<o.length;++c){var h=o[c],p=h.level%2,d,v;if(h.from<u&&h.to>u)return s(u,p);var m=p?h.to:h.from,g=p?h.from:h.to;if(m==u)c&&h.level<(d=o[c-1]).level?v=s(d.level%2?d.from:d.to-1,!0):v=s(p&&h.from!=h.to?u-1:u),p==l?a=v:f=v;else if(g==u){var d=c<o.length-1&&o[c+1];if(!p&&d&&d.from==d.to)continue;d&&h.level<d.level?v=s(d.level%2?d.to-1:d.from):v=s(p?u:u-1,!0),p==l?a=v:f=v}}return l&&!u&&(f=s(o[0].to-1)),a?(f&&(a.other=f),a):f}function ft(e,t,n){var r=e.view.doc;n+=e.display.viewOffset;if(n<0)return{line:0,ch:0,outside:!0};var i=Lr(r,n);if(i>=r.size)return{line:r.size-1,ch:Tr(r,r.size-1).text.length};t<0&&(t=0);for(;;){var s=Tr(r,i),o=lt(e,s,i,t,n),u=Jn(s),a=u&&u.find();if(!(u&&o.ch>=a.from.ch))return o;i=a.to.line}}function lt(e,t,n,r,i){function f(r){var i=at(e,{line:n,ch:r},"line",t,a);return o=!0,s>i.bottom?Math.max(0,i.left-u):s<i.top?i.left+u:(o=!1,i.left)}var s=i-Ar(e,t),o=!1,u=e.display.wrapper.clientWidth,a=rt(e,t),l=Or(t),c=t.text.length,h=Ti(t),p=Ni(t),d=tt(e.display),v=f(p);if(r>v)return{line:n,ch:p,outside:o};for(;;){if(l?p==h||p==Li(t,h,1):p-h<=1){var m=r-d<v-r,g=m?h:p;while(oi.test(t.text.charAt(g)))++g;return{line:n,ch:g,after:m,outside:o}}var y=Math.ceil(c/2),b=h+y;if(l){b=h;for(var w=0;w<y;++w)b=Li(t,b,1)}var E=f(b);E>r?(p=b,v=E,o&&(v+=1e3),c-=y):(h=b,d=E,c=y)}}function ht(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(ct==null){ct=ui("pre");for(var t=0;t<49;++t)ct.appendChild(document.createTextNode("x")),ct.appendChild(ui("br"));ct.appendChild(document.createTextNode("x"))}fi(e.measure,ct);var n=ct.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),ai(e.measure),n||1}function pt(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=ui("span","x"),n=ui("pre",[t]);fi(e.measure,n);var r=t.offsetWidth;return r>2&&(e.cachedCharWidth=r),r||10}function dt(e){e.curOp?++e.curOp.depth:e.curOp={depth:1,changes:[],delayedCallbacks:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,updateMaxLine:!1,id:++e.nextOpId}}function vt(e){var t=e.curOp;if(--t.depth)return;e.curOp=null;var n=e.view,r=e.display;t.updateMaxLine&&M(n);if(n.maxLineChanged&&!e.options.lineWrapping){var i=nt(e,n.maxLine,n.maxLine.text.length).right;r.sizer.style.minWidth=i+3+Vr+"px",n.maxLineChanged=!1;var s=Math.max(0,r.sizer.offsetLeft+r.sizer.offsetWidth-r.scroller.clientWidth);s<n.scrollLeft&&Pt(e,Math.min(r.scroller.scrollLeft,s),!0)}var o,u;if(t.selectionChanged){var a=at(e,n.sel.head);o=vn(e,a.left,a.top,a.left,a.bottom)}if(t.changes.length||o&&o.scrollTop!=null)u=I(e,t.changes,o&&o.scrollTop);!u&&t.selectionChanged&&V(e),o&&hn(e),t.selectionChanged&&K(e),n.focused&&t.updateInput&&Et(e,t.userSelChange),t.textChanged&&zr(e,"change",e,t.textChanged),t.selectionChanged&&zr(e,"cursorActivity",e);for(var f=0;f<t.delayedCallbacks.length;++f)t.delayedCallbacks[f](e)}function mt(e,t){return function(){var n=e||this;dt(n);try{var r=t.apply(n,arguments)}finally{vt(n)}return r}}function gt(e,t,n,r){e.curOp.changes.push({from:t,to:n,diff:r})}function yt(e){if(e.view.pollingFast)return;e.display.poll.set(e
.options.pollInterval,function(){wt(e),e.view.focused&&yt(e)})}function bt(e){function n(){var r=wt(e);!r&&!t?(t=!0,e.display.poll.set(60,n)):(e.display.pollingFast=!1,yt(e))}var t=!1;e.display.pollingFast=!0,e.display.poll.set(20,n)}function wt(e){var t=e.display.input,n=e.display.prevInput,r=e.view,i=r.sel;if(!r.focused||yi(t)||xt(e))return!1;var s=t.value;if(s==n&&tn(i.from,i.to))return!1;dt(e),r.sel.shift=!1;var o=0,u=Math.min(n.length,s.length);while(o<u&&n[o]==s[o])++o;var a=i.from,f=i.to;o<n.length?a={line:a.line,ch:a.ch-(n.length-o)}:r.overwrite&&tn(a,f)&&!e.display.pasteIncoming&&(f={line:f.line,ch:Math.min(Tr(e.view.doc,f.line).text.length,f.ch+(s.length-o))});var l=e.curOp.updateInput;return Qt(e,a,f,gi(s.slice(o)),"end",e.display.pasteIncoming?"paste":"input",{from:a,to:f}),e.curOp.updateInput=l,s.length>1e3?t.value=e.display.prevInput="":e.display.prevInput=s,vt(e),e.display.pasteIncoming=!1,!0}function Et(e,t){var n=e.view,r,i;tn(n.sel.from,n.sel.to)?t&&(e.display.prevInput=e.display.input.value=""):(e.display.prevInput="",r=bi&&(n.sel.to.line-n.sel.from.line>100||(i=e.getSelection()).length>1e3),r?e.display.input.value="-":e.display.input.value=i||e.getSelection(),n.focused&&Zr(e.display.input)),e.display.inaccurateSelection=r}function St(e){e.options.readOnly!="nocursor"&&(t||document.activeElement!=e.display.input)&&e.display.input.focus()}function xt(e){return e.options.readOnly||e.view.cantEdit}function Tt(t){function r(){t.view.focused&&setTimeout(ni(St,t),0)}function i(){n.cachedCharWidth=n.cachedTextHeight=null,st(t),I(t,!0)}function s(e){if(t.options.onDragEvent&&t.options.onDragEvent(t,Pr(e)))return;jr(e)}function o(){n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,n.input.value=t.getSelection(),Zr(n.input))}var n=t.display;Rr(n.scroller,"mousedown",mt(t,At)),Rr(n.scroller,"dblclick",mt(t,Hr)),Rr(n.lineSpace,"selectstart",function(e){Nt(n,e)||Hr(e)}),e||Rr(n.scroller,"contextmenu",function(e){Kt(t,e)}),Rr(n.scroller,"scroll",function(){Dt(t,n.scroller.scrollTop),Pt(t,n.scroller.scrollLeft,!0),zr(t,"scroll",t)}),Rr(n.scrollbarV,"scroll",function(){Dt(t,n.scrollbarV.scrollTop)}),Rr(n.scrollbarH,"scroll",function(){Pt(t,n.scrollbarH.scrollLeft)}),Rr(n.scroller,"mousewheel",function(e){jt(t,e)}),Rr(n.scroller,"DOMMouseScroll",function(e){jt(t,e)}),Rr(n.scrollbarH,"mousedown",r),Rr(n.scrollbarV,"mousedown",r),Rr(n.wrapper,"scroll",function(){n.wrapper.scrollTop=n.wrapper.scrollLeft=0}),window.registered||(window.registered=0),++window.registered,Rr(window,"resize",i),setTimeout(function u(){for(var e=n.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(u,5e3):(--window.registered,Ur(window,"resize",i))},5e3),Rr(n.input,"keyup",mt(t,function(e){if(t.options.onKeyEvent&&t.options.onKeyEvent(t,Pr(e)))return;qr(e,"keyCode")==16&&(t.view.sel.shift=!1)})),Rr(n.input,"input",ni(bt,t)),Rr(n.input,"keydown",mt(t,Wt)),Rr(n.input,"keypress",mt(t,Xt)),Rr(n.input,"focus",ni(Vt,t)),Rr(n.input,"blur",ni($t,t)),t.options.dragDrop&&(Rr(n.scroller,"dragstart",function(e){_t(t,e)}),Rr(n.scroller,"dragenter",s),Rr(n.scroller,"dragover",s),Rr(n.scroller,"drop",mt(t,Ot))),Rr(n.scroller,"paste",function(e){if(Nt(n,e))return;St(t),bt(t)}),Rr(n.input,"paste",function(){n.pasteIncoming=!0,bt(t)}),Rr(n.input,"cut",o),Rr(n.input,"copy",o),f&&Rr(n.sizer,"mouseup",function(){document.activeElement==n.input&&n.input.blur(),St(t)})}function Nt(e,t){for(var n=Fr(t);n!=e.wrapper;n=n.parentNode){if(!n)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(n.className)||n.parentNode==e.sizer&&n!=e.mover)return!0}}function Ct(e,t,n){var r=e.display;if(!n){var i=Fr(t);if(i==r.scrollbarH||i==r.scrollbarH.firstChild||i==r.scrollbarV||i==r.scrollbarV.firstChild||i==r.scrollbarFiller)return null}var s,o,u=r.lineSpace.getBoundingClientRect();try{s=t.clientX,o=t.clientY}catch(t){return null}return ft(e,s-u.left,o-u.top)}function At(n){function g(e){if(c=="single"){an(r,on(a,f),e);return}v=on(a,v),m=on(a,m);if(c=="double"){var t=bn(Tr(a,e.line).text,e);nn(e,v)?an(r,t.from,m):an(r,v,t.to)}else c=="triple"&&(nn(e,v)?an(r,m,on(a,{line:e.line,ch:0})):an(r,v,on(a,{line:e.line+1,ch:0})))}function w(e){var t=++b,n=Ct(r,e,!0);if(!n)return;if(!tn(n,p)){o.focused||Vt(r),p=n,g(n);var i=P(s,a);(n.line>=i.to||n.line<i.from)&&setTimeout(mt(r,function(){b==t&&w(e)}),150)}else{var u=e.clientY<y.top?-20:e.clientY>y.bottom?20:0;u&&setTimeout(mt(r,function(){if(b!=t)return;s.scroller.scrollTop+=u,w(e)}),50)}}function E(e){b=Infinity;var t=Ct(r,e);t&&g(t),Hr(e),St(r),Ur(document,"mousemove",S),Ur(document,"mouseup",x)}var r=this,s=r.display,o=r.view,u=o.sel,a=o.doc;u.shift=qr(n,"shiftKey");if(Nt(s,n)){i||(s.scroller.draggable=!1,setTimeout(function(){s.scroller.draggable=!0},100));return}if(Mt(r,n))return;var f=Ct(r,n);switch(Ir(n)){case 3:e&&Kt.call(r,r,n);return;case 2:f&&an(r,f),setTimeout(ni(St,r),20),Hr(n);return}if(!f){Fr(n)==s.scroller&&Hr(n);return}o.focused||Vt(r);var l=+(new Date),c="single";if(Lt&&Lt.time>l-400&&tn(Lt.pos,f))c="triple",Hr(n),setTimeout(ni(St,r),20),wn(r,f.line);else if(kt&&kt.time>l-400&&tn(kt.pos,f)){c="double",Lt={time:l,pos:f},Hr(n);var h=bn(Tr(a,f.line).text,f);an(r,h.from,h.to)}else kt={time:l,pos:f};var p=f;if(r.options.dragDrop&&ci&&!xt(r)&&!tn(u.from,u.to)&&!nn(f,u.from)&&!nn(u.to,f)&&c=="single"){var d=mt(r,function(e){i&&(s.scroller.draggable=!1),o.draggingText=!1,Ur(document,"mouseup",d),Ur(s.scroller,"drop",d),Math.abs(n.clientX-e.clientX)+Math.abs(n.clientY-e.clientY)<10&&(Hr(e),an(r,f),St(r))});i&&(s.scroller.draggable=!0),o.draggingText=d,s.scroller.dragDrop&&s.scroller.dragDrop(),Rr(document,"mouseup",d),Rr(s.scroller,"drop",d);return}Hr(n),c=="single"&&an(r,on(a,f));var v=u.from,m=u.to,y=s.wrapper.getBoundingClientRect(),b=0,S=mt(r,function(e){!t&&!Ir(e)?E(e):w(e)}),x=mt(r,E);Rr(document,"mousemove",S),Rr(document,"mouseup",x)}function Ot(e){var t=this;if(Nt(t.display,e)||t.options.onDragEvent&&t.options.onDragEvent(t,Pr(e)))return;Hr(e);var n=Ct(t,e,!0),r=e.dataTransfer.files;if(!n||xt(t))return;if(r&&r.length&&window.FileReader&&window.File){var i=r.length,s=Array(i),o=0,u=function(e,r){var u=new FileReader;u.onload=function(){s[r]=u.result,++o==i&&(n=on(t.view.doc,n),mt(t,function(){var e=en(t,s.join(""),n,n,"paste");fn(t,n,e)})())},u.readAsText(e)};for(var a=0;a<i;++a)u(r[a],a)}else{if(t.view.draggingText&&!nn(n,t.view.sel.from)&&!nn(t.view.sel.to,n)){t.view.draggingText(e),setTimeout(ni(St,t),20);return}try{var s=e.dataTransfer.getData("Text");if(s){var f=t.view.sel.from,l=t.view.sel.to;fn(t,n,n),t.view.draggingText&&en(t,"",f,l,"paste"),t.replaceSelection(s,null,"paste"),St(t),Vt(t)}}catch(e){}}}function Mt(e,t){var n=e.display;try{var r=t.clientX,i=t.clientY}catch(t){return!1}if(r>=Math.floor(n.gutters.getBoundingClientRect().right))return!1;Hr(t);if(!Xr(e,"gutterClick"))return!0;var s=n.lineDiv.getBoundingClientRect();if(i>s.bottom)return!0;i-=s.top-n.viewOffset;for(var o=0;o<e.options.gutters.length;++o){var u=n.gutters.childNodes[o];if(u&&u.getBoundingClientRect().right>=r){var a=Lr(e.view.doc,i),f=e.options.gutters[o];Wr(e,e,"gutterClick",e,a,f,t);break}}return!0}function _t(e,t){if(Nt(e.display,t))return;var n=e.getSelection();t.dataTransfer.setData("Text",n);if(t.dataTransfer.setDragImage&&!a){var r=ui("img",null,null,"position: fixed; left: 0; top: 0;");u&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),u&&r.parentNode.removeChild(r)}}function Dt(t,n){if(Math.abs(t.view.scrollTop-n)<2)return;t.view.scrollTop=n,e||I(t,[],n),t.display.scroller.scrollTop!=n&&(t.display.scroller.scrollTop=n),t.display.scrollbarV.scrollTop!=n&&(t.display.scrollbarV.scrollTop=n),e&&I(t,[])}function Pt(e,t,n){if(n?t==e.view.scrollLeft:Math.abs(e.view.scrollLeft-t)<2)return;t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.view.scrollLeft=t,H(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t)}function jt(t,n){var r=n.wheelDeltaX,s=n.wheelDeltaY;r==null&&n.detail&&n.axis==n.HORIZONTAL_AXIS&&(r=n.detail),s==null&&n.detail&&n.axis==n.VERTICAL_AXIS?s=n.detail:s==null&&(s=n.wheelDelta);if(s&&v&&i)for(var o=n.target;o!=f;o=o.parentNode)if(o.lineObj){t.display.currentWheelTarget=o;break}var a=t.display,f=a.scroller;if(r&&!e&&!u&&Bt!=null){s&&Dt(t,Math.max(0,Math.min(f.scrollTop+s*Bt,f.scrollHeight-f.clientHeight))),Pt(t,Math.max(0,Math.min(f.scrollLeft+r*Bt,f.scrollWidth-f.clientWidth))),Hr(n),a.wheelStartX=null;return}if(s&&Bt!=null){var l=s*Bt,c=t.view.scrollTop,h=c+a.wrapper.clientHeight;l<0?c=Math.max(0,c+l-50):h=Math.min(t.view.doc.height,h+l+50),I(t,[],{top:c,bottom:h})}Ht<20&&(a.wheelStartX==null?(a.wheelStartX=f.scrollLeft,a.wheelStartY=f.scrollTop,a.wheelDX=r,a.wheelDY=s,setTimeout(function(){if(a.wheelStartX==null)return;var e=f.scrollLeft-a.wheelStartX,t=f.scrollTop-a.wheelStartY,n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null;if(!n)return;Bt=(Bt*Ht+n)/(Ht+1),++Ht},200)):(a.wheelDX+=r,a.wheelDY+=s))}function Ft(e,t,n){if(typeof t=="string"){t=Mn[t];if(!t)return!1}e.display.pollingFast&&wt(e)&&(e.display.pollingFast=!1);var r=e.view,i=r.sel.shift;try{xt(e)&&(r.suppressEdits=!0),n&&(r.sel.shift=!1),t(e)}catch(s){if(s!=$r)throw s;return!1}finally{r.sel.shift=i,r.suppressEdits=!1}return!0}function It(e){var t=e.view.keyMaps.slice(0);return t.push(e.options.keyMap),e.options.extraKeys&&t.unshift(e.options.extraKeys),t}function Rt(e,t){function a(){u=!0}var n=Dn(e.options.keyMap),i=n.auto;clearTimeout(qt),i&&!Hn(t)&&(qt=setTimeout(function(){Dn(e.options.keyMap)==n&&(e.options.keyMap=i.call?i.call(null,e):i)},50));var s=wi[qr(t,"keyCode")],o=!1;if(s==null||t.altGraphKey)return!1;qr(t,"altKey")&&(s="Alt-"+s),qr(t,y?"metaKey":"ctrlKey")&&(s="Ctrl-"+s),qr(t,y?"ctrlKey":"metaKey")&&(s="Cmd-"+s);var u=!1,f=It(e);return qr(t,"shiftKey")?o=Pn("Shift-"+s,f,function(t){return Ft(e,t,!0)},a)||Pn(s,f,function(t){if(typeof t=="string"&&/^go[A-Z]/.test(t))return Ft(e,t)},a):o=Pn(s,f,function(t){return Ft(e,t)},a),u&&(o=!1),o&&(Hr(t),K(e),r&&(t.oldKeyCode=t.keyCode,t.keyCode=0)),o}function Ut(e,t,n){var r=Pn("'"+n+"'",It(e),function(t){return Ft(e,t,!0)});return r&&(Hr(t),K(e)),r}function Wt(e){var n=this;n.view.focused||Vt(n),t&&e.keyCode==27&&(e.returnValue=!1);if(n.options.onKeyEvent&&n.options.onKeyEvent(n,Pr(e)))return;var r=qr(e,"keyCode");n.view.sel.shift=r==16||qr(e,"shiftKey");var i=Rt(n,e);u&&(zt=i?r:null,!i&&r==88&&!bi&&qr(e,v?"metaKey":"ctrlKey")&&n.replaceSelection(""))}function Xt(e){var t=this;if(t.options.onKeyEvent&&t.options.onKeyEvent(t,Pr(e)))return;var n=qr(e,"keyCode"),r=qr(e,"charCode");if(u&&n==zt){zt=null,Hr(e);return}if((u&&(!e.which||e.which<10)||f)&&Rt(t,e))return;var i=String.fromCharCode(r==null?n:r);this.options.electricChars&&this.view.mode.electricChars&&this.options.smartIndent&&!xt(this)&&this.view.mode.electricChars.indexOf(i)>-1&&setTimeout(mt(t,function(){mn(t,t.view.sel.to.line,"smart")}),75);if(Ut(t,e,i))return;bt(t)}function Vt(e){if(e.options.readOnly=="nocursor")return;e.view.focused||(zr(e,"focus",e),e.view.focused=!0,e.display.scroller.className.search(/\bCodeMirror-focused\b/)==-1&&(e.display.scroller.className+=" CodeMirror-focused"),Et(e,!0)),yt(e),K(e)}function $t(e){e.view.focused&&(zr(e,"blur",e),e.view.focused=!1,e.display.scroller.className=e.display.scroller.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.view.focused||(e.view.sel.shift=!1)},150)}function Kt(t,n){function l(){i.inputDiv.style.position="relative",i.input.style.cssText=f,r&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=a),yt(t);if(i.input.selectionStart!=null){clearTimeout(Jt);var e=i.input.value=" "+(tn(s.from,s.to)?"":i.input.value),n=0;i.prevInput=" ",i.input.selectionStart=1,i.input.selectionEnd=e.length,Jt=setTimeout(function o(){i.prevInput==" "&&i.input.selectionStart==0?mt(t,Mn.selectAll)(t):n++<10?Jt=setTimeout(o,500):Et(t)},200)}}var i=t.display;if(Nt(i,n))return;var s=t.view.sel,o=Ct(t,n),a=i.scroller.scrollTop;if(!o||u)return;(tn(s.from,s.to)||nn(o,s.from)||!nn(o,s.to))&&mt(t,fn)(t,o,o);var f=i.input.style.cssText;i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(n.clientY-5)+"px; left: "+(n.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",St(t),Et(t,!0),tn(s.from,s.to)&&(i.input.value=i.prevInput=" "),e?(jr(n),Rr(window,"mouseup",function c(){Ur(window,"mouseup",c),setTimeout(l,20)})):setTimeout(l,50)}function Qt(e,t,n,r,i,s){var o=b&&Xn(e.view.doc,t,n);if(!o)return Gt(e,t,n,r,i,s);for(var u=o.length-1;u>=1;--u)Gt(e,o[u].from,o[u].to,[""],s);if(o.length)return Gt(e,o[0].from,o[0].to,r,i,s)}function Gt(e,t,n,r,i,s){if(e.view.suppressEdits)return;var o=e.view,u=o.doc,a=[];u.iter(t.line,n.line+1,function(e){a.push(er(e.text,e.markedSpans))});var f=o.sel.from,l=o.sel.to,c=Wn(Zn(a[0]),Zn(Yr(a)),t.ch,n.ch,r),h=Zt(e,t,n,c,i,s);return o.history&&_r(e,t.line,r.length,a,s,f,l,o.sel.from,o.sel.to),h}function Yt(e,t){var n=e.view.doc,r=e.view.history,i=(t=="undo"?r.done:r.undone).pop();if(!i)return;var s={events:[],fromBefore:i.fromAfter,toBefore:i.toAfter,fromAfter:i.fromBefore,toAfter:i.toBefore};for(var o=i.events.length-1;o>=0;o-=1){r.dirtyCounter+=t=="undo"?-1:1;var u=i.events[o],a=[],f=u.start+u.added;n.iter(u.start,f,function(e){a.push(er(e.text,e.markedSpans))}),s.events.push({start:u.start,added:u.old.length,old:a});var l=o?null:{from:i.fromBefore,to:i.toBefore};Zt(e,{line:u.start,ch:0},{line:f-1,ch:Tr(n,f-1).text.length},u.old,l,t)}(t=="undo"?r.undone:r.done).push(s)}function Zt(e,t,n,r,i,s){var o=e.view,u=o.doc,a=e.display;if(o.suppressEdits)return;var f=n.line-t.line,l=Tr(u,t.line),c=Tr(u,n.line),h=!1,p=t.line;e.options.lineWrapping||(p=Cr(Kn(u,l)),u.iter(p,n.line+1,function(e){if(e==o.maxLine)return h=!0,!0}));var d=Yr(r),v=ht(a);if(t.ch==0&&n.ch==0&&Yn(d)==""){var m=[];for(var g=0,y=r.length-1;g<y;++g)m.push(ur(Yn(r[g]),Zn(r[g]),v));ar(e,c,c.text,Zn(d)),f&&u.remove(t.line,f,e),m.length&&u.insert(t.line,m)}else if(l==c)if(r.length==1)ar(e,l,l.text.slice(0,t.ch)+Yn(r[0])+l.text.slice(n.ch),Zn(r[0]));else{for(var m=[],g=1,y=r.length-1;g<y;++g)m.push(ur(Yn(r[g]),Zn(r[g]),v));m.push(ur(Yn(d)+l.text.slice(n.ch),Zn(d),v)),ar(e,l,l.text.slice(0,t.ch)+Yn(r[0]),Zn(r[0])),u.insert(t.line+1,m)}else if(r.length==1)ar(e,l,l.text.slice(0,t.ch)+Yn(r[0])+c.text.slice(n.ch),Zn(r[0])),u.remove(t.line+1,f,e);else{var m=[];ar(e,l,l.text.slice(0,t.ch)+Yn(r[0]),Zn(r[0])),ar(e,c,Yn(d)+c.text.slice(n.ch),Zn(d));for(var g=1,y=r.length-1;g<y;++g)m.push(ur(Yn(r[g]),Zn(r[g]),v));f>1&&u.remove(t.line+1,f-1,e),u.insert(t.line+1,m)}if(e.options.lineWrapping){var b=Math.max(5,a.scroller.clientWidth/pt(a)-3);u.iter(t.line,t.line+r.length,function(e){if(e.height==0)return;var t=(Math.ceil(e.text.length/b)||1)*v;t!=e.height&&Nr(e,t)})}else u.iter(p,t.line+r.length,function(e){var t=O(u,e);t>o.maxLineLength&&(o.maxLine=e,o.maxLineLength=t,o.maxLineChanged=!0,h=!1)}),h&&(e.curOp.updateMaxLine=!0);o.frontier=Math.min(o.frontier,t.line),Q(e,400);var w=r.length-f-1;gt(e,t.line,n.line+1,w);if(Xr(e,"change")){for(var g=0;g<r.length;++g)typeof r[g]!="string"&&(r[g]=r[g].text);var E={from:t,to:n,text:r,origin:s};if(e.curOp.textChanged){for(var S=e.curOp.textChanged;S.next;S=S.next);S.next=E}else e.curOp.textChanged=E}var x,T,N={line:t.line+r.length-1,ch:Yn(d).length+(r.length==1?t.ch:0)};if(i&&typeof i!="string")i.from?(x=i.from,T=i.to):x=T=i;else if(i=="end")x=T=N;else if(i=="start")x=T=t;else if(i=="around")x=t,T=N;else{var C=function(e){if(nn(e,t))return e;if(!nn(n,e))return N;var r=e.line+w,i=e.ch;return e.line==n.line&&(i+=Yn(d).length-(n.ch-(n.line==t.line?t.ch:0))),{line:r,ch:i}};x=C(o.sel.from),T=C(o.sel.to)}return fn(e,x,T,null,!0),N}function en(e,t,n,r,i){r||(r=n);if(nn(r,n)){var s=r;r=n,n=s}return Qt(e,n,r,gi(t),null,i)}function tn(e,t){return e.line==t.line&&e.ch==t.ch}function nn(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function rn(e){return{line:e.line,ch:e.ch}}function sn(e,t){return Math.max(0,Math.min(t,e.size-1))}function on(e,t){if(t.line<0)return{line:0,ch:0};if(t.line>=e.size)return{line:e.size-1,ch:Tr(e,e.size-1).text.length};var n=t.ch,r=Tr(e,t.line).text.length;return n==null||n>r?{line:t.line,ch:r}:n<0?{line:t.line,ch:0}:t}function un(e,t){return t>=0&&t<e.size}function an(e,t,n,r){var i=e.view.sel;if(i.shift||i.extend){var s=i.anchor;if(n){var o=nn(t,s);o!=nn(n,s)?(s=t,t=n):o!=nn(t,n)&&(t=n)}fn(e,s,t,r)}else fn(e,t,n||t,r);e.curOp.userSelChange=!0}function fn(e,t,n,r,i){e.view.goalColumn=null;var s=e.view.sel;if(i||!tn(t,s.anchor))t=cn(e,t,r,i!="push");if(i||!tn(n,s.head))n=cn(e,n,r,i!="push");if(tn(s.anchor,t)&&tn(s.head,n))return;s.anchor=t,s.head=n;var o=nn(n,t);s.from=o?n:t,s.to=o?t:n,e.curOp.updateInput=!0,e.curOp.selectionChanged=!0}function ln(e){fn(e,e.view.sel.from,e.view.sel.to,null,"push")}function cn(e,t,n,r){var i=e.view.doc,s=!1,o=t,u=n||1;e.view.cantEdit=!1;e:for(;;){var a=Tr(i,o.line),f;if(a.markedSpans){for(var l=0;l<a.markedSpans.length;++l){var c=a.markedSpans[l],h=c.marker;if((c.from==null||(h.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(c.to==null||(h.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(r&&h.clearOnEnter){(f||(f=[])).push(h);continue}if(!h.atomic)continue;var p=h.find()[u<0?"from":"to"];if(tn(p,o)){p.ch+=u,p.ch<0?p.line?p=on(i,{line:p.line-1}):p=null:p.ch>a.text.length&&(p.line<i.size-1?p={line:p.line+1,ch:0}:p=null);if(!p){if(s)return r?(e.view.cantEdit=!0,{line:0,ch:0}):cn(e,t,n,!0);s=!0,p=t,u=-u}}o=p;continue e}}if(f)for(var l=0;l<f.length;++l)f[l].clear()}return o}}function hn(e){var t=e.view,n=pn(e,t.sel.head);if(!t.focused)return;var r=e.display,i=r.sizer.getBoundingClientRect(),s=null;n.top+i.top<0?s=!0:n.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(s=!1);if(s!=null&&!h){var o=r.cursor.style.display=="none";o&&(r.cursor.style.display="",r.cursor.style.left=n.left+"px",r.cursor.style.top=n.top-r.viewOffset+"px"),r.cursor.scrollIntoView(s),o&&(r.cursor.style.display="none")}}function pn(e,t){for(;;){var n=!1,r=at(e,t),i=vn(e,r.left,r.top,r.left,r.bottom),s=e.view.scrollTop,o=e.view.scrollLeft;i.scrollTop!=null&&(Dt(e,i.scrollTop),Math.abs(e.view.scrollTop-s)>1&&(n=!0)),i.scrollLeft!=null&&(Pt(e,i.scrollLeft),Math.abs(e.view.scrollLeft-o)>1&&(n=!0));if(!n)return r}}function dn(e,t,n,r,i){var s=vn(e,t,n,r,i);s.scrollTop!=null&&Dt(e,s.scrollTop),s.scrollLeft!=null&&Pt(e,s.scrollLeft)}function vn(e,t,n,r,i){var s=e.display,o=et(s);n+=o,i+=o;var u=s.scroller.clientHeight-Vr,a=s.scroller.scrollTop,f={},l=e.view.doc.height+2*o,c=n<o+10,h=i+o>l-10;n<a?f.scrollTop=c?0:Math.max(0,n):i>a+u&&(f.scrollTop=(h?l:i)-u);var p=s.scroller.clientWidth-Vr,d=s.scroller.scrollLeft;t+=s.gutters.offsetWidth,r+=s.gutters.offsetWidth;var v=s.gutters.offsetWidth,m=t<v+10;return t<d+v||m?(m&&(t=0),f.scrollLeft=Math.max(0,t-10-v)):r>p+d-3&&(f.scrollLeft=r+10-p),f}function mn(e,t,n,r){var i=e.view.doc;n||(n="add");if(n=="smart")if(!e.view.mode.indent)n="prev";else var s=Z(e,t);var o=e.options.tabSize,u=Tr(i,t),a=Kr(u.text,null,o),f=u.text.match(/^\s*/)[0],l;if(n=="smart"){l=e.view.mode.indent(s,u.text.slice(f.length),u.text);if(l==$r){if(!r)return;n="prev"}}n=="prev"?t?l=Kr(Tr(i,t-1).text,null,o):l=0:n=="add"?l=a+e.options.indentUnit:n=="subtract"&&(l=a-e.options.indentUnit),l=Math.max(0,l);var c="",h=0;if(e.options.indentWithTabs)for(var p=Math.floor(l/o);p;--p)h+=o,c+="	";h<l&&(c+=Gr(l-h)),c!=f&&en(e,c,{line:t,ch:0},{line:t,ch:f.length},"input"),u.stateAfter=null}function gn(e,t,n){var r=t,i=t,s=e.view.doc;return typeof t=="number"?i=Tr(s,sn(s,t)):r=Cr(t),r==null?null:n(i,r)?(gt(e,r,r+1),i):null}function yn(e,t,n,r){function f(){var e=o+t;return e<0||e==i.size?!1:(o=e,a=Tr(i,e))}function l(e){var n=(r?Li:Ai)(a,u,t,!0);if(n==null){if(!!e||!f())return!1;r?u=(t<0?Ni:Ti)(a):u=t<0?a.text.length:0}else u=n;return!0}var i=e.view.doc,s=e.view.sel.head,o=s.line,u=s.ch,a=Tr(i,o);if(n=="char")l();else if(n=="column")l(!0);else if(n=="word"){var c=!1;for(;;){if(t<0&&!l())break;if(ii(a.text.charAt(u)))c=!0;else if(c){t<0&&(t=1,l());break}if(t>0&&!l())break}}return cn(e,{line:o,ch:u},t,!0)}function bn(e,t){var n=t.ch,r=t.ch;if(e){t.after===!1||r==e.length?--n:++r;var i=e.charAt(n),s=ii(i)?ii:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ii(e)};while(n>0&&s(e.charAt(n-1)))--n;while(r<e.length&&s(e.charAt(r)))++r}return{from:{line:t.line,ch:n},to:{line:t.line,ch:r}}}function wn(e,t){an(e,{line:t,ch:0},on(e.view.doc,{line:t+1,ch:0}))}function xn(e,t,n,r){E.defaults[e]=t,n&&(En[e]=r?function(e,t,r){r!=Tn&&n(e,t,r)}:n)}function An(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function On(e,t,n){return e.startState?e.startState(t,n):!0}function Dn(e){return typeof e=="string"?_n[e]:e}function Pn(e,t,n,r){function i(t){t=Dn(t);var s=t[e];if(s===!1)return r&&r(),!0;if(s!=null&&n(s))return!0;if(t.nofallthrough)return r&&r(),!0;var o=t.fallthrough;if(o==null)return!1;if(Object.prototype.toString.call(o)!="[object Array]")return i(o);for(var u=0,a=o.length;u<a;++u)if(i(o[u]))return!0;return!1}for(var s=0;s<t.length;++s)if(i(t[s]))return!0}function Hn(e){var t=wi[qr(e,"keyCode")];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function Bn(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function jn(e,t){this.lines=[],this.type=t,this.cm=e}function Fn(e,t,n,r,i){var s=e.view.doc,o=new jn(e,i);if(i=="range"&&!nn(t,n))return o;if(r)for(var u in r)r.hasOwnProperty(u)&&(o[u]=r[u]);o.replacedWith&&(o.collapsed=!0,o.replacedWith=ui("span",[o.replacedWith],"CodeMirror-widget")),o.collapsed&&(w=!0);var a=t.line,f=0,l,c;s.iter(a,n.line+1,function(r){o.collapsed&&!e.options.lineWrapping&&Kn(s,r)==e.view.maxLine&&(e.curOp.updateMaxLine=!0);var i={from:null,to:null,marker:o};f+=r.text.length,a==t.line&&(i.from=t.ch,f-=t.ch),a==n.line&&(i.to=n.ch,f-=r.text.length-n.ch),o.collapsed&&(a==n.line&&(c=Vn(r,n.ch)),a==t.line?l=Vn(r,t.ch):Nr(r,0)),Rn(r,i),++a}),o.collapsed&&s.iter(t.line,n.line+1,function(e){Qn(e)&&Nr(e,0)}),o.readOnly&&(b=!0,(e.view.history.done.length||e.view.history.undone.length)&&e.clearHistory());if(o.collapsed){if(l!=c)throw new Error("Inserting collapsed marker overlapping an existing one");o.size=f,o.atomic=!0}return(o.className||o.startStyle||o.endStyle||o.collapsed)&&gt(e,t.line,n.line+1),o.atomic&&ln(e),o}function In(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function qn(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Rn(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.lines.push(e)}function Un(e,t){if(e)for(var n=0,r;n<e.length;++n){var i=e[n],s=i.marker,o=i.from==null||(s.inclusiveLeft?i.from<=t:i.from<t);if(o||s.type=="bookmark"&&i.from==t){var u=i.to==null||(s.inclusiveRight?i.to>=t:i.to>t);(r||(r=[])).push({from:i.from,to:u?null:i.to,marker:s})}}return r}function zn(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.to==null||(o.inclusiveRight?s.to>=n:s.to>n);if(u||o.type=="bookmark"&&s.from==n&&s.from!=t){var a=s.from==null||(o.inclusiveLeft?s.from<=n:s.from<n);(i||(i=[])).push({from:a?null:s.from-n,to:s.to==null?null:s.to-n,marker:o})}}return i}function Wn(e,t,n,r,i){if(!e&&!t)return i;var s=Un(e,n),o=zn(t,n,r),u=i.length==1,a=Yr(i).length+(u?n:0);if(s)for(var f=0;f<s.length;++f){var l=s[f];if(l.to==null){var c=In(o,l.marker);c?u&&(l.to=c.to==null?null:c.to+a):l.to=n}}if(o)for(var f=0;f<o.length;++f){var l=o[f];l.to!=null&&(l.to+=a);if(l.from==null){var c=In(s,l.marker);c||(l.from=a,u&&(s||(s=[])).push(l))}else l.from+=a,u&&(s||(s=[])).push(l)}var h=[er(i[0],s)];if(!u){var p=i.length-2,d;if(p>0&&s)for(var f=0;f<s.length;++f)s[f].to==null&&(d||(d=[])).push({from:null,to:null,marker:s[f].marker});for(var f=0;f<p;++f)h.push(er(i[f+1],d));h.push(er(Yr(i),o))}return h}function Xn(e,t,n){var r=null;e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;n.readOnly&&(!r||ei(r,n)==-1)&&(r||(r=[])).push(n)}});if(!r)return null;var i=[{from:t,to:n}];for(var s=0;s<r.length;++s){var o=r[s].find();for(var u=0;u<i.length;++u){var a=i[u];if(!nn(o.from,a.to)||nn(o.to,a.from))continue;var f=[u,1];nn(a.from,o.from)&&f.push({from:a.from,to:o.from}),nn(o.to,a.to)&&f.push({from:o.to,to:a.to}),i.splice.apply(i,f),u+=f.length-1}}return i}function Vn(e,t){var n=w&&e.markedSpans,r;if(n)for(var i,s=0;s<n.length;++s){i=n[s];if(!i.marker.collapsed)continue;(i.from==null||i.from<t)&&(i.to==null||i.to>t)&&(!r||r.width<i.marker.width)&&(r=i.marker)}return r}function $n(e){return Vn(e,-1)}function Jn(e){return Vn(e,e.text.length+1)}function Kn(e,t){var n;while(n=$n(t))t=Tr(e,n.find().from.line);return t}function Qn(e){var t=w&&e.markedSpans;if(t)for(var n,r=0;r<t.length;++r){n=t[r];if(!n.marker.collapsed)continue;if(n.from==null)return!0;if(n.from==0&&n.marker.inclusiveLeft&&Gn(e,n))return!0}}function Gn(e,t){if(t.to==null){var n=t.marker.find().to,r=Tr(kr(e),n.line);return Gn(r,In(r.markedSpans,t.marker))}if(t.marker.inclusiveRight&&t.to==e.text.length)return!0;for(var i,s=0;s<e.markedSpans.length;++s){i=e.markedSpans[s];if(i.marker.collapsed&&i.from==t.to&&(i.marker.inclusiveLeft||t.marker.inclusiveRight)&&Gn(e,i))return!0}}function Yn(e){return typeof e=="string"?e:e.text}function Zn(e){if(typeof e=="string")return null;var t=e.markedSpans,n=null;for(var r=0;r<t.length;++r)t[r].marker.explicitlyCleared?n||(n=t.slice(0,r)):n&&n.push(t[r]);return n?n.length?n:null:t}function er(e,t){return t?{text:e,markedSpans:t}:e}function tr(e){var t=e.markedSpans;if(!t)return;for(var n=0;n<t.length;++n){var r=t[n].marker.lines,i=ei(r,e);r.splice(i,1)}e.markedSpans=null}function nr(e,t){if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.lines.push(e);e.markedSpans=t}function ir(e){return function(){dt(this.cm);try{var t=e.apply(this,arguments)}finally{vt(this.cm)}return t}}function sr(e){return e.height!=null?e.height:((!e.node.parentNode||e.node.parentNode.nodeType!=1)&&fi(e.cm.display.measure,ui("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function or(e,t,n,r){var i=new rr(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),gn(e,t,function(t){(t.widgets||(t.widgets=[])).push(i),i.line=t;if(!Qn(t)||i.showIfHidden){var n=Ar(e,t)<e.display.scroller.scrollTop;Nr(t,t.height+sr(i)),n&&setTimeout(function(){e.display.scroller.scrollTop+=i.height})}return!0}),i}function ur(e,t,n){var r={text:e,height:n};return nr(r,t),Qn(r)&&(r.height=0),r}function ar(e,t,n,r){t.text=n,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),t.order!=null&&(t.order=null),tr(t),nr(t,r),Qn(t)?t.height=0:t.height||(t.height=ht(e.display)),Wr(e,t,"change")}function fr(e){e.parent=null,tr(e)}function lr(e,t,n,r,i){var s=e.options.flattenSpans,o="",u=null,a=new Bn(t,e.options.tabSize);t==""&&n.blankLine&&n.blankLine(r);while(!a.eol()){var f=n.token(a,r);a.pos>5e3&&(s=!1,a.pos=Math.min(t.length,a.start+5e4),f=null);var l=a.current();a.start=a.pos,!s||u!=f?(o&&i(o,u),o=l,u=f):o+=l}o&&i(o,u)}function cr(e,t,n){var r=[e.view.modeGen];lr(e,t.text,e.view.mode,n,function(e,t){r.push(e,t)});for(var i=0;i<e.view.overlays.length;++i){var s=e.view.overlays[i],o=1;lr(e,t.text,s.mode,!0,function(e,t){var n=o,i=e.length;while(i){var u=r[o],a=u.length;a<=i?i-=a:(r.splice(o,1,u.slice(0,i),r[o+1],u.slice(i)),i=0),o+=2}if(!t)return;if(s.opaque)r.splice(n,o-n,e,t),o=n+2;else for(;n<o;n+=2){var u=r[n+1];r[n+1]=u?u+" "+t:t}})}return r}function hr(e,t){if(!t.styles||t.styles[0]!=e.view.modeGen)t.styles=cr(e,t,t.stateAfter=Z(e,Cr(t)));return t.styles}function pr(e,t,n){var r=e.view.mode,i=new Bn(t.text,e.options.tabSize);t.text==""&&r.blankLine&&r.blankLine(n);while(!i.eol()&&i.pos<=5e3)r.token(i,n),i.start=i.pos}function vr(e){return e?dr[e]||(dr[e]="cm-"+e.replace(/ +/g," cm-")):null}function mr(e,t,n){var r,i=t,s,o,u=!0;while(r=$n(i))u=!1,i=Tr(e.view.doc,r.find().from.line),s||(s=i);var a={pre:ui("pre"),col:0,pos:0,display:!n,measure:null,addedOne:!1,cm:e};i.textClass&&(a.pre.className=i.textClass);do{a.measure=i==t&&n,a.pos=0,a.addToken=a.measure?br:yr,n&&o&&i!=t&&!a.addedOne&&(n[0]=a.pre.appendChild(mi(e.display.measure)),a.addedOne=!0);var f=Er(i,a,hr(e,i));o=i==s,f&&(i=Tr(e.view.doc,f.to.line),u=!1)}while(f);return n&&!a.addedOne&&(n[0]=a.pre.appendChild(u?ui("span"," "):mi(e.display.measure))),!a.pre.firstChild&&!Qn(t)&&a.pre.appendChild(document.createTextNode(" ")),a.pre}function yr(e,t,n,r,i){if(!t)return;if(!gr.test(t)){e.col+=t.length;var s=document.createTextNode(t)}else{var s=document.createDocumentFragment(),o=0;for(;;){gr.lastIndex=o;var u=gr.exec(t),a=u?u.index-o:t.length-o;a&&(s.appendChild(document.createTextNode(t.slice(o,o+a))),e.col+=a);if(!u)break;o+=a+1;if(u[0]=="	"){var f=e.cm.options.tabSize,l=f-e.col%f;s.appendChild(ui("span",Gr(l),"cm-tab")),e.col+=l}else{var c=ui("span","•","cm-invalidchar");c.title="\\u"+u[0].charCodeAt(0).toString(16),s.appendChild(c),e.col+=1}}}if(n||r||i||e.measure){var h=n||"";return r&&(h+=r),i&&(h+=i),e.pre.appendChild(ui("span",[s],h))}e.pre.appendChild(s)}function br(e,t,n,r,i){for(var s=0;s<t.length;++s)s&&s<t.length&&e.cm.options.lineWrapping&&hi.test(t.slice(s-1,s+1))&&e.pre.appendChild(ui("wbr")),e.measure[e.pos++]=yr(e,t.charAt(s),n,s==0&&r,s==t.length-1&&i);t.length&&(e.addedOne=!0)}function wr(e,t,n){n&&(e.display||(n=n.cloneNode(!0)),e.pre.appendChild(n),e.measure&&t&&(e.measure[e.pos]=n,e.addedOne=!0)),e.pos+=t}function Er(e,t,n){var r=e.markedSpans;if(!r){for(var i=1;i<n.length;i+=2)t.addToken(t,n[i],vr(n[i+1]));return}var s=e.text,o=s.length,u=0,i=1,a="",f,l=0,c,h,p,d;for(;;){if(l==u){c=h=p="",d=null,l=Infinity;var v=null;for(var m=0;m<r.length;++m){var g=r[m],y=g.marker;g.from<=u&&(g.to==null||g.to>u)?(g.to!=null&&l>g.to&&(l=g.to,h=""),y.className&&(c+=" "+y.className),y.startStyle&&g.from==u&&(p+=" "+y.startStyle),y.endStyle&&g.to==l&&(h+=" "+y.endStyle),y.collapsed&&(!d||d.marker.width<y.width)&&(d=g)):g.from>u&&l>g.from&&(l=g.from),y.type=="bookmark"&&g.from==u&&y.replacedWith&&(v=y.replacedWith)}if(d&&(d.from||0)==u){wr(t,(d.to==null?o:d.to)-u,d.from!=null&&d.marker.replacedWith);if(d.to==null)return d.marker.find()}v&&!d&&wr(t,0,v)}if(u>=o)break;var b=Math.min(o,l);for(;;){if(a){var w=u+a.length;if(!d){var E=w>b?a.slice(0,b-u):a;t.addToken(t,E,f+c,p,u+E.length==l?h:"")}if(w>=b){a=a.slice(b-u),u=b;break}u=w,p=""}a=n[i++],f=vr(n[i++])}}}function Sr(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;t<n;++t)e[t].parent=this,r+=e[t].height;this.height=r}function xr(e){this.children=e;var t=0,n=0;for(var r=0,i=e.length;r<i;++r){var s=e[r];t+=s.chunkSize(),n+=s.height,s.parent=this}this.size=t,this.height=n,this.parent=null}function Tr(e,t){while(!e.lines)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(t<i){e=r;break}t-=i}return e.lines[t]}function Nr(e,t){var n=t-e.height;for(var r=e;r;r=r.parent)r.height+=n}function Cr(e){if(e.parent==null)return null;var t=e.parent,n=ei(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent)for(var i=0;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}return n}function kr(e){for(var t=e.parent;t.parent;t=t.parent);return t}function Lr(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.height;if(t<o){e=s;continue e}t-=o,n+=s.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;r<i;++r){var u=e.lines[r],a=u.height;if(t<a)break;t-=a}return n+r}function Ar(e,t){t=Kn(e.view.doc,t);var n=0,r=t.parent;for(var i=0;i<r.lines.length;++i){var s=r.lines[i];if(s==t)break;n+=s.height}for(var o=r.parent;o;r=o,o=r.parent)for(var i=0;i<o.children.length;++i){var u=o.children[i];if(u==r)break;n+=u.height}return n}function Or(e){var t=e.order;return t==null&&(t=e.order=Oi(e.text)),t}function Mr(){return{done:[],undone:[],lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function _r(e,t,n,r,i,s,o,u,a){var f=e.view.history;f.undone.length=0;var l=+(new Date),c=Yr(f.done);if(c&&(f.lastOp==e.curOp.id||f.lastOrigin==i&&(i=="input"||i=="delete")&&f.lastTime>l-600)){var h=Yr(c.events);if(h.start>t+r.length||h.start+h.added<t)c.events.push({start:t,added:n,old:r});else{var p=Math.max(0,h.start-t),d=Math.max(0,t+r.length-(h.start+h.added));for(var v=p;v>0;--v)h.old.unshift(r[v-1]);for(var v=d;v>0;--v)h.old.push(r[r.length-v]);p&&(h.start=t),h.added+=n-(r.length-p-d)}c.fromAfter=u,c.toAfter=a}else{c={events:[{start:t,added:n,old:r}],fromBefore:s,toBefore:
o,fromAfter:u,toAfter:a},f.done.push(c);while(f.done.length>e.options.undoDepth)f.done.shift();f.dirtyCounter<0?f.dirtyCounter=NaN:f.dirtyCounter++}f.lastTime=l,f.lastOp=e.curOp.id,f.lastOrigin=i}function Dr(){jr(this)}function Pr(e){return e.stop||(e.stop=Dr),e}function Hr(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Br(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function jr(e){Hr(e),Br(e)}function Fr(e){return e.target||e.srcElement}function Ir(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),v&&e.ctrlKey&&t==1&&(t=3),t}function qr(e,t){var n=e.override&&e.override.hasOwnProperty(t);return n?e.override[t]:e[t]}function Rr(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}}function Ur(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}}function zr(e,t){var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2);for(var i=0;i<n.length;++i)n[i].apply(null,r)}function Wr(e,t,n){function o(e){return function(){e.apply(null,i)}}var r=t._handlers&&t._handlers[n];if(!r)return;var i=Array.prototype.slice.call(arguments,3),s=e.curOp&&e.curOp.delayedCallbacks;for(var u=0;u<r.length;++u)s?s.push(o(r[u])):r[u].apply(null,i)}function Xr(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function Jr(){this.id=null}function Kr(e,t,n){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var r=0,i=0;r<t;++r)e.charAt(r)=="	"?i+=n-i%n:++i;return i}function Gr(e){while(Qr.length<=e)Qr.push(Yr(Qr)+" ");return Qr[e]}function Yr(e){return e[e.length-1]}function Zr(e){p?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function ei(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function ti(e){for(var t=[],n=0;n<e;++n)t.push(undefined);return t}function ni(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function ii(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ri.test(e))}function si(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&e[n]&&++t;return!t}function ui(e,t,n,r){var i=document.createElement(e);n&&(i.className=n),r&&(i.style.cssText=r);if(typeof t=="string")li(i,t);else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function ai(e){if(!t)e.innerHTML="";else while(e.firstChild)e.removeChild(e.firstChild);return e}function fi(e,t){return ai(e).appendChild(t)}function li(e,t){r?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function di(e){if(pi!=null)return pi;var t=ui("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return fi(e,t),t.offsetWidth&&(pi=t.offsetHeight-t.clientHeight),pi||0}function mi(e){if(vi==null){var t=ui("span","​");fi(e,ui("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(vi=t.offsetWidth<=1&&t.offsetHeight>2&&!n)}return vi?ui("span","​"):ui("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function Ei(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=0;i<e.length;++i){var s=e[i];(s.from<n&&s.to>t||t==n&&s.to==t)&&r(Math.max(s.from,t),Math.min(s.to,n),s.level==1?"rtl":"ltr")}}function Si(e){return e.level%2?e.to:e.from}function xi(e){return e.level%2?e.from:e.to}function Ti(e){var t=Or(e);return t?Si(t[0]):0}function Ni(e){var t=Or(e);return t?xi(Yr(t)):e.text.length}function Ci(e,t){var n=Tr(e.view.doc,t),r=Kn(e.view.doc,n);r!=n&&(t=Cr(r));var i=Or(r),s=i?i[0].level%2?Ni(r):Ti(r):0;return{line:t,ch:s}}function ki(e,t){var n,r;while(n=Jn(r=Tr(e.view.doc,t)))t=n.find().to.line;var i=Or(r),s=i?i[0].level%2?Ti(r):Ni(r):r.text.length;return{line:t,ch:s}}function Li(e,t,n,r){var i=Or(e);if(!i)return Ai(e,t,n,r);var s=r?function(t,n){do t+=n;while(t>0&&oi.test(e.text.charAt(t)));return t}:function(e,t){return e+t},o=i[0].level;for(var u=0;u<i.length;++u){var a=i[u],f=a.level%2==o;if(a.from<t&&a.to>t||f&&(a.from==t||a.to==t))break}var l=s(t,a.level%2?-n:n);while(l!=null)if(a.level%2==o){if(!(l<a.from||l>a.to))break;a=i[u+=n],l=a&&(n>0==a.level%2?s(a.to,-1):s(a.from,1))}else if(l==Si(a))a=i[--u],l=a&&xi(a);else{if(l!=xi(a))break;a=i[++u],l=a&&Si(a)}return l<0||l>e.text.length?null:l}function Ai(e,t,n,r){var i=t+n;if(r)while(i>0&&oi.test(e.text.charAt(i)))i+=n;return i<0||i>e.text.length?null:i}var e=/gecko\/\d/i.test(navigator.userAgent),t=/MSIE \d/.test(navigator.userAgent),n=t&&(document.documentMode==null||document.documentMode<8),r=t&&(document.documentMode==null||document.documentMode<9),i=/WebKit\//.test(navigator.userAgent),s=i&&/Qt\/\d+\.\d+/.test(navigator.userAgent),o=/Chrome\//.test(navigator.userAgent),u=/Opera\//.test(navigator.userAgent),a=/Apple Computer/.test(navigator.vendor),f=/KHTML\//.test(navigator.userAgent),l=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),c=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),h=/PhantomJS/.test(navigator.userAgent),p=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),d=p||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),v=p||/Mac/.test(navigator.platform),m=/windows/i.test(navigator.platform),g=u&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);g&&(g=Number(g[1]));var y=v&&(s||u&&(g==null||g<12.11)),b=!1,w=!1,ct,kt,Lt,Ht=0,Bt=null;t?Bt=-0.53:e?Bt=15:o?Bt=-0.7:a&&(Bt=-1/3);var qt,zt=null,Jt;E.prototype={getValue:function(e){var t=[],n=this.view.doc;return n.iter(0,n.size,function(e){t.push(e.text)}),t.join(e||"\n")},setValue:mt(null,function(e){var t=this.view.doc,n={line:0,ch:0},r=Tr(t,t.size-1).text.length;Gt(this,n,{line:t.size-1,ch:r},gi(e),n,n,"setValue")}),getSelection:function(e){return this.getRange(this.view.sel.from,this.view.sel.to,e)},replaceSelection:mt(null,function(e,t,n){var r=this.view.sel;Qt(this,r.from,r.to,gi(e),t||"around",n)}),focus:function(){window.focus(),St(this),Vt(this),bt(this)},setOption:function(e,t){var n=this.options,r=n[e];if(n[e]==t&&e!="mode")return;n[e]=t,En.hasOwnProperty(e)&&mt(this,En[e])(this,t,r)},getOption:function(e){return this.options[e]},getMode:function(){return this.view.mode},addKeyMap:function(e){this.view.keyMaps.push(e)},removeKeyMap:function(e){var t=this.view.keyMaps;for(var n=0;n<t.length;++n)if((typeof e=="string"?t[n].name:t[n])==e)return t.splice(n,1),!0},addOverlay:mt(null,function(e,t){var n=e.token?e:E.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.view.overlays.push({mode:n,modeSpec:e,opaque:t&&t.opaque}),this.view.modeGen++,gt(this,0,this.view.doc.size)}),removeOverlay:mt(null,function(e){var t=this.view.overlays;for(var n=0;n<t.length;++n)if(t[n].modeSpec==e){t.splice(n,1),this.view.modeGen++,gt(this,0,this.view.doc.size);return}}),undo:mt(null,function(){Yt(this,"undo")}),redo:mt(null,function(){Yt(this,"redo")}),indentLine:mt(null,function(e,t,n){typeof t!="string"&&(t==null?t=this.options.smartIndent?"smart":"prev":t=t?"add":"subtract"),un(this.view.doc,e)&&mn(this,e,t,n)}),indentSelection:mt(null,function(e){var t=this.view.sel;if(tn(t.from,t.to))return mn(this,t.from.line,e);var n=t.to.line-(t.to.ch?0:1);for(var r=t.from.line;r<=n;++r)mn(this,r,e)}),historySize:function(){var e=this.view.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.view.history=Mr()},markClean:function(){this.view.history.dirtyCounter=0,this.view.history.lastOp=this.view.history.lastOrigin=null},isClean:function(){return this.view.history.dirtyCounter==0},getHistory:function(){function t(e){for(var t=0,n=[],r;t<e.length;++t){var i=e[t];n.push({events:r=[],fromBefore:i.fromBefore,toBefore:i.toBefore,fromAfter:i.fromAfter,toAfter:i.toAfter});for(var s=0,o=i.events;s<o.length;++s){var u=[],a=o[s];r.push({start:a.start,added:a.added,old:u});for(var f=0;f<a.old.length;++f)u.push(Yn(a.old[f]))}}return n}var e=this.view.history;return{done:t(e.done),undone:t(e.undone)}},setHistory:function(e){var t=this.view.history=Mr();t.done=e.done,t.undone=e.undone},getTokenAt:function(e){var t=this.view.doc;e=on(t,e);var n=Z(this,e.line),r=this.view.mode,i=Tr(t,e.line),s=new Bn(i.text,this.options.tabSize);while(s.pos<e.ch&&!s.eol()){s.start=s.pos;var o=r.token(s,n)}return{start:s.start,end:s.pos,string:s.current(),className:o||null,type:o||null,state:n}},getStateAfter:function(e){var t=this.view.doc;return e=sn(t,e==null?t.size-1:e),Z(this,e+1)},cursorCoords:function(e,t){var n,r=this.view.sel;return e==null?n=r.head:typeof e=="object"?n=on(this.view.doc,e):n=e?r.from:r.to,at(this,n,t||"page")},charCoords:function(e,t){return ut(this,on(this.view.doc,e),t||"page")},coordsChar:function(e){var t=this.display.lineSpace.getBoundingClientRect();return ft(this,e.left-t.left,e.top-t.top)},defaultTextHeight:function(){return ht(this.display)},markText:mt(null,function(e,t,n){return Fn(this,on(this.view.doc,e),on(this.view.doc,t),n,"range")}),setBookmark:mt(null,function(e,t){return e=on(this.view.doc,e),Fn(this,e,e,t?{replacedWith:t}:{},"bookmark")}),findMarksAt:function(e){var t=this.view.doc;e=on(t,e);var n=[],r=Tr(t,e.line).markedSpans;if(r)for(var i=0;i<r.length;++i){var s=r[i];(s.from==null||s.from<=e.ch)&&(s.to==null||s.to>=e.ch)&&n.push(s.marker)}return n},setGutterMarker:mt(null,function(e,t,n){return gn(this,e,function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&si(r)&&(e.gutterMarkers=null),!0})}),clearGutter:mt(null,function(e){var t=0,n=this,r=n.view.doc;r.iter(0,r.size,function(r){r.gutterMarkers&&r.gutterMarkers[e]&&(r.gutterMarkers[e]=null,gt(n,t,t+1),si(r.gutterMarkers)&&(r.gutterMarkers=null)),++t})}),addLineClass:mt(null,function(e,t,n){return gn(this,e,function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass";if(!e[r])e[r]=n;else{if((new RegExp("\\b"+n+"\\b")).test(e[r]))return!1;e[r]+=" "+n}return!0})}),removeLineClass:mt(null,function(e,t,n){return gn(this,e,function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(n==null)e[r]=null;else{var s=i.replace(new RegExp("^"+n+"\\b\\s*|\\s*\\b"+n+"\\b"),"");if(s==i)return!1;e[r]=s||null}return!0})}),addLineWidget:mt(null,function(e,t,n){return or(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if(typeof e=="number"){if(!un(this.view.doc,e))return null;var t=e;e=Tr(this.view.doc,e);if(!e)return null}else{var t=Cr(e);if(t==null)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,n,r,i){var s=this.display;e=at(this,on(this.view.doc,e));var o=e.top,u=e.left;t.style.position="absolute",s.sizer.appendChild(t);if(r=="over")o=e.top;else if(r=="near"){var a=Math.max(s.wrapper.clientHeight,this.view.doc.height),f=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);e.bottom+t.offsetHeight>a&&e.top>t.offsetHeight&&(o=e.top-t.offsetHeight),u+t.offsetWidth>f&&(u=f-t.offsetWidth)}t.style.top=o+et(s)+"px",t.style.left=t.style.right="",i=="right"?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):(i=="left"?u=0:i=="middle"&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&dn(this,u,o,u+t.offsetWidth,o+t.offsetHeight)},lineCount:function(){return this.view.doc.size},clipPos:function(e){return on(this.view.doc,e)},getCursor:function(e){var t=this.view.sel,n;return e==null||e=="head"?n=t.head:e=="anchor"?n=t.anchor:e=="end"||e===!1?n=t.to:n=t.from,rn(n)},somethingSelected:function(){return!tn(this.view.sel.from,this.view.sel.to)},setCursor:mt(null,function(e,t,n){var r=on(this.view.doc,typeof e=="number"?{line:e,ch:t||0}:e);n?an(this,r):fn(this,r,r)}),setSelection:mt(null,function(e,t){var n=this.view.doc;fn(this,on(n,e),on(n,t||e))}),extendSelection:mt(null,function(e,t){var n=this.view.doc;an(this,on(n,e),t&&on(n,t))}),setExtending:function(e){this.view.sel.extend=e},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){var t=this.view.doc;if(un(t,e))return Tr(t,e)},getLineNumber:function(e){return Cr(e)},setLine:mt(null,function(e,t){un(this.view.doc,e)&&en(this,t,{line:e,ch:0},{line:e,ch:Tr(this.view.doc,e).text.length})}),removeLine:mt(null,function(e){un(this.view.doc,e)&&en(this,"",{line:e,ch:0},on(this.view.doc,{line:e+1,ch:0}))}),replaceRange:mt(null,function(e,t,n){var r=this.view.doc;return t=on(r,t),n=n?on(r,n):t,en(this,e,t,n)}),getRange:function(e,t,n){var r=this.view.doc;e=on(r,e),t=on(r,t);var i=e.line,s=t.line;if(i==s)return Tr(r,i).text.slice(e.ch,t.ch);var o=[Tr(r,i).text.slice(e.ch)];return r.iter(i+1,s,function(e){o.push(e.text)}),o.push(Tr(r,s).text.slice(0,t.ch)),o.join(n||"\n")},triggerOnKeyDown:mt(null,Wt),execCommand:function(e){return Mn[e](this)},moveH:mt(null,function(e,t){var n=this.view.sel,r=e<0?n.from:n.to;if(n.shift||n.extend||tn(n.from,n.to))r=yn(this,e,t,this.options.rtlMoveVisually);an(this,r,r,e)}),deleteH:mt(null,function(e,t){var n=this.view.sel;tn(n.from,n.to)?en(this,"",n.from,yn(this,e,t,!1),"delete"):en(this,"",n.from,n.to,"delete"),this.curOp.userSelChange=!0}),moveV:mt(null,function(e,t){var n=this.view,r=n.doc,i=this.display,s=n.sel.head,o=at(this,s,"div"),u=o.left,a;n.goalColumn!=null&&(u=n.goalColumn);if(t=="page"){var f=Math.min(i.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);a=o.top+e*f}else t=="line"&&(a=e>0?o.bottom+3:o.top-3);do{var l=ft(this,u,a);a+=e*5}while(l.outside&&(e<0?a>0:a<r.height));t=="page"&&(i.scrollbarV.scrollTop+=ut(this,l,"div").top-o.top),an(this,l,l,e),n.goalColumn=u}),toggleOverwrite:function(){(this.view.overwrite=!this.view.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},posFromIndex:function(e){var t=0,n,r=this.view.doc;return r.iter(0,r.size,function(r){var i=r.text.length+1;if(i>e)return n=e,!0;e-=i,++t}),on(r,{line:t,ch:n})},indexFromPos:function(e){e=on(this.view.doc,e);var t=e.ch;return this.view.doc.iter(0,e.line,function(e){t+=e.text.length+1}),t},scrollTo:function(e,t){e!=null&&(this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=e),t!=null&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=t),I(this,[])},getScrollInfo:function(){var e=this.display.scroller,t=Vr;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:function(e){typeof e=="number"&&(e={line:e,ch:0}),!e||e.line!=null?(e=e?on(this.view.doc,e):this.view.sel.head,pn(this,e)):dn(this,e.left,e.top,e.right,e.bottom)},setSize:function(e,t){function n(e){return typeof e=="number"||/^\d+$/.test(String(e))?e+"px":e}e!=null&&(this.display.wrapper.style.width=n(e)),t!=null&&(this.display.wrapper.style.height=n(t)),this.refresh()},on:function(e,t){Rr(this,e,t)},off:function(e,t){Ur(this,e,t)},operation:function(e){return mt(this,e)()},refresh:function(){st(this);var e=this.view.scrollTop,t=this.view.scrollLeft;this.display.scroller.scrollHeight>e&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=e),this.display.scroller.scrollWidth>t&&(this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=t),I(this,!0)},getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var En=E.optionHandlers={},Sn=E.defaults={},Tn=E.Init={toString:function(){return"CodeMirror.Init"}};xn("value","",function(e,t){e.setValue(t)},!0),xn("mode",null,T,!0),xn("indentUnit",2,T,!0),xn("indentWithTabs",!1),xn("smartIndent",!0),xn("tabSize",4,function(e){T(e),st(e),I(e,!0)},!0),xn("electricChars",!0),xn("rtlMoveVisually",!m),xn("theme","default",function(e){k(e),L(e)},!0),xn("keyMap","default",C),xn("extraKeys",null),xn("onKeyEvent",null),xn("onDragEvent",null),xn("lineWrapping",!1,N,!0),xn("gutters",[],function(e){_(e.options),L(e)},!0),xn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?F(e.display)+"px":"0",e.refresh()},!0),xn("lineNumbers",!1,function(e){_(e.options),L(e)},!0),xn("firstLineNumber",1,L,!0),xn("lineNumberFormatter",function(e){return e},L,!0),xn("showCursorWhenSelecting",!1,V,!0),xn("readOnly",!1,function(e,t){t=="nocursor"?($t(e),e.display.input.blur()):t||Et(e,!0)}),xn("dragDrop",!0),xn("cursorBlinkRate",530),xn("cursorHeight",1),xn("workTime",100),xn("workDelay",100),xn("flattenSpans",!0),xn("pollInterval",100),xn("undoDepth",40),xn("viewportMargin",10,function(e){e.refresh()},!0),xn("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),xn("autofocus",null);var Nn=E.modes={},Cn=E.mimeModes={};E.defineMode=function(e,t){!E.defaults.mode&&e!="null"&&(E.defaults.mode=e);if(arguments.length>2){t.dependencies=[];for(var n=2;n<arguments.length;++n)t.dependencies.push(arguments[n])}Nn[e]=t},E.defineMIME=function(e,t){Cn[e]=t},E.resolveMode=function(e){if(typeof e=="string"&&Cn.hasOwnProperty(e))e=Cn[e];else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return E.resolveMode("application/xml");return typeof e=="string"?{name:e}:e||{name:"null"}},E.getMode=function(e,t){t=E.resolveMode(t);var n=Nn[t.name];if(!n)return E.getMode(e,"text/plain");var r=n(e,t);if(kn.hasOwnProperty(t.name)){var i=kn[t.name];for(var s in i){if(!i.hasOwnProperty(s))continue;r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=i[s]}}return r.name=t.name,r},E.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),E.defineMIME("text/plain","null");var kn=E.modeExtensions={};E.extendMode=function(e,t){var n=kn.hasOwnProperty(e)?kn[e]:kn[e]={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},E.defineExtension=function(e,t){E.prototype[e]=t},E.defineOption=xn;var Ln=[];E.defineInitHook=function(e){Ln.push(e)},E.copyState=An,E.startState=On,E.innerMode=function(e,t){while(e.innerMode){var n=e.innerMode(t);t=n.state,e=n.mode}return n||{mode:e,state:t}};var Mn=E.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!tn(t,n);!r&&e.getLine(t.line).length==t.ch?e.replaceRange("",t,{line:t.line+1,ch:0},"delete"):e.replaceRange("",t,r?n:{line:t.line},"delete")},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t},"delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection({line:0,ch:0})},goDocEnd:function(e){e.extendSelection({line:e.lineCount()-1})},goLineStart:function(e){e.extendSelection(Ci(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),n=Ci(e,t.line),r=e.getLineHandle(n.line),i=Or(r);if(!i||i[0].level==0){var s=Math.max(0,r.text.search(/\S/)),o=t.line==n.line&&t.ch<=s&&t.ch;e.extendSelection({line:n.line,ch:o?0:s})}else e.extendSelection(n)},goLineEnd:function(e){e.extendSelection(ki(e,e.getCursor().line))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end","input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end","input")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){mt(e,function(){e.replaceSelection("\n","end","input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},_n=E.keyMap={};_n.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},_n.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordBefore","Ctrl-Delete":"delWordAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},_n.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordBefore","Ctrl-Alt-Backspace":"delWordAfter","Alt-Delete":"delWordAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},_n["default"]=v?_n.macDefault:_n.pcDefault,_n.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},E.isModifierKey=Hn,E.fromTextArea=function(e,t){function i(){e.value=u.getValue()}t||(t={}),t.value=e.value,!t.tabindex&&e.tabindex&&(t.tabindex=e.tabindex);if(t.autofocus==null){var n=document.body;try{n=document.activeElement}catch(r){}t.autofocus=n==e||e.getAttribute("autofocus")!=null&&n==document.body}if(e.form){Rr(e.form,"submit",i);var s=e.form,o=s.submit;try{s.submit=function a(){i(),s.submit=o,s.submit(),s.submit=a}}catch(r){}}e.style.display="none";var u=E(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return u.save=i,u.getTextArea=function(){return e},u.toTextArea=function(){i(),e.parentNode.removeChild(u.getWrapperElement()),e.style.display="",e.form&&(Ur(e.form,"submit",i),typeof e.form.submit=="function"&&(e.form.submit=o))},u},Bn.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return Kr(this.string,this.start,this.tabSize)},indentation:function(){return Kr(this.string,null,this.tabSize)},match:function(e,t,n){if(typeof e!="string"){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string).indexOf(r(e),this.pos)==this.pos)return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},E.StringStream=Bn,E.TextMarker=jn,jn.prototype.clear=function(){if(this.explicitlyCleared)return;dt(this.cm);var e=this.cm.view,t=null,n=null;for(var r=0;r<this.lines.length;++r){var i=this.lines[r],s=In(i.markedSpans,this);s.to!=null&&(n=Cr(i)),i.markedSpans=qn(i.markedSpans,s),s.from!=null?t=Cr(i):this.collapsed&&!Qn(i)&&Nr(i,ht(this.cm.display))}if(this.collapsed&&!this.cm.options.lineWrapping)for(var r=0;r<this.lines.length;++r){var o=Kn(e.doc,this.lines[r]),u=O(e.doc,o);u>e.maxLineLength&&(e.maxLine=o,e.maxLineLength=u,e.maxLineChanged=!0)}t!=null&&gt(this.cm,t,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.cm.view.cantEdit&&(this.cm.view.cantEdit=!1,ln(this.cm)),vt(this.cm),Wr(this.cm,this,"clear")},jn.prototype.find=function(){var e,t;for(var n=0;n<this.lines.length;++n){var r=this.lines[n],i=In(r.markedSpans,this);if(i.from!=null||i.to!=null){var s=Cr(r);i.from!=null&&(e={line:s,ch:i.from}),i.to!=null&&(t={line:s,ch:i.to})}}return this.type=="bookmark"?e:e&&{from:e,to:t}},jn.prototype.getOptions=function(e){var t=this.replacedWith;return{className:this.className,inclusiveLeft:this.inclusiveLeft,inclusiveRight:this.inclusiveRight,atomic:this.atomic,collapsed:this.collapsed,clearOnEnter:this.clearOnEnter,replacedWith:e?t&&t.cloneNode(!0):t,readOnly:this.readOnly,startStyle:this.startStyle,endStyle:this.endStyle}};var rr=E.LineWidget=function(e,t,n){for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this.node=t};rr.prototype.clear=ir(function(){var e=this.line.widgets,t=Cr(this.line);if(t==null||!e)return;for(var n=0;n<e.length;++n)e[n]==this&&e.splice(n--,1);Nr(this.line,Math.max(0,this.line.height-sr(this))),gt(this.cm,t,t+1)}),rr.prototype.changed=ir(function(){var e=this.height;this.height=null;var t=sr(this)-e;if(!t)return;Nr(this.line,this.line.height+t);var n=Cr(this.line);gt(this.cm,n,n+1)});var dr={},gr=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;Sr.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var r=e,i=e+t;r<i;++r){var s=this.lines[r];this.height-=s.height,fr(s),Wr(n,s,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0,i=t.length;r<i;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},xr.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<s){var o=Math.min(t,s-e),u=i.height;i.remove(e,o,n),this.height-=u-i.height,s==o&&(this.children.splice(r--,1),i.parent=null);if((t-=o)==0)break;e=0}else e-=s}if(this.size-t<25){var a=[];this.collapse(a),this.children=[new Sr(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;t<n;++t)this.children[t].collapse(e)},insert:function(e,t){var n=0;for(var r=0,i=t.length;r<i;++r)n+=t[r].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<=o){s.insertHeight(e,t,n);if(s.lines&&s.lines.length>50){while(s.lines.length>50){var u=s.lines.splice(s.lines.length-25,25),a=new Sr(u);s.height-=a.height,this.children.splice(r+1,0,a),a.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new xr(t);if(!e.parent){var r=new xr(e.children);r.parent=e,e.children=[r,n],e=r}else{e.size-=n.size,e.height-=n.height;var i=ei(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<o){var u=Math.min(t,o-e);if(s.iterN(e,u,n))return!0;if((t-=u)==0)break;e=0}else e-=o}}},E.e_stop=jr,E.e_preventDefault=Hr,E.e_stopPropagation=Br,E.on=Rr,E.off=Ur,E.signal=zr;var Vr=30,$r=E.Pass={toString:function(){return"CodeMirror.Pass"}};Jr.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},E.countColumn=Kr;var Qr=[""],ri=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,oi=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F]/,ci=function(){if(r)return!1;var e=ui("div");return"draggable"in e||"dragDrop"in e}(),hi=/^$/;e?hi=/$'/:a?hi=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:o&&(hi=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var pi,vi,gi="\n\nb".split(/\n/).length!=3?function(e){var t=0,n=[],r=e.length;while(t<=r){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var s=e.slice(t,e.charAt(i-1)=="\r"?i-1:i),o=s.indexOf("\r");o!=-1?(n.push(s.slice(0,o)),t+=o+1):(n.push(s),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)};E.splitLines=gi;var yi=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},bi=function(){var e=ui("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),wi={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};E.keyNames=wi,function(){for(var e=0;e<10;e++)wi[e+48]=String(e);for(var e=65;e<=90;e++)wi[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)wi[e+111]=wi[e+63235]="F"+e}();var Oi=function(){function n(n){return n<=255?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1791?t.charAt(n-1536):1792<=n&&n<=2220?"r":"L"}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,s=/[LRr]/,o=/[Lb1n]/,u=/[1n]/,a="L";return function(t){if(!r.test(t))return!1;var f=t.length,l=[];for(var c=0,h;c<f;++c)l.push(h=n(t.charCodeAt(c)));for(var c=0,p=a;c<f;++c){var h=l[c];h=="m"?l[c]=p:p=h}for(var c=0,d=a;c<f;++c){var h=l[c];h=="1"&&d=="r"?l[c]="n":s.test(h)&&(d=h,h=="r"&&(l[c]="R"))}for(var c=1,p=l[0];c<f-1;++c){var h=l[c];h=="+"&&p=="1"&&l[c+1]=="1"?l[c]="1":h==","&&p==l[c+1]&&(p=="1"||p=="n")&&(l[c]=p),p=h}for(var c=0;c<f;++c){var h=l[c];if(h==",")l[c]="N";else if(h=="%"){for(var v=c+1;v<f&&l[v]=="%";++v);var m=c&&l[c-1]=="!"||v<f-1&&l[v]=="1"?"1":"N";for(var g=c;g<v;++g)l[g]=m;c=v-1}}for(var c=0,d=a;c<f;++c){var h=l[c];d=="L"&&h=="1"?l[c]="L":s.test(h)&&(d=h)}for(var c=0;c<f;++c)if(i.test(l[c])){for(var v=c+1;v<f&&i.test(l[v]);++v);var y=(c?l[c-1]:a)=="L",b=(v<f-1?l[v]:a)=="L",m=y||b?"L":"R";for(var g=c;g<v;++g)l[g]=m;c=v-1}var w=[],E;for(var c=0;c<f;)if(o.test(l[c])){var S=c;for(++c;c<f&&o.test(l[c]);++c);w.push({from:S,to:c,level:0})}else{var x=c,T=w.length;for(++c;c<f&&l[c]!="L";++c);for(var g=x;g<c;)if(u.test(l[g])){x<g&&w.splice(T,0,{from:x,to:g,level:1});var N=g;for(++g;g<c&&u.test(l[g]);++g);w.splice(T,0,{from:N,to:g,level:2}),x=g}else++g;x<c&&w.splice(T,0,{from:x,to:c,level:1})}return w[0].level==1&&(E=t.match(/^\s+/))&&(
w[0].from=E[0].length,w.unshift({from:0,to:E[0].length,level:0})),Yr(w).level==1&&(E=t.match(/\s+$/))&&(Yr(w).to-=E[0].length,w.push({from:f-E[0].length,to:f,level:0})),w[0].level!=Yr(w).level&&w.push({from:f,to:f,level:w[0].level}),w}}();return E.version="3.02",E}(),CodeMirror.defineMode("css",function(e){function a(e){var t={};for(var n=0;n<e.length;++n)t[e[n]]=!0;return t}function f(e,t){return n=t,e}function l(e,t){var n=e.next();if(n=="@")return e.eatWhile(/[\w\\\-]/),f("def",e.current());if(n=="/"&&e.eat("*"))return t.tokenize=c,c(e,t);if(n=="<"&&e.eat("!"))return t.tokenize=h,h(e,t);if(n=="=")f(null,"compare");else{if(!(n!="~"&&n!="|"||!e.eat("=")))return f(null,"compare");if(n=='"'||n=="'")return t.tokenize=p(n),t.tokenize(e,t);if(n=="#")return e.eatWhile(/[\w\\\-]/),f("atom","hash");if(n=="!")return e.match(/^\s*\w*/),f("keyword","important");if(/\d/.test(n))return e.eatWhile(/[\w.%]/),f("number","unit");if(n!=="-")return/[,+>*\/]/.test(n)?f(null,"select-op"):n=="."&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?f("qualifier","qualifier"):n==":"?f("operator",n):/[;{}\[\]\(\)]/.test(n)?f(null,n):n=="u"&&e.match("rl(")?(e.backUp(1),t.tokenize=d,f("property","variable")):(e.eatWhile(/[\w\\\-]/),f("property","variable"));if(/\d/.test(e.peek()))return e.eatWhile(/[\w.%]/),f("number","unit");if(e.match(/^[^-]+-/))return f("meta","meta")}}function c(e,t){var n=!1,r;while((r=e.next())!=null){if(n&&r=="/"){t.tokenize=l;break}n=r=="*"}return f("comment","comment")}function h(e,t){var n=0,r;while((r=e.next())!=null){if(n>=2&&r==">"){t.tokenize=l;break}n=r=="-"?n+1:0}return f("comment","comment")}function p(e,t){return function(n,r){var i=!1,s;while((s=n.next())!=null){if(s==e&&!i)break;i=!i&&s=="\\"}return i||(t&&n.backUp(1),r.tokenize=l),f("string","string")}}function d(e,t){return e.next(),e.match(/\s*[\"\']/,!1)?t.tokenize=l:t.tokenize=p(")",!0),f(null,"(")}var t=e.indentUnit,n,r=a(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]),i=a(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]),s=a(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-shadow","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"]),o=a(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua"]),u=a(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","navy","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","overlay","overline","padding","padding-box","painted","paused","persian","plus-darker","plus-lighter","pointer","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","white","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small","yellow"]);return{startState:function(e){return{tokenize:l,baseIndent:e||0,stack:[]}},token:function(e,t){if(t.tokenize==l&&e.eatSpace())return null;var a=t.tokenize(e,t),f=t.stack[t.stack.length-1];return a=="property"?f=="propertyValue"?u[e.current()]?a="string-2":o[e.current()]?a="keyword":a="variable-2":f=="rule"?s[e.current()]||(a+=" error"):!f||f=="@media{"?a="tag":f=="@media"?r[e.current()]?a="attribute":/^(only|not)$/i.test(e.current())?a="keyword":e.current().toLowerCase()=="and"?a="error":i[e.current()]?a="error":a="attribute error":f=="@mediaType"?r[e.current()]?a="attribute":e.current().toLowerCase()=="and"?a="operator":/^(only|not)$/i.test(e.current())?a="error":i[e.current()]?a="error":a="error":f=="@mediaType("?s[e.current()]||(r[e.current()]?a="error":e.current().toLowerCase()=="and"?a="operator":/^(only|not)$/i.test(e.current())?a="error":a+=" error"):a="error":a=="atom"?!f||f=="@media{"?a="builtin":f=="propertyValue"?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e.current())||(a+=" error"):a="error":f=="@media"&&n=="{"&&(a="error"),n=="{"?f=="@media"||f=="@mediaType"?(t.stack.pop(),t.stack[t.stack.length-1]="@media{"):t.stack.push("rule"):n=="}"?(t.stack.pop(),f=="propertyValue"&&t.stack.pop()):n=="@media"?t.stack.push("@media"):f=="@media"&&/\b(keyword|attribute)\b/.test(a)?t.stack.push("@mediaType"):f=="@mediaType"&&e.current()==","?t.stack.pop():f=="@mediaType"&&n=="("?t.stack.push("@mediaType("):f=="@mediaType("&&n==")"?t.stack.pop():f=="rule"&&n==":"?t.stack.push("propertyValue"):f=="propertyValue"&&n==";"&&t.stack.pop(),a},indent:function(e,n){var r=e.stack.length;return/^\}/.test(n)&&(r-=e.stack[e.stack.length-1]=="propertyValue"?2:1),e.baseIndent+r*t},electricChars:"}"}}),CodeMirror.defineMIME("text/css","css"),CodeMirror.defineMode("coffeescript",function(e){function n(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function y(e,n){if(e.sol()){var c=n.scopes[0].offset;if(e.eatSpace()){var h=e.indentation();return h>c?"indent":h<c?"dedent":null}c>0&&S(e,n)}if(e.eatSpace())return null;var m=e.peek();if(e.match("####"))return e.skipToEnd(),"comment";if(e.match("###"))return n.tokenize=w,n.tokenize(e,n);if(m==="#")return e.skipToEnd(),"comment";if(e.match(/^-?[0-9\.]/,!1)){var y=!1;e.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)&&(y=!0),e.match(/^-?\d+\.\d*/)&&(y=!0),e.match(/^-?\.\d+/)&&(y=!0);if(y)return e.peek()=="."&&e.backUp(1),"number";var E=!1;e.match(/^-?0x[0-9a-f]+/i)&&(E=!0),e.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)&&(E=!0),e.match(/^-?0(?![\dx])/i)&&(E=!0);if(E)return"number"}if(e.match(d))return n.tokenize=b(e.current(),"string"),n.tokenize(e,n);if(e.match(v)){if(e.current()!="/"||e.match(/^.*\//,!1))return n.tokenize=b(e.current(),"string-2"),n.tokenize(e,n);e.backUp(1)}return e.match(u)||e.match(o)?"punctuation":e.match(s)||e.match(r)||e.match(l)?"operator":e.match(i)?"punctuation":e.match(g)?"atom":e.match(p)?"keyword":e.match(a)?"variable":e.match(f)?"property":(e.next(),t)}function b(n,r){var i=n.length==1;return function(o,u){while(!o.eol()){o.eatWhile(/[^'"\/\\]/);if(o.eat("\\")){o.next();if(i&&o.eol())return r}else{if(o.match(n))return u.tokenize=y,r;o.eat(/['"\/]/)}}return i&&(e.mode.singleLineStringErrors?r=t:u.tokenize=y),r}}function w(e,t){while(!e.eol()){e.eatWhile(/[^#]/);if(e.match("###")){t.tokenize=y;break}e.eatWhile("#")}return"comment"}function E(t,n,r){r=r||"coffee";var i=0;if(r==="coffee"){for(var s=0;s<n.scopes.length;s++)if(n.scopes[s].type==="coffee"){i=n.scopes[s].offset+e.indentUnit;break}}else i=t.column()+t.current().length;n.scopes.unshift({offset:i,type:r})}function S(e,t){if(t.scopes.length==1)return;if(t.scopes[0].type==="coffee"){var n=e.indentation(),r=-1;for(var i=0;i<t.scopes.length;++i)if(n===t.scopes[i].offset){r=i;break}if(r===-1)return!0;while(t.scopes[0].offset!==n)t.scopes.shift();return!1}return t.scopes.shift(),!1}function x(e,n){var r=n.tokenize(e,n),i=e.current();if(i===".")return r=n.tokenize(e,n),i=e.current(),r==="variable"?"variable":t;i==="return"&&(n.dedent+=1),((i==="->"||i==="=>")&&!n.lambda&&n.scopes[0].type=="coffee"&&e.peek()===""||r==="indent")&&E(e,n);var s="[({".indexOf(i);return s!==-1&&E(e,n,"])}".slice(s,s+1)),c.exec(i)&&E(e,n),i=="then"&&S(e,n),r==="dedent"&&S(e,n)?t:(s="])}".indexOf(i),s!==-1&&S(e,n)?t:(n.dedent>0&&e.eol()&&n.scopes[0].type=="coffee"&&(n.scopes.length>1&&n.scopes.shift(),n.dedent-=1),r))}var t="error",r=new RegExp("^[\\+\\-\\*/%&|\\^~<>!?]"),i=new RegExp("^[\\(\\)\\[\\]\\{\\},:`=;\\.]"),s=new RegExp("^((->)|(=>)|(\\+\\+)|(\\+\\=)|(\\-\\-)|(\\-\\=)|(\\*\\*)|(\\*\\=)|(\\/\\/)|(\\/\\=)|(==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//))"),o=new RegExp("^((\\.\\.)|(\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),u=new RegExp("^((\\.\\.\\.)|(//=)|(>>=)|(<<=)|(\\*\\*=))"),a=new RegExp("^[_A-Za-z$][_A-Za-z$0-9]*"),f=new RegExp("^(@|this.)[_A-Za-z$][_A-Za-z$0-9]*"),l=n(["and","or","not","is","isnt","in","instanceof","typeof"]),c=["for","while","loop","if","unless","else","switch","try","catch","finally","class"],h=["break","by","continue","debugger","delete","do","in","of","new","return","then","this","throw","when","until"],p=n(c.concat(h));c=n(c);var d=new RegExp("^('{3}|\"{3}|['\"])"),v=new RegExp("^(/{3}|/)"),m=["Infinity","NaN","undefined","null","true","false","on","off","yes","no"],g=n(m),T={startState:function(e){return{tokenize:y,scopes:[{offset:e||0,type:"coffee"}],lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var n=x(e,t);return t.lastToken={style:n,content:e.current()},e.eol()&&e.lambda&&(t.lambda=!1),n},indent:function(e){return e.tokenize!=y?0:e.scopes[0].offset}};return T}),CodeMirror.defineMIME("text/x-coffeescript","coffeescript"),CodeMirror.defineMode("javascript",function(e,t){function u(e,t,n){return t.tokenize=n,n(e,t)}function a(e,t){var n=!1,r;while((r=e.next())!=null){if(r==t&&!n)return!1;n=!n&&r=="\\"}return n}function c(e,t,n){return f=e,l=n,t}function h(e,t){var n=e.next();if(n=='"'||n=="'")return u(e,t,p(n));if(/[\[\]{}\(\),;\:\.]/.test(n))return c(n);if(n=="0"&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),c("number","number");if(/\d/.test(n)||n=="-"&&e.eat(/\d/))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),c("number","number");if(n=="/")return e.eat("*")?u(e,t,d):e.eat("/")?(e.skipToEnd(),c("comment","comment")):t.lastType=="operator"||t.lastType=="keyword c"||/^[\[{}\(,;:]$/.test(t.lastType)?(a(e,"/"),e.eatWhile(/[gimy]/),c("regexp","string-2")):(e.eatWhile(o),c("operator",null,e.current()));if(n=="#")return e.skipToEnd(),c("error","error");if(o.test(n))return e.eatWhile(o),c("operator",null,e.current());e.eatWhile(/[\w\$_]/);var r=e.current(),i=s.propertyIsEnumerable(r)&&s[r];return i&&t.lastType!="."?c(i.type,i.style,r):c("variable","variable",r)}function p(e){return function(t,n){return a(t,e)||(n.tokenize=h),c("string","string")}}function d(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=h;break}n=r=="*"}return c("comment","comment")}function m(e,t,n,r,i,s){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=s,r!=null&&(this.align=r)}function g(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function y(e,t,n,i,s){var o=e.cc;b.state=e,b.stream=s,b.marked=null,b.cc=o,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);for(;;){var u=o.length?o.pop():r?O:A;if(u(n,i)){while(o.length&&o[o.length-1].lex)o.pop()();return b.marked?b.marked:n=="variable"&&g(e,i)?"variable-2":t}}}function w(){for(var e=arguments.length-1;e>=0;e--)b.cc.push(arguments[e])}function E(){return w.apply(null,arguments),!0}function S(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var n=b.state;if(n.context){b.marked="def";if(t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;n.globalVars={name:e,next:n.globalVars}}}function T(){b.state.context={prev:b.state.context,vars:b.state.localVars},b.state.localVars=x}function N(){b.state.localVars=b.state.context.vars,b.state.context=b.state.context.prev}function C(e,t){var n=function(){var n=b.state;n.lexical=new m(n.indented,b.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function k(){var e=b.state;e.lexical.prev&&(e.lexical.type==")"&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function L(e){return function(n){return n==e?E():e==";"?w():E(arguments.callee)}}function A(e){return e=="var"?E(C("vardef"),q,L(";"),k):e=="keyword a"?E(C("form"),O,A,k):e=="keyword b"?E(C("form"),A,k):e=="{"?E(C("}"),j,k):e==";"?E():e=="function"?E(V):e=="for"?E(C("form"),L("("),C(")"),U,L(")"),k,A,k):e=="variable"?E(C("stat"),D):e=="switch"?E(C("form"),O,C("}","switch"),L("{"),j,k,k):e=="case"?E(O,L(":")):e=="default"?E(L(":")):e=="catch"?E(C("form"),T,L("("),$,L(")"),A,k,N):w(C("stat"),O,L(";"),k)}function O(e){return v.hasOwnProperty(e)?E(_):e=="function"?E(V):e=="keyword c"?E(M):e=="("?E(C(")"),M,L(")"),k,_):e=="operator"?E(O):e=="["?E(C("]"),B(O,"]"),k,_):e=="{"?E(C("}"),B(H,"}"),k,_):E()}function M(e){return e.match(/[;\}\)\],]/)?w():w(O)}function _(e,t){if(e=="operator"&&/\+\+|--/.test(t))return E(_);if(e=="operator"&&t=="?")return E(O,L(":"),O);if(e==";")return;if(e=="(")return E(C(")"),B(O,")"),k,_);if(e==".")return E(P,_);if(e=="[")return E(C("]"),O,L("]"),k,_)}function D(e){return e==":"?E(k,A):w(_,L(";"),k)}function P(e){if(e=="variable")return b.marked="property",E()}function H(e){e=="variable"&&(b.marked="property");if(v.hasOwnProperty(e))return E(L(":"),O)}function B(e,t){function n(r){return r==","?E(e,n):r==t?E():E(L(t))}return function(i){return i==t?E():w(e,n)}}function j(e){return e=="}"?E():w(A,j)}function F(e){return e==":"?E(I):w()}function I(e){return e=="variable"?(b.marked="variable-3",E()):w()}function q(e,t){return e=="variable"?(S(t),i?E(F,R):E(R)):w()}function R(e,t){if(t=="=")return E(O,R);if(e==",")return E(q)}function U(e){return e=="var"?E(q,L(";"),W):e==";"?E(W):e=="variable"?E(z):E(W)}function z(e,t){return t=="in"?E(O):E(_,W)}function W(e,t){return e==";"?E(X):t=="in"?E(O):E(O,L(";"),X)}function X(e){e!=")"&&E(O)}function V(e,t){if(e=="variable")return S(t),E(V);if(e=="(")return E(C(")"),T,B($,")"),k,A,N)}function $(e,t){if(e=="variable")return S(t),i?E(F):E()}var n=e.indentUnit,r=t.json,i=t.typescript,s=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),s=e("operator"),o={type:"atom",style:"atom"},u={"if":t,"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":s,"typeof":s,"instanceof":s,"true":o,"false":o,"null":o,"undefined":o,NaN:o,Infinity:o};if(i){var a={type:"variable",style:"variable-3"},f={"interface":e("interface"),"class":e("class"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),"super":e("super"),string:a,number:a,bool:a,any:a};for(var l in f)u[l]=f[l]}return u}(),o=/[+\-*&%=<>!?|]/,f,l,v={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},b={state:null,column:null,marked:null,cc:null},x={name:"this",next:{name:"arguments"}};return k.lex=!0,{startState:function(e){return{tokenize:h,lastType:null,cc:[],lexical:new m((e||0)-n,0,"block",!1),localVars:t.localVars,globalVars:t.globalVars,context:t.localVars&&{vars:t.localVars},indented:0}},token:function(e,t){e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation());if(e.eatSpace())return null;var n=t.tokenize(e,t);return f=="comment"?n:(t.lastType=f,y(t,n,f,l,e))},indent:function(e,t){if(e.tokenize==d)return CodeMirror.Pass;if(e.tokenize!=h)return 0;var r=t&&t.charAt(0),i=e.lexical;i.type=="stat"&&r=="}"&&(i=i.prev);var s=i.type,o=r==s;return s=="vardef"?i.indented+(e.lastType=="operator"||e.lastType==","?4:0):s=="form"&&r=="{"?i.indented:s=="form"?i.indented+n:s=="stat"?i.indented+(e.lastType=="operator"||e.lastType==","?n:0):i.info=="switch"&&!o?i.indented+(/^(?:case|default)\b/.test(t)?n:2*n):i.align?i.column+(o?0:1):i.indented+(o?0:n)},electricChars:":{}",jsonMode:r}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0}),function(){"use strict";var e=[{keys:["Left"],type:"keyToKey",toKeys:["h"]},{keys:["Right"],type:"keyToKey",toKeys:["l"]},{keys:["Up"],type:"keyToKey",toKeys:["k"]},{keys:["Down"],type:"keyToKey",toKeys:["j"]},{keys:["Space"],type:"keyToKey",toKeys:["l"]},{keys:["Backspace"],type:"keyToKey",toKeys:["h"]},{keys:["Ctrl-Space"],type:"keyToKey",toKeys:["W"]},{keys:["Ctrl-Backspace"],type:"keyToKey",toKeys:["B"]},{keys:["Shift-Space"],type:"keyToKey",toKeys:["w"]},{keys:["Shift-Backspace"],type:"keyToKey",toKeys:["b"]},{keys:["Ctrl-n"],type:"keyToKey",toKeys:["j"]},{keys:["Ctrl-p"],type:"keyToKey",toKeys:["k"]},{keys:["Ctrl-["],type:"keyToKey",toKeys:["Esc"]},{keys:["Ctrl-c"],type:"keyToKey",toKeys:["Esc"]},{keys:["s"],type:"keyToKey",toKeys:["c","l"]},{keys:["S"],type:"keyToKey",toKeys:["c","c"]},{keys:["Home"],type:"keyToKey",toKeys:["0"]},{keys:["End"],type:"keyToKey",toKeys:["$"]},{keys:["PageUp"],type:"keyToKey",toKeys:["Ctrl-b"]},{keys:["PageDown"],type:"keyToKey",toKeys:["Ctrl-f"]},{keys:["h"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:["l"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:["j"],type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:["k"],type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:["w"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:["W"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:["e"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:["E"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:["b"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:["B"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:["g","e"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:["g","E"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:["{"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1}},{keys:["}"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0}},{keys:["Ctrl-f"],type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:["Ctrl-b"],type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:["g","g"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0}},{keys:["G"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0}},{keys:["0"],type:"motion",motion:"moveToStartOfLine"},{keys:["^"],type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["$"],type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:["%"],type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0}},{keys:["f","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:["F","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:["t","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:["T","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:["'","character"],type:"motion",motion:"goToMark"},{keys:["`","character"],type:"motion",motion:"goToMark"},{keys:["|"],type:"motion",motion:"moveToColumn",motionArgs:{}},{keys:["d"],type:"operator",operator:"delete"},{keys:["y"],type:"operator",operator:"yank"},{keys:["c"],type:"operator",operator:"change",operatorArgs:{enterInsertMode:!0}},{keys:[">"],type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:["<"],type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:["g","~"],type:"operator",operator:"swapcase"},{keys:["n"],type:"motion",motion:"findNext"},{keys:["N"],type:"motion",motion:"findPrev"},{keys:["x"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:["X"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:["D"],type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["Y"],type:"operatorMotion",operator:"yank",motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["C"],type:"operatorMotion",operator:"change",operatorArgs:{enterInsertMode:!0},motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["~"],type:"operatorMotion",operator:"swapcase",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:["a"],type:"action",action:"enterInsertMode",actionArgs:{insertAt:"charAfter"}},{keys:["A"],type:"action",action:"enterInsertMode",actionArgs:{insertAt:"eol"}},{keys:["i"],type:"action",action:"enterInsertMode"},{keys:["I"],type:"action",action:"enterInsertMode",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["o"],type:"action",action:"newLineAndEnterInsertMode",actionArgs:{after:!0}},{keys:["O"],type:"action",action:"newLineAndEnterInsertMode",actionArgs:{after:!1}},{keys:["v"],type:"action",action:"toggleVisualMode"},{keys:["V"],type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:["J"],type:"action",action:"joinLines"},{keys:["p"],type:"action",action:"paste",actionArgs:{after:!0}},{keys:["P"],type:"action",action:"paste",actionArgs:{after:!1}},{keys:["r","character"],type:"action",action:"replace"},{keys:["u"],type:"action",action:"undo"},{keys:["Ctrl-r"],type:"action",action:"redo"},{keys:["m","character"],type:"action",action:"setMark"},{keys:['"',"character"],type:"action",action:"setRegister"},{keys:[",","/"],type:"action",action:"clearSearchHighlight"},{keys:["a","character"],type:"motion",motion:"textObjectManipulation"},{keys:["i","character"],type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:["/"],type:"search",searchArgs:{forward:!0,querySrc:"prompt"}},{keys:["?"],type:"search",searchArgs:{forward:!1,querySrc:"prompt"}},{keys:["*"],type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor"}},{keys:["#"],type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor"}},{keys:[":"],type:"ex"}],t=function(){function a(e,t){var n=[];for(var r=e;r<e+t;r++)n.push(String.fromCharCode(r));return n}function g(e){return r.test(e)}function y(e,t){return t>=0&&t<e.lineCount()}function b(e){return/^[a-z]$/.test(e)}function w(e){return"()[]{}".indexOf(e)!=-1}function E(e){return i.test(e)}function S(e){return/^[A-Z]$/.test(e)}function x(e){return/^[\w]$/.test(e)}function T(e){return s.test(e)}function N(e){return/^\s*$/.test(e)}function C(e,t,n){return e>=t&&e<=n}function k(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function A(){return L||(L={searchQuery:null,searchIsReversed:!1,registerController:new P({})}),L}function O(e){return e.vimState||(e.vimState={inputState:new _,lastHPos:-1,lastMotion:null,marks:{},visualMode:!1,visualLine:!1}),e.vimState}function _(){this.reset()}function D(e,t){this.clear(),e&&this.set(e,t)}function P(e){this.registers=e,this.unamedRegister=e['"']=new D}function q(e,t,n){var r=Math.min(Math.max(0,t.line),e.lineCount()-1),i=G(e,r)-1;i=n?i+1:i;var s=Math.min(Math.max(0,t.ch),i);return{line:r,ch:s}}function R(e,t){for(var n in t)t.hasOwnProperty
(n)&&(e[n]=t[n])}function U(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function z(e,t,n){return{line:e.line+t,ch:e.ch+n}}function W(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function X(e,t){for(var n=0;n<e.length;n++)if(e[n]!=t[n]&&t[n]!="character")return!1;return!0}function V(e,t){for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function $(e,t,n){return function(){for(var r=0;r<n;r++)t(e)}}function J(e){return{line:e.line,ch:e.ch}}function K(e,t){return e.ch==t.ch&&e.line==t.line}function Q(e,t){return e.line<t.line?!0:e.line==t.line&&e.ch<t.ch?!0:!1}function G(e,t){return e.getLine(t).length}function Y(e){return e.split("").reverse().join("")}function Z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function et(e){return e.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function tt(e,t){t.visualMode=!1,t.visualLine=!1;var n=e.getCursor("anchor"),r=e.getCursor("head");K(n,r)||e.setCursor(q(e,r))}function nt(e,t,n){var r=e.getRange(t,n),i=r.split("\n");i.length>1&&N(i.pop())&&(n.line--,n.ch=G(e,n.line))}function rt(e,t,n){t.ch=0,n.ch=0,n.line++}function it(e){if(!e)return 0;var t=e.search(/\S/);return t==-1?e.length:t}function st(e,t,n,r,i){var s=e.getCursor(),o=e.getLine(s.line),u=s.ch,a=o.substring(u),f;i?f=a.search(/\w/):f=a.search(/\S/);if(f==-1)return null;u+=f,a=o.substring(u);var l=o.substring(0,u),c;r?c=/^\S+/:/\w/.test(o.charAt(u))?c=/^\w+/:c=/^[^\w\s]+/;var h=c.exec(a),p=u,d=u+h[0].length-1,v=c.exec(Y(l));return v&&(p-=v[0].length),t&&d++,{start:{line:s.line,ch:p},end:{line:s.line,ch:d}}}function ot(e,t,n,r){var i=t.line,s=t.ch,a=e.getLine(i),f=n?1:-1,l=r?u:o;for(;;){var c=f>0?a.length:-1,h=c,p=c;while(s!=c){var d=!1;for(var v=0;v<l.length&&!d;++v)if(l[v].test(a.charAt(s))){h=s;while(s!=c&&l[v].test(a.charAt(s)))s+=f;p=s,d=h!=p;if(h==t.ch&&i==t.line&&p==h+f)continue;return{from:Math.min(h,p+1),to:Math.max(h,p),line:i}}d||(s+=f)}i+=f;if(!y(e,i))return null;a=e.getLine(i),s=f>0?0:a.length}throw"The impossible happened."}function ut(e,t,n,r,i){var s=e.getCursor();for(var o=0;o<t;o++){var u=s.ch,a=s.line,f,l=!1;while(!l){f=ot(e,s,n,i),l=!0;if(!f)return n?{line:s.line,ch:G(e,s.line)}:{line:s.line,ch:0};s.line=f.line,n&&r?s.ch=f.to-1:n&&!r?C(s.ch,f.from,f.to)&&f.line==a?(l=!1,s.ch=f.to-1):s.ch=f.from:!n&&r?C(s.ch,f.from,f.to)&&f.line==a?(l=!1,s.ch=f.from):s.ch=f.to:!n&&!r&&(s.ch=f.from)}}return s}function at(e,t,n,r){var i=e.getCursor(),s=i.ch,o;for(var u=0;u<t;u++){var a=e.getLine(i.line);o=ct(s,a,r,n,!0);if(o==-1)return i;s=o}return{line:e.getCursor().line,ch:o}}function ft(e,t){var n=e.getCursor().line;return q(e,{line:n,ch:t-1})}function lt(e,t,n,r){if(!k(n,v))return;t.marks[n]&&t.marks[n].clear(),t.marks[n]=e.setBookmark(r)}function ct(e,t,n,r,i){var s;return r?(s=t.indexOf(n,e+1),s!=-1&&!i&&(s-=1)):(s=t.lastIndexOf(n,e-1),s!=-1&&!i&&(s+=1)),s}function ht(e,t,n){var r=t.line;n=n?n:e.getLine(r).charAt(t.ch);var i=k(n,["(","[","{"]),s={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{"}[n];if(!s)return t;var o={"(":1,"{":1,"[":1}[n]||-1,u=1,a=n,f=t.ch,l=e.getLine(r);while(a&&u>0)f+=o,a=l.charAt(f),a||(r+=o,f=0,l=e.getLine(r)||"",a=l.charAt(f)),a===n?u++:a===s&&u--;return a?{line:r,ch:f}:t}function pt(e,t,n){var r=e.getCursor(),i=ht(e,r,t),s=ht(e,i);return s.ch+=n?1:0,i.ch+=n?0:1,{start:s,end:i}}function dt(e,t,n){for(var r=n?n:e.length;r>=0;--r)if(t.test(e.charAt(r)))return r;return-1}function vt(e,t,n){var r=e.getCursor(),i=e.getLine(r.line),s=i.split(""),o,u,a,f,l=s.indexOf(t);r.ch<l?r.ch=l:l<r.ch&&s[r.ch]==t&&(u=r.ch,--r.ch);if(s[r.ch]==t&&!u)o=r.ch+1;else for(a=r.ch;a>-1&&!o;a--)s[a]==t&&(o=a+1);if(o&&!u)for(a=o,f=s.length;a<f&&!u;a++)s[a]==t&&(u=a);return!o||!u?{start:r,end:r}:(n&&(--o,++u),{start:{line:r.line,ch:o},end:{line:r.line,ch:u}})}function mt(){this.marked=null}function gt(e){var t=O(e);return t.searchState_||(t.searchState_=new mt)}function yt(e,t,n,r,i){e.openDialog?e.openDialog(t,r,{bottom:!0,value:i}):r(prompt(n,""))}function bt(e){var t=!1,n=[];for(var r=0;r<e.length;r++){var i=e.charAt(r);!t&&i=="/"&&n.push(r),t=i=="\\"}return n}function wt(e,t,n,r){var i=bt(t),s,o;if(!i.length)s=t;else{s=t.substring(0,i[0]);var u=t.substring(i[0]);o=u.indexOf("i")!=-1}if(!s)return null;r&&(n=/^[^A-Z]*$/.test(s));try{var a=new RegExp(s,n||o?"i":undefined);return a}catch(f){Et(e,"Invalid regex: "+s)}}function Et(e,t){e.openConfirm?e.openConfirm('<span style="color: red">'+t+'</span> <button type="button">OK</button>',function(){},{bottom:!0}):alert(t)}function St(e,t){var n="";return e&&(n+='<span style="font-family: monospace">'+e+"</span>"),n+='<input type="text"/> <span style="color: #888">',t&&(n+='<span style="color: #888">',n+=t,n+="</span>"),n}function Tt(e,t,n,r,i){var s=(n||"")+" "+(r||"");yt(e,St(n,r),s,t,i)}function Nt(e,t){if(e instanceof RegExp&&t instanceof RegExp){var n=["global","multiline","ignoreCase","source"];for(var r=0;r<n.length;r++){var i=n[r];if(e[i]!==t[i])return!1}return!0}return!1}function Ct(e,t,n,r){e.operation(function(){var i=gt(e);if(!t)return;var s=wt(e,t,!!n,!!r);if(!s)return;if(Nt(s,i.getQuery()))return;Ot(e),Lt(e,s),i.setQuery(s)})}function kt(e){return{token:function(t){var n=t.match(e,!1);if(n){if(!t.sol()){t.backUp(1);if(!e.exec(t.next()+n[0]))return t.next(),null}return t.match(e),"searching"}while(!t.eol()){t.next();if(t.match(e,!1))break}},query:e}}function Lt(e,t){if(e.addOverlay){var n=gt(e).getOverlay();if(!n||t!=n.query)n&&e.removeOverlay(n),n=kt(t),e.addOverlay(n),gt(e).setOverlay(n)}else if(e.lineCount()<2e3){var r=[];for(var i=e.getSearchCursor(t);i.findNext();)r.push(e.markText(i.from(),i.to(),{className:"cm-searching"}));gt(e).setMarked(r)}}function At(e,t,n){return e.operation(function(){var r=gt(e),i=r.getQuery();if(!i)return;r.getMarked()||Lt(e,i);var s=e.getCursor();t=r.isReversed()?!t:t,t||(s.ch+=1);var o=e.getSearchCursor(i,s);for(var u=0;u<n;u++)if(!o.find(t)){o=e.getSearchCursor(i,t?{line:e.lineCount()-1}:{line:0,ch:0});if(!o.find(t))return}return o.from()})}function Ot(e){e.addOverlay?(e.removeOverlay(gt(e).getOverlay()),gt(e).setOverlay(null)):e.operation(function(){var t=gt(e);if(!t.getQuery())return;var n=t.getMarked();if(!n)return;for(var r=0;r<n.length;++r)n[r].clear();t.setMarked(null)})}function Mt(e,t,n){return typeof e!="number"&&(e=e.line),t instanceof Array?k(e,t):n?e>=t&&e<=n:e==t}function Dt(e){var t=0,n=[];while(t<e.length){if(e.charAt(t)!="<"){n.push(e.charAt(t)),t++;continue}var r=++t;while(e.charAt(t++)!=">");var i=e.substring(r,t-1),s=/^C-(.+)$/.exec(i);if(s){var o;switch(s[1]){case"BS":o="Backspace";break;case"CR":o="Enter";break;case"Del":o="Delete";break;default:o=s[1]}n.push("Ctrl-"+o)}}return n}function Bt(){function e(e,t,r){S(t)&&(r=="Shift"?r=null:t=t.toLowerCase()),r&&(t=r+"-"+t),n.handleKey(e,t)}function t(t,n){return function(r){e(r,t,n)}}function s(e,n){for(var r=0;r<e.length;r++){var s=e[r];!n&&k(s,p)&&(s="'"+s+"'"),n?i[n+"-"+s]=t(e[r],n):i[s]=t(e[r])}}var r=["Shift","Ctrl"],i={nofallthrough:!0,style:"fat-cursor"};return s(f),s(f,"Shift"),s(f,"Ctrl"),s(p),s(p,"Ctrl"),s(c),s(c,"Ctrl"),s(d),s(d,"Ctrl"),i}function jt(e){e.setCursor(e.getCursor().line,e.getCursor().ch-1,!0),e.setOption("keyMap","vim")}var r=/[A-Za-z]/,i=/[\d]/,s=/\s/,o=[/\w/,/[^\w\s]/],u=[/\S/],f=a(65,26),l=a(97,26),c=a(48,10),h="~`!@#$%^&*()_-+=[{}]\\|/?.,<>:;\"'",p=h.split(""),d=["Left","Right","Up","Down","Space","Backspace","Esc","Home","End","PageUp","PageDown"],v=f.concat(l).concat(c).concat(["<",">"]),m=f.concat(l).concat(c).concat('-"'.split("")),L,M={buildKeyMap:function(){},getRegisterController:function(){return A().registerController},clearVimGlobalState_:function(){L=null},map:function(e,t){Ht.map(e,t)},maybeInitState:function(e){O(e)},handleKey:function(t,n){var r,i=O(t);if(n=="Esc"){i.inputState.reset(),i.visualMode&&tt(t,i);return}i.visualMode&&K(t.getCursor("head"),t.getCursor("anchor"))&&tt(t,i),!i.visualMode&&!K(t.getCursor("head"),t.getCursor("anchor"))&&(i.visualMode=!0,i.visualLine=!1);if(n!="0"||n=="0"&&i.inputState.getRepeat()===0)r=H.matchCommand(n,e,i);if(!r){E(n)&&i.inputState.pushRepeatDigit(n);return}if(r.type=="keyToKey")for(var s=0;s<r.toKeys.length;s++)this.handleKey(t,r.toKeys[s]);else H.processCommand(t,i,r)}};_.prototype.reset=function(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null},_.prototype.pushRepeatDigit=function(e){this.operator?this.motionRepeat=this.motionRepeat.concat(e):this.prefixRepeat=this.prefixRepeat.concat(e)},_.prototype.getRepeat=function(){var e=0;if(this.prefixRepeat.length>0||this.motionRepeat.length>0)e=1,this.prefixRepeat.length>0&&(e*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(e*=parseInt(this.motionRepeat.join(""),10));return e},D.prototype={set:function(e,t){this.text=e,this.linewise=!!t},append:function(e,t){t||this.linewise?(this.text+="\n"+e,this.linewise=!0):this.text+=e},clear:function(){this.text="",this.linewise=!1},toString:function(){return this.text}},P.prototype={pushText:function(e,t,n,r){var i=this.isValidRegister(e)?this.getRegister(e):null;if(!i){switch(t){case"yank":this.registers[0]=new D(n,r);break;case"delete":case"change":n.indexOf("\n")==-1?this.registers["-"]=new D(n,r):(this.shiftNumericRegisters_(),this.registers[1]=new D(n,r))}this.unamedRegister.set(n,r);return}var s=S(e);s?(i.append(n,r),this.unamedRegister.append(n,r)):(i.set(n,r),this.unamedRegister.set(n,r))},getRegister:function(e){return this.isValidRegister(e)?(e=e.toLowerCase(),this.registers[e]||(this.registers[e]=new D),this.registers[e]):this.unamedRegister},isValidRegister:function(e){return e&&k(e,m)},shiftNumericRegisters_:function(){for(var e=9;e>=2;e--)this.registers[e]=this.getRegister(""+(e-1))}};var H={matchCommand:function(e,t,n){var r=n.inputState,i=r.keyBuffer.concat(e);for(var s=0;s<t.length;s++){var o=t[s];if(X(i,o.keys)){if(i.length<o.keys.length)return r.keyBuffer.push(e),null;if(r.operator&&o.type=="action")continue;return o.keys[i.length-1]=="character"&&(r.selectedCharacter=i[i.length-1]),r.keyBuffer=[],o}}return r.keyBuffer=[],null},processCommand:function(e,t,n){switch(n.type){case"motion":this.processMotion(e,t,n);break;case"operator":this.processOperator(e,t,n);break;case"operatorMotion":this.processOperatorMotion(e,t,n);break;case"action":this.processAction(e,t,n);break;case"search":this.processSearch(e,t,n);break;case"ex":case"keyToEx":this.processEx(e,t,n);break;default:}},processMotion:function(e,t,n){t.inputState.motion=n.motion,t.inputState.motionArgs=U(n.motionArgs),this.evalInput(e,t)},processOperator:function(e,t,n){var r=t.inputState;if(r.operator){if(r.operator==n.operator){r.motion="expandToLine",r.motionArgs={linewise:!0},this.evalInput(e,t);return}r.reset()}r.operator=n.operator,r.operatorArgs=U(n.operatorArgs),t.visualMode&&this.evalInput(e,t)},processOperatorMotion:function(e,t,n){var r=t.visualMode,i=U(n.operatorMotionArgs);i&&r&&i.visualLine&&(t.visualLine=!0),this.processOperator(e,t,n),r||this.processMotion(e,t,n)},processAction:function(e,t,n){var r=t.inputState,i=r.getRepeat(),s=!!i,o=U(n.actionArgs)||{};r.selectedCharacter&&(o.selectedCharacter=r.selectedCharacter),n.operator&&this.processOperator(e,t,n),n.motion&&this.processMotion(e,t,n),(n.motion||n.operator)&&this.evalInput(e,t),o.repeat=i||1,o.repeatIsExplicit=s,o.registerName=r.registerName,r.reset(),t.lastMotion=null,F[n.action](e,o,t)},processSearch:function(e,t,n){function s(n,r,i){Ct(e,n,r,i),H.processMotion(e,t,{type:"motion",motion:"findNext"})}function o(e){s(e,!0,!0)}if(!e.getSearchCursor)return;var r=n.searchArgs.forward;gt(e).setReversed(!r);var i=r?"/":"?";switch(n.searchArgs.querySrc){case"prompt":Tt(e,o,i,xt);break;case"wordUnderCursor":var u=st(e,!1,!0,!1,!0),a=!0;u||(u=st(e,!1,!0,!1,!1),a=!1);if(!u)return;var f=e.getLine(u.start.line).substring(u.start.ch,u.end.ch+1);a?f="\\b"+f+"\\b":f=et(f),e.setCursor(u.start),s(f,!0,!1)}},processEx:function(e,t,n){function r(t){Ht.processCommand(e,t)}n.type=="keyToEx"?Ht.processCommand(e,n.exArgs.input):t.visualMode?Tt(e,r,":",undefined,"'<,'>"):Tt(e,r,":")},evalInput:function(e,t){var n=t.inputState,r=n.motion,i=n.motionArgs||{},s=n.operator,o=n.operatorArgs||{},u=n.registerName,a=e.getCursor("head"),f=e.getCursor("anchor"),l=J(a),c=J(l),h,p;i.repeat!==undefined?p=n.motionArgs.repeat:p=n.getRepeat();if(p>0&&i.explicitRepeat)i.repeatIsExplicit=!0;else if(i.noRepeat||!i.explicitRepeat&&p===0)p=1,i.repeatIsExplicit=!1;n.selectedCharacter&&(i.selectedCharacter=o.selectedCharacter=n.selectedCharacter),i.repeat=p,n.reset();if(r){var d=B[r](e,i,t);t.lastMotion=B[r];if(!d)return;d instanceof Array?(l=d[0],h=d[1]):h=d,h||(h={ch:l.ch,line:l.line}),t.visualMode?(Q(f,a)&&(K(f,h)||Q(h,f))?f.ch+=1:Q(a,f)&&(K(f,h)||Q(f,h))&&(f.ch-=1),a=h,t.visualLine&&(Q(f,a)?(f.ch=0,a.ch=G(e,a.line)):(a.ch=0,f.ch=G(e,f.line))),e.setCursor(f),e.setSelection(f,a),lt(e,t,"<",Q(f,a)?f:a),lt(e,t,">",Q(f,a)?a:f)):s||(h=q(e,h),e.setCursor(h.line,h.ch))}if(s){var v=!1;t.lastMotion=null,o.repeat=p,t.visualMode&&(l=f,h=a,i.inclusive=!0);if(Q(h,l)){var m=l;l=h,h=m,v=!0}i.inclusive&&(!t.visualMode||!v)&&h.ch++;var g=i.linewise||t.visualMode&&t.visualLine;g?rt(e,l,h):i.forward&&nt(e,l,h),o.registerName=u,o.linewise=g,j[s](e,o,t,l,h,c),t.visualMode&&tt(e,t),o.enterInsertMode&&F.enterInsertMode(e)}}},B={expandToLine:function(e,t){var n=e.getCursor();return{line:n.line+t.repeat-1,ch:Infinity}},findNext:function(e,t,n){return At(e,!1,t.repeat)},findPrev:function(e,t,n){return At(e,!0,t.repeat)},goToMark:function(e,t,n){var r=n.marks[t.selectedCharacter];return r?r.find():null},moveByCharacters:function(e,t){var n=e.getCursor(),r=t.repeat,i=t.forward?n.ch+r:n.ch-r;return{line:n.line,ch:i}},moveByLines:function(e,t,n){var r=e.getCursor().ch;switch(n.lastMotion){case this.moveByLines:case this.moveToColumn:case this.moveToEol:r=n.lastHPos;break;default:n.lastHPos=r}var i=e.getCursor(),s=t.repeat,o=t.forward?i.line+s:i.line-s;return o<0||o>e.lineCount()-1?null:{line:o,ch:r}},moveByPage:function(e,t){var n=e.getCursor(),r=t.repeat;e.moveV(t.forward?r:-r,"page");var i=e.getCursor();return e.setCursor(n),i},moveByParagraph:function(e,t){var n=e.getCursor().line,r=t.repeat,i=t.forward?1:-1;for(var s=0;s<r;s++){if(!t.forward&&n===0||t.forward&&n==e.lineCount()-1)break;n+=i;while(n!==0&&n!=e.lineCount-1&&e.getLine(n))n+=i}return{line:n,ch:0}},moveByWords:function(e,t){return ut(e,t.repeat,!!t.forward,!!t.wordEnd,!!t.bigWord)},moveTillCharacter:function(e,t){var n=t.repeat,r=at(e,n,t.forward,t.selectedCharacter),i=t.forward?-1:1;return r.ch+=i,r},moveToCharacter:function(e,t){var n=t.repeat;return at(e,n,t.forward,t.selectedCharacter)},moveToColumn:function(e,t,n){var r=t.repeat;return n.lastHPos=r-1,ft(e,r)},moveToEol:function(e,t,n){var r=e.getCursor();return n.lastHPos=Infinity,{line:r.line+t.repeat-1,ch:Infinity}},moveToFirstNonWhiteSpaceCharacter:function(e){var t=e.getCursor(),n=e.getLine(t.line);return{line:t.line,ch:it(e.getLine(t.line))}},moveToMatchedSymbol:function(e,t){var n=e.getCursor(),r=e.getLine(n.line).charAt(n.ch);return w(r)?ht(e,e.getCursor(),t.symbol):n},moveToStartOfLine:function(e){var t=e.getCursor();return{line:t.line,ch:0}},moveToLineOrEdgeOfDocument:function(e,t){var n=t.forward?e.lineCount()-1:0;return t.repeatIsExplicit&&(n=t.repeat-1),{line:n,ch:it(e.getLine(n))}},textObjectManipulation:function(e,t){var n=t.selectedCharacter,r=!t.textObjectInner;if(!I[n])return null;var i=I[n](e,r),s=i.start,o=i.end;return[s,o]}},j={change:function(e,t,n,r,i){A().registerController.pushText(t.registerName,"change",e.getRange(r,i),t.linewise),t.linewise?(r.ch=it(e.getLine(r.line)),e.replaceRange("\n",r,i)):e.replaceRange("",r,i),e.setCursor(r)},"delete":function(e,t,n,r,i){A().registerController.pushText(t.registerName,"delete",e.getRange(r,i),t.linewise),e.replaceRange("",r,i),t.linewise?e.setCursor(B.moveToFirstNonWhiteSpaceCharacter(e)):e.setCursor(r)},indent:function(e,t,n,r,i){var s=r.line,o=i.line,u=n.visualMode?t.repeat:1;t.linewise&&o--;for(var a=s;a<=o;a++)for(var f=0;f<u;f++)e.indentLine(a,t.indentRight);e.setCursor(r),e.setCursor(B.moveToFirstNonWhiteSpaceCharacter(e))},swapcase:function(e,t,n,r,i,s){var o=e.getRange(r,i),u="";for(var a=0;a<o.length;a++){var f=o.charAt(a);u+=S(f)?f.toLowerCase():f.toUpperCase()}e.replaceRange(u,r,i),e.setCursor(s)},yank:function(e,t,n,r,i,s){A().registerController.pushText(t.registerName,"yank",e.getRange(r,i),t.linewise),e.setCursor(s)}},F={clearSearchHighlight:Ot,enterInsertMode:function(e,t){var n=t?t.insertAt:null;if(n=="eol"){var r=e.getCursor();r={line:r.line,ch:G(e,r.line)},e.setCursor(r)}else n=="charAfter"&&e.setCursor(z(e.getCursor(),0,1));e.setOption("keyMap","vim-insert")},toggleVisualMode:function(e,t,n){var r=t.repeat,i=e.getCursor(),s;n.visualMode?(i=e.getCursor("anchor"),s=e.getCursor("head"),!n.visualLine&&t.linewise?(n.visualLine=!0,i.ch=Q(i,s)?0:G(e,i.line),s.ch=Q(i,s)?G(e,s.line):0,e.setSelection(i,s)):n.visualLine&&!t.linewise?n.visualLine=!1:tt(e,n)):(n.visualMode=!0,n.visualLine=!!t.linewise,n.visualLine?(i.ch=0,s=q(e,{line:i.line+r-1,ch:G(e,i.line)},!0)):s=q(e,{line:i.line,ch:i.ch+r},!0),!t.repeatIsExplicit&&!n.visualLine?(e.setCursor(s),e.setSelection(s,i)):e.setSelection(i,s)),lt(e,n,"<",Q(i,s)?i:s),lt(e,n,">",Q(i,s)?s:i)},joinLines:function(e,t,n){var r,i;if(n.visualMode)r=e.getCursor("anchor"),i=e.getCursor("head"),i.ch=G(e,i.line)-1;else{var s=Math.max(t.repeat,2);r=e.getCursor(),i=q(e,{line:r.line+s-1,ch:Infinity})}var o=0;e.operation(function(){for(var t=r.line;t<i.line;t++){o=G(e,r.line);var n={line:r.line+1,ch:G(e,r.line+1)},s=e.getRange(r,n);s=s.replace(/\n\s*/g," "),e.replaceRange(s,r,n)}var u={line:r.line,ch:o};e.setCursor(u)})},newLineAndEnterInsertMode:function(e,t){var n=e.getCursor();if(n.line===0&&!t.after)e.replaceRange("\n",{line:0,ch:0}),e.setCursor(0,0);else{n.line=t.after?n.line:n.line-1,n.ch=G(e,n.line),e.setCursor(n);var r=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;r(e)}this.enterInsertMode(e)},paste:function(e,t,n){var r=e.getCursor(),i=A().registerController.getRegister(t.registerName);if(!i.text)return;for(var s="",o=0;o<t.repeat;o++)s+=i.text;var u=i.linewise;u?t.after?(s="\n"+s.slice(0,s.length-1),r.ch=G(e,r.line)):r.ch=0:r.ch+=t.after?1:0,e.replaceRange(s,r);var a,f;u&&t.after?a={line:r.line+1,ch:it(e.getLine(r.line+1))}:u&&!t.after?a={line:r.line,ch:it(e.getLine(r.line))}:!u&&t.after?(f=e.indexFromPos(r),a=e.posFromIndex(f+s.length-1)):(f=e.indexFromPos(r),a=e.posFromIndex(f+s.length)),e.setCursor(a)},undo:function(e,t){$(e,CodeMirror.commands.undo,t.repeat)()},redo:function(e,t){$(e,CodeMirror.commands.redo,t.repeat)()},setRegister:function(e,t,n){n.inputState.registerName=t.selectedCharacter},setMark:function(e,t,n){var r=t.selectedCharacter;lt(e,n,r,e.getCursor())},replace:function(e,t){var n=t.selectedCharacter,r=e.getCursor(),i=e.getLine(r.line),s=r.ch+t.repeat;if(s>i.length)return;var o={line:r.line,ch:s},u="";for(var a=0;a<o.ch-r.ch;a++)u+=n;e.replaceRange(u,r,o),e.setCursor(z(o,0,-1))}},I={w:function(e,t){return st(e,t,!0,!1)},W:function(e,t){return st(e,t,!0,!0)},"{":function(e,t){return pt(e,"}",t)},"(":function(e,t){return pt(e,")",t)},"[":function(e,t){return pt(e,"]",t)},"'":function(e,t){return vt(e,"'",t)},'"':function(e,t){return vt(e,'"',t)}};mt.prototype={getQuery:function(){return A().query},setQuery:function(e){A().query=e},getMarked:function(){return this.marked},setMarked:function(e){this.marked=e},getOverlay:function(){return this.searchOverlay},setOverlay:function(e){this.searchOverlay=e},isReversed:function(){return A().isReversed},setReversed:function(e){A().isReversed=e}};var xt="(Javascript regexp)",_t=[{name:"map",type:"builtIn"},{name:"write",shortName:"w",type:"builtIn"},{name:"undo",shortName:"u",type:"builtIn"},{name:"redo",shortName:"red",type:"builtIn"},{name:"substitute",shortName:"s",type:"builtIn"}];t.ExCommandDispatcher=function(){this.buildCommandMap_()},t.ExCommandDispatcher.prototype={processCommand:function(e,t){var r=new CodeMirror.StringStream(t),i={};i.input=t;try{this.parseInput_(e,r,i)}catch(s){Et(e,s);return}var o;if(!i.commandName)i.line!==undefined&&(o="move");else{var u=this.matchCommand_(i.commandName);if(u){o=u.name,this.parseCommandArgs_(r,i,u);if(u.type=="exToKey"){for(var a=0;a<u.toKeys.length;a++)n.handleKey(e,u.toKeys[a]);return}if(u.type=="exToEx"){this.processCommand(e,u.toInput);return}}}if(!o){Et(e,'Not an editor command ":'+t+'"');return}Pt[o](e,i)},parseInput_:function(e,t,n){t.eatWhile(":"),t.eat("%")?(n.line=0,n.lineEnd=e.lineCount()-1):(n.line=this.parseLineSpec_(e,t),n.line!==undefined&&t.eat(",")&&(n.lineEnd=this.parseLineSpec_(e,t)));var r=t.match(/^(\w+)/);return r?n.commandName=r[1]:n.commandName=t.match(/.*/)[0],n},parseLineSpec_:function(e,t){var n=t.match(/^(\d+)/);if(n)return parseInt(n[1],10)-1;switch(t.next()){case".":return e.getCursor().line;case"$":return e.lineCount()-1;case"'":var r=O(e).marks[t.next()];if(r&&r.find())return r.find().line;throw"Mark not set";default:return t.backUp(1),e.getCursor().line}},parseCommandArgs_:function(e,t,n){if(e.eol())return;t.argString=e.match(/.*/)[0];var r=n.argDelimiter||/\s+/,i=Z(t.argString).split(r);i.length&&i[0]&&(t.args=i)},matchCommand_:function(e){for(var t=e.length;t>0;t--){var n=e.substring(0,t);if(this.commandMap_[n]){var r=this.commandMap_[n];if(r.name.indexOf(e)===0)return r}}return null},buildCommandMap_:function(){this.commandMap_={};for(var e=0;e<_t.length;e++){var t=_t[e],n=t.shortName||t.name;this.commandMap_[n]=t}},map:function(t,n){if(t!=":"&&t.charAt(0)==":"){var r=t.substring(1);n!=":"&&n.charAt(0)==":"?this.commandMap_[r]={name:r,type:"exToEx",toInput:n.substring(1)}:this.commandMap_[r]={name:r,type:"exToKey",toKeys:Dt(n)}}else n!=":"&&n.charAt(0)==":"?e.unshift({keys:Dt(t),type:"keyToEx",exArgs:{input:n.substring(1)}}):e.unshift({keys:Dt(t),type:"keyToKey",toKeys:Dt(n)})}};var Pt={map:function(e,t){var n=t.args;if(!n||n.length<2){e&&Et(e,"Invalid mapping: "+t.input);return}Ht.map(n[0],n[1],e)},move:function(e,t){H.processMotion(e,O(e),{motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,repeat:t.line}})},substitute:function(e,t){function d(){for(var t=e.getSearchCursor(l,p);t.findNext()&&Mt(t.from(),c,h);){var n=e.getRange(t.from(),t.to()),r=n.replace(l,s);t.replace(r)}var i=O(e);i.visualMode&&tt(e,i)}var n=t.argString,r=bt(n);if(r[0]!==0){Et(e,"Substitutions should be of the form :s/pattern/replace/");return}var i=n.substring(r[0]+1,r[1]),s="",o,u;r[1]&&(s=n.substring(r[1]+1,r[2]));if(r[2]){var a=n.substring(r[2]+1).split(" ");o=a[0],u=parseInt(a[1])}o&&(i=i+"/"+o),i&&Ct(e,i,!0,!0);var f=gt(e),l=f.getQuery(),c=t.line||0,h=t.lineEnd||c;u&&(c=h,h=c+u-1);var p=q(e,{line:c,ch:0});e.compoundChange?e.compoundChange(d):e.operation(d)},redo:CodeMirror.commands.redo,undo:CodeMirror.commands.undo,write:function(e){CodeMirror.commands.save?CodeMirror.commands.save(e):e.save()}},Ht=new t.ExCommandDispatcher;return CodeMirror.keyMap.vim=Bt(),CodeMirror.keyMap["vim-insert"]={Esc:jt,"Ctrl-[":jt,"Ctrl-C":jt,"Ctrl-N":"autocomplete","Ctrl-P":"autocomplete",Enter:function(e){var t=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;t(e)},fallthrough:["default"]},M},n=t();CodeMirror.Vim=n}(),CodeMirror.defineMode("htmlmixed",function(e){function i(e,i){var s=t.token(e,i.htmlState);return/(?:^|\s)tag(?:\s|$)/.test(s)&&e.current()==">"&&i.htmlState.context&&(/^script$/i.test(i.htmlState.context.tagName)?(i.token=o,i.localState=n.startState(t.indent(i.htmlState,""))):/^style$/i.test(i.htmlState.context.tagName)&&(i.token=u,i.localState=r.startState(t.indent(i.htmlState,"")))),s}function s(e,t,n){var r=e.current(),i=r.search(t),s;if(i>-1)e.backUp(r.length-i);else if(s=r.match(/<\/?$/))e.backUp(r.length),e.match(t,!1)||e.match(r[0]);return n}function o(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=i,t.localState=null,i(e,t)):s(e,/<\/\s*script\s*>/,n.token(e,t.localState))}function u(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=i,t.localState=null,i(e,t)):s(e,/<\/\s*style\s*>/,r.token(e,t.localState))}var t=CodeMirror.getMode(e,{name:"xml",htmlMode:!0}),n=CodeMirror.getMode(e,"javascript"),r=CodeMirror.getMode(e,"css");return{startState:function(){var e=t.startState();return{token:i,localState:null,mode:"html",htmlState:e}},copyState:function(e){if(e.localState)var i=CodeMirror.copyState(e.token==u?r:n,e.localState);return{token:e.token,localState:i,mode:e.mode,htmlState:CodeMirror.copyState(t,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,s){return e.token==i||/^\s*<\//.test(s)?t.indent(e.htmlState,s):e.token==o?n.indent(e.localState,s):r.indent(e.localState,s)},electricChars:"/{}:",innerMode:function(e){var s=e.token==i?t:e.token==o?n:r;return{state:e.localState||e.htmlState,mode:s}}}},"xml","javascript","css"),CodeMirror.defineMIME("text/html","htmlmixed"),function(){}.call(this);