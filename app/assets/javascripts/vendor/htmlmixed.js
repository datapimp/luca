CodeMirror.defineMode("htmlmixed",function(e){function i(e,i){var s=t.token(e,i.htmlState);return/(?:^|\s)tag(?:\s|$)/.test(s)&&e.current()==">"&&i.htmlState.context&&(/^script$/i.test(i.htmlState.context.tagName)?(i.token=o,i.localState=n.startState(t.indent(i.htmlState,""))):/^style$/i.test(i.htmlState.context.tagName)&&(i.token=u,i.localState=r.startState(t.indent(i.htmlState,"")))),s}function s(e,t,n){var r=e.current(),i=r.search(t),s;if(i>-1)e.backUp(r.length-i);else if(s=r.match(/<\/?$/))e.backUp(r.length),e.match(t,!1)||e.match(r[0]);return n}function o(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=i,t.localState=null,i(e,t)):s(e,/<\/\s*script\s*>/,n.token(e,t.localState))}function u(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=i,t.localState=null,i(e,t)):s(e,/<\/\s*style\s*>/,r.token(e,t.localState))}var t=CodeMirror.getMode(e,{name:"xml",htmlMode:!0}),n=CodeMirror.getMode(e,"javascript"),r=CodeMirror.getMode(e,"css");return{startState:function(){var e=t.startState();return{token:i,localState:null,mode:"html",htmlState:e}},copyState:function(e){if(e.localState)var i=CodeMirror.copyState(e.token==u?r:n,e.localState);return{token:e.token,localState:i,mode:e.mode,htmlState:CodeMirror.copyState(t,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,s){return e.token==i||/^\s*<\//.test(s)?t.indent(e.htmlState,s):e.token==o?n.indent(e.localState,s):r.indent(e.localState,s)},electricChars:"/{}:",innerMode:function(e){var s=e.token==i?t:e.token==o?n:r;return{state:e.localState||e.htmlState,mode:s}}}},"xml","javascript","css"),CodeMirror.defineMIME("text/html","htmlmixed");