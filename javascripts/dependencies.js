// CodeMirror version 3.02
//
// CodeMirror is the only global var we claim
window.CodeMirror=function(){"use strict";function E(e,n){if(!(this instanceof E))return new E(e,n);this.options=n=n||{};for(var r in Sn)!n.hasOwnProperty(r)&&Sn.hasOwnProperty(r)&&(n[r]=Sn[r]);_(n);var i=this.display=S(e);i.wrapper.CodeMirror=this,A(this),n.autofocus&&!d&&St(this),this.view=x(new xr([new Sr([ur("",null,ht(i))])])),this.nextOpId=0,T(this),k(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),this.setValue(n.value||""),t&&setTimeout(ni(Et,this,!0),20),this.view.history=Mr(),Tt(this);var s;try{s=document.activeElement==i.input}catch(o){}s||n.autofocus&&!d?setTimeout(ni(Vt,this),20):$t(this),mt(this,function(){for(var e in En)En.propertyIsEnumerable(e)&&En[e](this,n[e],Tn);for(var t=0;t<Ln.length;++t)Ln[t](this)})()}function S(e){var t={},r=t.input=ui("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none;");i?r.style.width="1000px":r.setAttribute("wrap","off"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),t.inputDiv=ui("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),t.scrollbarH=ui("div",[ui("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),t.scrollbarV=ui("div",[ui("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),t.scrollbarFiller=ui("div",null,"CodeMirror-scrollbar-filler"),t.lineDiv=ui("div"),t.selectionDiv=ui("div",null,null,"position: relative; z-index: 1"),t.cursor=ui("div"," ","CodeMirror-cursor"),t.otherCursor=ui("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),t.measure=ui("div",null,"CodeMirror-measure"),t.lineSpace=ui("div",[t.measure,t.selectionDiv,t.lineDiv,t.cursor,t.otherCursor],null,"position: relative; outline: none"),t.mover=ui("div",[ui("div",[t.lineSpace],"CodeMirror-lines")],null,"position: relative"),t.sizer=ui("div",[t.mover],"CodeMirror-sizer"),t.heightForcer=ui("div"," ",null,"position: absolute; height: "+Vr+"px"),t.gutters=ui("div",null,"CodeMirror-gutters"),t.lineGutter=null;var s=ui("div",[t.sizer,t.heightForcer,t.gutters],null,"position: relative; min-height: 100%");return t.scroller=ui("div",[s],"CodeMirror-scroll"),t.scroller.setAttribute("tabIndex","-1"),t.wrapper=ui("div",[t.inputDiv,t.scrollbarH,t.scrollbarV,t.scrollbarFiller,t.scroller],"CodeMirror"),n&&(t.gutters.style.zIndex=-1,t.scroller.style.paddingRight=0),e.appendChild?e.appendChild(t.wrapper):e(t.wrapper),p&&(r.style.width="0px"),i||(t.scroller.draggable=!0),f?(t.inputDiv.style.height="1px",t.inputDiv.style.position="absolute"):n&&(t.scrollbarH.style.minWidth=t.scrollbarV.style.minWidth="18px"),t.viewOffset=t.showingFrom=t.showingTo=t.lastSizeC=0,t.lineNumWidth=t.lineNumInnerWidth=t.lineNumChars=null,t.prevInput="",t.alignWidgets=!1,t.pollingFast=!1,t.poll=new Jr,t.draggingText=!1,t.cachedCharWidth=t.cachedTextHeight=null,t.measureLineCache=[],t.measureLineCachePos=0,t.inaccurateSelection=!1,t.pasteIncoming=!1,t.wheelDX=t.wheelDY=t.wheelStartX=t.wheelStartY=null,t}function x(e){var t={line:0,ch:0};return{doc:e,frontier:0,highlight:new Jr,sel:{from:t,to:t,head:t,anchor:t,shift:!1,extend:!1},scrollTop:0,scrollLeft:0,overwrite:!1,focused:!1,maxLine:Tr(e,0),maxLineLength:0,maxLineChanged:!1,suppressEdits:!1,goalColumn:null,cantEdit:!1,keyMaps:[],overlays:[],modeGen:0}}function T(e){var t=e.view.doc;e.view.mode=E.getMode(e.options,e.options.mode),t.iter(0,t.size,function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.view.frontier=0,Q(e,100),e.view.modeGen++,e.curOp&&gt(e,0,t.size)}function N(e){var t=e.view.doc,n=ht(e.display);if(e.options.lineWrapping){e.display.wrapper.className+=" CodeMirror-wrap";var r=e.display.scroller.clientWidth/pt(e.display)-3;t.iter(0,t.size,function(e){if(e.height==0)return;var t=Math.ceil(e.text.length/r)||1;t!=1&&Nr(e,t*n)}),e.display.sizer.style.minWidth=""}else e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),M(e.view),t.iter(0,t.size,function(e){e.height!=0&&Nr(e,n)});gt(e,0,t.size),st(e),setTimeout(function(){D(e.display,e.view.doc.height)},100)}function C(e){var t=_n[e.options.keyMap].style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(t?" cm-keymap-"+t:"")}function k(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),st(e)}function L(e){A(e),I(e,!0)}function A(e){var t=e.display.gutters,n=e.options.gutters;ai(t);for(var r=0;r<n.length;++r){var i=n[r],s=t.appendChild(ui("div",null,"CodeMirror-gutter "+i));i=="CodeMirror-linenumbers"&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none"}function O(e,t){if(t.height==0)return 0;var n=t.text.length,r,i=t;while(r=$n(i)){var s=r.find();i=Tr(e,s.from.line),n+=s.from.ch-s.to.ch}i=t;while(r=Jn(i)){var s=r.find();n-=i.text.length-s.from.ch,i=Tr(e,s.to.line),n+=i.text.length-s.to.ch}return n}function M(e){e.maxLine=Tr(e.doc,0),e.maxLineLength=O(e.doc,e.maxLine),e.maxLineChanged=!0,e.doc.iter(1,e.doc.size,function(t){var n=O(e.doc,t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)})}function _(e){var t=!1;for(var n=0;n<e.gutters.length;++n)e.gutters[n]=="CodeMirror-linenumbers"&&(e.lineNumbers?t=!0:e.gutters.splice(n--,1));!t&&e.lineNumbers&&e.gutters.push("CodeMirror-linenumbers")}function D(e,t){var n=t+2*et(e);e.sizer.style.minHeight=e.heightForcer.style.top=n+"px";var r=Math.max(n,e.scroller.scrollHeight),i=e.scroller.scrollWidth>e.scroller.clientWidth,s=r>e.scroller.clientHeight;s?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=i?di(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=r-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):e.scrollbarV.style.display="",i?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=s?di(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):e.scrollbarH.style.display="",i&&s?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=di(e.measure)+"px"):e.scrollbarFiller.style.display="",l&&di(e.measure)===0&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=c?"18px":"12px")}function P(e,t,n){var r=e.scroller.scrollTop,i=e.wrapper.clientHeight;typeof n=="number"?r=n:n&&(r=n.top,i=n.bottom-n.top),r=Math.floor(r-et(e));var s=Math.ceil(r+i);return{from:Lr(t,r),to:Lr(t,s)}}function H(e){var t=e.display;if(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))return;var n=F(t)-t.scroller.scrollLeft+e.view.scrollLeft,r=t.gutters.offsetWidth,i=n+"px";for(var s=t.lineDiv.firstChild;s;s=s.nextSibling)if(s.alignable)for(var o=0,u=s.alignable;o<u.length;++o)u[o].style.left=i;e.options.fixedGutter&&(t.gutters.style.left=n+r+"px")}function B(e){if(!e.options.lineNumbers)return!1;var t=e.view.doc,n=j(e.options,t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(ui("div",[ui("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=i.firstChild.offsetWidth,o=i.offsetWidth-s;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(s,r.lineGutter.offsetWidth-o),r.lineNumWidth=r.lineNumInnerWidth+o,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",!0}return!1}function j(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function F(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function I(e,t,n){var r=e.display.showingFrom,i=e.display.showingTo,s=q(e,t,n);return s&&(Wr(e,e,"update",e),(e.display.showingFrom!=r||e.display.showingTo!=i)&&Wr(e,e,"viewportChange",e,e.display.showingFrom,e.display.showingTo)),V(e),D(e.display,e.view.doc.height),s}function q(e,t,r){var i=e.display,s=e.view.doc;if(!i.wrapper.clientWidth){i.showingFrom=i.showingTo=i.viewOffset=0;return}var o=P(i,s,r);if(t!==!0&&t.length==0&&o.from>i.showingFrom&&o.to<i.showingTo)return;t&&B(e)&&(t=!0);var u=i.sizer.style.marginLeft=i.gutters.offsetWidth+"px";i.scrollbarH.style.left=e.options.fixedGutter?u:"0";if(t!==!0&&w)for(var a=0;a<t.length;++a){var f=t[a],l;while(l=$n(Tr(s,f.from))){var c=l.find().from.line;f.diff&&(f.diff-=f.from-c),f.from=c}}var h=t===!0?0:Infinity;if(e.options.lineNumbers&&t&&t!==!0)for(var a=0;a<t.length;++a)if(t[a].diff){h=t[a].from;break}var c=Math.max(o.from-e.options.viewportMargin,0),p=Math.min(s.size,o.to+e.options.viewportMargin);i.showingFrom<c&&c-i.showingFrom<20&&(c=i.showingFrom),i.showingTo>p&&i.showingTo-p<20&&(p=Math.min(s.size,i.showingTo));if(w){c=Cr(Kn(s,Tr(s,c)));while(p<s.size&&Qn(Tr(s,p)))++p}var d=t===!0?[]:R([{from:i.showingFrom,to:i.showingTo}],t),v=0;for(var a=0;a<d.length;++a){var m=d[a];m.from<c&&(m.from=c),m.to>p&&(m.to=p),m.from>=m.to?d.splice(a--,1):v+=m.to-m.from}if(v==p-c&&c==i.showingFrom&&p==i.showingTo)return;d.sort(function(e,t){return e.from-t.from});var g=document.activeElement;v<(p-c)*.7&&(i.lineDiv.style.display="none"),z(e,c,p,d,h),i.lineDiv.style.display="",document.activeElement!=g&&g.offsetHeight&&g.focus();var y=c!=i.showingFrom||p!=i.showingTo||i.lastSizeC!=i.wrapper.clientHeight;y&&(i.lastSizeC=i.wrapper.clientHeight),i.showingFrom=c,i.showingTo=p,Q(e,100);var b=i.lineDiv.offsetTop;for(var E=i.lineDiv.firstChild,S;E;E=E.nextSibling)if(E.lineObj){if(n){var x=E.offsetTop+E.offsetHeight;S=x-b,b=x}else{var T=E.getBoundingClientRect();S=T.bottom-T.top}var N=E.lineObj.height-S;S<2&&(S=ht(i));if(N>.001||N<-0.001){Nr(E.lineObj,S);var C=E.lineObj.widgets;if(C)for(var a=0;a<C.length;++a)C[a].height=C[a].node.offsetHeight}}return i.viewOffset=Ar(e,Tr(s,c)),i.mover.style.top=i.viewOffset+"px",P(i,s,r).to>=p&&q(e,[],r),!0}function R(e,t){for(var n=0,r=t.length||0;n<r;++n){var i=t[n],s=[],o=i.diff||0;for(var u=0,a=e.length;u<a;++u){var f=e[u];i.to<=f.from&&i.diff?s.push({from:f.from+o,to:f.to+o}):i.to<=f.from||i.from>=f.to?s.push(f):(i.from>f.from&&s.push({from:f.from,to:i.from}),i.to<f.to&&s.push({from:i.to+o,to:f.to+o}))}e=s}return e}function U(e){var t=e.display,n={},r={};for(var i=t.gutters.firstChild,s=0;i;i=i.nextSibling,++s)n[e.options.gutters[s]]=i.offsetLeft,r[e.options.gutters[s]]=i.offsetWidth;return{fixedPos:F(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function z(e,t,n,r,s){function c(t){var n=t.nextSibling;return i&&v&&e.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),n}var o=U(e),u=e.display,a=e.options.lineNumbers;!r.length&&(!i||!e.display.currentWheelTarget)&&ai(u.lineDiv);var f=u.lineDiv,l=f.firstChild,h=r.shift(),p=t;e.view.doc.iter(t,n,function(t){h&&h.to==p&&(h=r.shift());if(Qn(t)){t.height!=0&&Nr(t,0);if(t.widgets&&l.previousSibling)for(var n=0;n<t.widgets.length;++n)if(t.widgets[n].showIfHidden){var i=l.previousSibling;if(i.nodeType=="pre"){var u=ui("div",null,null,"position: relative");i.parentNode.replaceChild(u,i),u.appendChild(i),i=u}i.appendChild(X(t.widgets[n],i,o))}}else if(h&&h.from<=p&&h.to>p){while(l.lineObj!=t)l=c(l);a&&s<=p&&l.lineNumber&&li(l.lineNumber,j(e.options,p)),l=l.nextSibling}else{var d=W(e,t,p,o);f.insertBefore(d,l),d.lineObj=t}++p});while(l)l=c(l)}function W(e,t,r,i){var s=mr(e,t),o=t.gutterMarkers,u=e.display;if(!e.options.lineNumbers&&!o&&!t.bgClass&&!t.wrapClass&&(!t.widgets||!t.widgets.length))return s;var a=ui("div",null,t.wrapClass,"position: relative");if(e.options.lineNumbers||o){var f=a.appendChild(ui("div",null,null,"position: absolute; left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"));e.options.fixedGutter&&(a.alignable=[f]),e.options.lineNumbers&&(!o||!o["CodeMirror-linenumbers"])&&(a.lineNumber=f.appendChild(ui("div",j(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+u.lineNumInnerWidth+"px")));if(o)for(var l=0;l<e.options.gutters.length;++l){var c=e.options.gutters[l],h=o.hasOwnProperty(c)&&o[c];h&&f.appendChild(ui("div",[h],"CodeMirror-gutter-elt","left: "+i.gutterLeft[c]+"px; width: "+i.gutterWidth[c]+"px"))}}t.bgClass&&a.appendChild(ui("div"," ",t.bgClass+" CodeMirror-linebackground")),a.appendChild(s);if(t.widgets)for(var p=0,d=t.widgets;p<d.length;++p){var v=d[p],m=X(v,a,i);v.above?a.insertBefore(m,e.options.lineNumbers&&t.height!=0?f:s):a.appendChild(m)}return n&&(a.style.zIndex=2),a}function X(e,t,n){var r=ui("div",[e.node],"CodeMirror-linewidget");r.widget=e;if(e.noHScroll){(t.alignable||(t.alignable=[])).push(r);var i=n.wrapperWidth;r.style.left=n.fixedPos+"px",e.coverGutter||(i-=n.gutterTotalWidth,r.style.paddingLeft=n.gutterTotalWidth+"px"),r.style.width=i+"px"}return e.coverGutter&&(r.style.zIndex=5,r.style.position="relative",e.noHScroll||(r.style.marginLeft=-n.gutterTotalWidth+"px")),r}function V(e){var t=e.display,n=tn(e.view.sel.from,e.view.sel.to);n||e.options.showCursorWhenSelecting?$(e):t.cursor.style.display=t.otherCursor.style.display="none",n?t.selectionDiv.style.display="none":J(e);var r=at(e,e.view.sel.head,"div"),i=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+s.top-i.top))+"px",t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+s.left-i.left))+"px"}function $(e){var t=e.display,n=at(e,e.view.sel.head,"div");t.cursor.style.left=n.left+"px",t.cursor.style.top=n.top+"px",t.cursor.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",t.cursor.style.display="",n.other?(t.otherCursor.style.display="",t.otherCursor.style.left=n.other.left+"px",t.otherCursor.style.top=n.other.top+"px",t.otherCursor.style.height=(n.other.bottom-n.other.top)*.85+"px"):t.otherCursor.style.display="none"}function J(e){function u(e,t,n,r){t<0&&(t=0),i.appendChild(ui("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(n==null?s-e:n)+"px; height: "+(r-t)+"px"))}function a(t,r,i,a){function h(n){return ut(e,{line:t,ch:n},"div",f)}var f=Tr(n,t),l=f.text.length,c=a?Infinity:-Infinity;return Ei(Or(f),r||0,i==null?l:i,function(e,t,n){var f=h(n=="rtl"?t-1:e),p=h(n=="rtl"?e:t-1),d=f.left,v=p.right;p.top-f.top>3&&(u(d,f.top,null,f.bottom),d=o,f.bottom<p.top&&u(d,f.bottom,null,p.top)),i==null&&t==l&&(v=s),r==null&&e==0&&(d=o),c=a?Math.min(p.top,c):Math.max(p.bottom,c),d<o+1&&(d=o),u(d,p.top,v-d,p.bottom)}),c}var t=e.display,n=e.view.doc,r=e.view.sel,i=document.createDocumentFragment(),s=t.lineSpace.offsetWidth,o=tt(e.display);if(r.from.line==r.to.line)a(r.from.line,r.from.ch,r.to.ch);else{var f=Tr(n,r.from.line),l=f,c,h=[r.from.line,r.from.ch],p;while(c=Jn(l)){var d=c.find();h.push(d.from.ch,d.to.line,d.to.ch);if(d.to.line==r.to.line){h.push(r.to.ch),p=!0;break}l=Tr(n,d.to.line)}if(p)for(var v=0;v<h.length;v+=3)a(h[v],h[v+1],h[v+2]);else{var m,g,y=Tr(n,r.to.line);r.from.ch?m=a(r.from.line,r.from.ch,null,!1):m=Ar(e,f)-t.viewOffset,r.to.ch?g=a(r.to.line,$n(y)?null:0,r.to.ch,!0):g=Ar(e,y)-t.viewOffset,m<g&&u(o,m,null,g)}}fi(t.selectionDiv,i),t.selectionDiv.style.display=""}function K(e){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",t.blinker=setInterval(function(){if(!t.cursor.offsetHeight)return;t.cursor.style.visibility=t.otherCursor.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate)}function Q(e,t){e.view.mode.startState&&e.view.frontier<e.display.showingTo&&e.view.highlight.set(t,ni(G,e))}function G(e){var t=e.view,n=t.doc;if(t.frontier>=e.display.showingTo)return;var r=+(new Date)+e.options.workTime,i=An(t.mode,Z(e,t.frontier)),s=[],o;n.iter(t.frontier,Math.min(n.size,e.display.showingTo+500),function(n){if(t.frontier>=e.display.showingFrom){var u=n.styles;n.styles=cr(e,n,i);var a=!u||u.length!=n.styles.length;for(var f=0;!a&&f<u.length;++f)a=u[f]!=n.styles[f];a&&(o&&o.end==t.frontier?o.end++:s.push(o={start:t.frontier,end:t.frontier+1})),n.stateAfter=An(t.mode,i)}else pr(e,n,i),n.stateAfter=t.frontier%5==0?An(t.mode,i):null;++t.frontier;if(+(new Date)>r)return Q(e,e.options.workDelay),!0}),s.length&&mt(e,function(){for(var e=0;e<s.length;++e)gt(this,s[e].start,s[e].end)})()}function Y(e,t){var n,r,i=e.view.doc;for(var s=t,o=t-100;s>o;--s){if(s==0)return 0;var u=Tr(i,s-1);if(u.stateAfter)return s;var a=Kr(u.text,null,e.options.tabSize);if(r==null||n>a)r=s-1,n=a}return r}function Z(e,t){var n=e.view;if(!n.mode.startState)return!0;var r=Y(e,t),i=r&&Tr(n.doc,r-1).stateAfter;return i?i=An(n.mode,i):i=On(n.mode),n.doc.iter(r,t,function(s){pr(e,s,i);var o=r==t-1||r%5==0||r>=n.showingFrom&&r<n.showingTo;s.stateAfter=o?An(n.mode,i):null,++r}),i}function et(e){return e.lineSpace.offsetTop}function tt(e){var t=fi(e.measure,ui("pre")).appendChild(ui("span","x"));return t.offsetLeft}function nt(e,t,n,r){var i=-1;r=r||rt(e,t);for(var s=n;;s+=i){var o=r[s];if(o)break;i<0&&s==0&&(i=1)}return{left:s<n?o.right:o.left,right:s>n?o.left:o.right,top:o.top,bottom:o.bottom}}function rt(e,t){var n=e.display,r=e.display.measureLineCache;for(var i=0;i<r.length;++i){var s=r[i];if(s.text==t.text&&s.markedSpans==t.markedSpans&&n.scroller.clientWidth==s.width)return s.measure}var o=it(e,t),s={text:t.text,width:n.scroller.clientWidth,markedSpans:t.markedSpans,measure:o};return r.length==16?r[++n.measureLineCachePos%16]=s:r.push(s),o}function it(e,r){var i=e.display,s=ti(r.text.length),o=mr(e,r,s);if(t&&!n&&!e.options.lineWrapping&&o.childNodes.length>100){var u=document.createDocumentFragment(),a=10,f=o.childNodes.length;for(var l=0,c=Math.ceil(f/a);l<c;++l){var h=ui("div",null,null,"display: inline-block");for(var p=0;p<a&&f;++p)h.appendChild(o.firstChild),--f;u.appendChild(h)}o.appendChild(u)}fi(i.measure,o);var d=i.lineDiv.getBoundingClientRect(),v=[],m=ti(r.text.length),g=o.offsetHeight;for(var l=0,y;l<s.length;++l)if(y=s[l]){var b=y.getBoundingClientRect(),w=Math.max(0,b.top-d.top),E=Math.min(b.bottom-d.top,g);for(var p=0;p<v.length;p+=2){var S=v[p],x=v[p+1];if(S>E||x<w)continue;if(S<=w&&x>=E||w<=S&&E>=x||Math.min(E,x)-Math.max(w,S)>=E-w>>1){v[p]=Math.min(w,S),v[p+1]=Math.max(E,x);break}}p==v.length&&v.push(w,E),m[l]={left:b.left-d.left,right:b.right-d.left,top:p}}for(var l=0,y;l<m.length;++l)if(y=m[l]){var T=y.top;y.top=v[T],y.bottom=v[T+1]}return m}function st(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.view.maxLineChanged=!0}function ot(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var s=sr(t.widgets[i]);n.top+=s,n.bottom+=s}if(r=="line")return n;r||(r="local");var o=Ar(e,t);r!="local"&&(o-=e.display.viewOffset);if(r=="page"){var u=e.display.lineSpace.getBoundingClientRect();o+=u.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var a=u.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);n.left+=a,n.right+=a}return n.top+=o,n.bottom+=o,n}function ut(e,t,n,r){return r||(r=Tr(e.view.doc,t.line)),ot(e,r,nt(e,r,t.ch),n)}function at(e,t,n,r,i){function s(t,s){var o=nt(e,r,t,i);return s?o.left=o.right:o.right=o.left,ot(e,r,o,n)}r=r||Tr(e.view.doc,t.line),i||(i=rt(e,r));var o=Or(r),u=t.ch;if(!o)return s(u);var a,f,l=o[0].level;for(var c=0;c<o.length;++c){var h=o[c],p=h.level%2,d,v;if(h.from<u&&h.to>u)return s(u,p);var m=p?h.to:h.from,g=p?h.from:h.to;if(m==u)c&&h.level<(d=o[c-1]).level?v=s(d.level%2?d.from:d.to-1,!0):v=s(p&&h.from!=h.to?u-1:u),p==l?a=v:f=v;else if(g==u){var d=c<o.length-1&&o[c+1];if(!p&&d&&d.from==d.to)continue;d&&h.level<d.level?v=s(d.level%2?d.to-1:d.from):v=s(p?u:u-1,!0),p==l?a=v:f=v}}return l&&!u&&(f=s(o[0].to-1)),a?(f&&(a.other=f),a):f}function ft(e,t,n){var r=e.view.doc;n+=e.display.viewOffset;if(n<0)return{line:0,ch:0,outside:!0};var i=Lr(r,n);if(i>=r.size)return{line:r.size-1,ch:Tr(r,r.size-1).text.length};t<0&&(t=0);for(;;){var s=Tr(r,i),o=lt(e,s,i,t,n),u=Jn(s),a=u&&u.find();if(!(u&&o.ch>=a.from.ch))return o;i=a.to.line}}function lt(e,t,n,r,i){function f(r){var i=at(e,{line:n,ch:r},"line",t,a);return o=!0,s>i.bottom?Math.max(0,i.left-u):s<i.top?i.left+u:(o=!1,i.left)}var s=i-Ar(e,t),o=!1,u=e.display.wrapper.clientWidth,a=rt(e,t),l=Or(t),c=t.text.length,h=Ti(t),p=Ni(t),d=tt(e.display),v=f(p);if(r>v)return{line:n,ch:p,outside:o};for(;;){if(l?p==h||p==Li(t,h,1):p-h<=1){var m=r-d<v-r,g=m?h:p;while(oi.test(t.text.charAt(g)))++g;return{line:n,ch:g,after:m,outside:o}}var y=Math.ceil(c/2),b=h+y;if(l){b=h;for(var w=0;w<y;++w)b=Li(t,b,1)}var E=f(b);E>r?(p=b,v=E,o&&(v+=1e3),c-=y):(h=b,d=E,c=y)}}function ht(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(ct==null){ct=ui("pre");for(var t=0;t<49;++t)ct.appendChild(document.createTextNode("x")),ct.appendChild(ui("br"));ct.appendChild(document.createTextNode("x"))}fi(e.measure,ct);var n=ct.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),ai(e.measure),n||1}function pt(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=ui("span","x"),n=ui("pre",[t]);fi(e.measure,n);var r=t.offsetWidth;return r>2&&(e.cachedCharWidth=r),r||10}function dt(e){e.curOp?++e.curOp.depth:e.curOp={depth:1,changes:[],delayedCallbacks:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,updateMaxLine:!1,id:++e.nextOpId}}function vt(e){var t=e.curOp;if(--t.depth)return;e.curOp=null;var n=e.view,r=e.display;t.updateMaxLine&&M(n);if(n.maxLineChanged&&!e.options.lineWrapping){var i=nt(e,n.maxLine,n.maxLine.text.length).right;r.sizer.style.minWidth=i+3+Vr+"px",n.maxLineChanged=!1;var s=Math.max(0,r.sizer.offsetLeft+r.sizer.offsetWidth-r.scroller.clientWidth);s<n.scrollLeft&&Pt(e,Math.min(r.scroller.scrollLeft,s),!0)}var o,u;if(t.selectionChanged){var a=at(e,n.sel.head);o=vn(e,a.left,a.top,a.left,a.bottom)}if(t.changes.length||o&&o.scrollTop!=null)u=I(e,t.changes,o&&o.scrollTop);!u&&t.selectionChanged&&V(e),o&&hn(e),t.selectionChanged&&K(e),n.focused&&t.updateInput&&Et(e,t.userSelChange),t.textChanged&&zr(e,"change",e,t.textChanged),t.selectionChanged&&zr(e,"cursorActivity",e);for(var f=0;f<t.delayedCallbacks.length;++f)t.delayedCallbacks[f](e)}function mt(e,t){return function(){var n=e||this;dt(n);try{var r=t.apply(n,arguments)}finally{vt(n)}return r}}function gt(e,t,n,r){e.curOp.changes.push({from:t,to:n,diff:r})}function yt(e){if(e.view.pollingFast)return;e.display.poll.set(e.options.pollInterval,function(){wt(e),e.view.focused&&yt(e)})}function bt(e){function n(){var r=wt(e);!r&&!t?(t=!0,e.display.poll.set(60,n)):(e.display.pollingFast=!1,yt(e))}var t=!1;e.display.pollingFast=!0,e.display.poll.set(20,n)}function wt(e){var t=e.display.input,n=e.display.prevInput,r=e.view,i=r.sel;if(!r.focused||yi(t)||xt(e))return!1;var s=t.value;if(s==n&&tn(i.from,i.to))return!1;dt(e),r.sel.shift=!1;var o=0,u=Math.min(n.length,s.length);while(o<u&&n[o]==s[o])++o;var a=i.from,f=i.to;o<n.length?a={line:a.line,ch:a.ch-(n.length-o)}:r.overwrite&&tn(a,f)&&!e.display.pasteIncoming&&(f={line:f.line,ch:Math.min(Tr(e.view.doc,f.line).text.length,f.ch+(s.length-o))});var l=e.curOp.updateInput;return Qt(e,a,f,gi(s.slice(o)),"end",e.display.pasteIncoming?"paste":"input",{from:a,to:f}),e.curOp.updateInput=l,s.length>1e3?t.value=e.display.prevInput="":e.display.prevInput=s,vt(e),e.display.pasteIncoming=!1,!0}function Et(e,t){var n=e.view,r,i;tn(n.sel.from,n.sel.to)?t&&(e.display.prevInput=e.display.input.value=""):(e.display.prevInput="",r=bi&&(n.sel.to.line-n.sel.from.line>100||(i=e.getSelection()).length>1e3),r?e.display.input.value="-":e.display.input.value=i||e.getSelection(),n.focused&&Zr(e.display.input)),e.display.inaccurateSelection=r}function St(e){e.options.readOnly!="nocursor"&&(t||document.activeElement!=e.display.input)&&e.display.input.focus()}function xt(e){return e.options.readOnly||e.view.cantEdit}function Tt(t){function r(){t.view.focused&&setTimeout(ni(St,t),0)}function i(){n.cachedCharWidth=n.cachedTextHeight=null,st(t),I(t,!0)}function s(e){if(t.options.onDragEvent&&t.options.onDragEvent(t,Pr(e)))return;jr(e)}function o(){n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,n.input.value=t.getSelection(),Zr(n.input))}var n=t.display;Rr(n.scroller,"mousedown",mt(t,At)),Rr(n.scroller,"dblclick",mt(t,Hr)),Rr(n.lineSpace,"selectstart",function(e){Nt(n,e)||Hr(e)}),e||Rr(n.scroller,"contextmenu",function(e){Kt(t,e)}),Rr(n.scroller,"scroll",function(){Dt(t,n.scroller.scrollTop),Pt(t,n.scroller.scrollLeft,!0),zr(t,"scroll",t)}),Rr(n.scrollbarV,"scroll",function(){Dt(t,n.scrollbarV.scrollTop)}),Rr(n.scrollbarH,"scroll",function(){Pt(t,n.scrollbarH.scrollLeft)}),Rr(n.scroller,"mousewheel",function(e){jt(t,e)}),Rr(n.scroller,"DOMMouseScroll",function(e){jt(t,e)}),Rr(n.scrollbarH,"mousedown",r),Rr(n.scrollbarV,"mousedown",r),Rr(n.wrapper,"scroll",function(){n.wrapper.scrollTop=n.wrapper.scrollLeft=0}),window.registered||(window.registered=0),++window.registered,Rr(window,"resize",i),setTimeout(function u(){for(var e=n.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(u,5e3):(--window.registered,Ur(window,"resize",i))},5e3),Rr(n.input,"keyup",mt(t,function(e){if(t.options.onKeyEvent&&t.options.onKeyEvent(t,Pr(e)))return;qr(e,"keyCode")==16&&(t.view.sel.shift=!1)})),Rr(n.input,"input",ni(bt,t)),Rr(n.input,"keydown",mt(t,Wt)),Rr(n.input,"keypress",mt(t,Xt)),Rr(n.input,"focus",ni(Vt,t)),Rr(n.input,"blur",ni($t,t)),t.options.dragDrop&&(Rr(n.scroller,"dragstart",function(e){_t(t,e)}),Rr(n.scroller,"dragenter",s),Rr(n.scroller,"dragover",s),Rr(n.scroller,"drop",mt(t,Ot))),Rr(n.scroller,"paste",function(e){if(Nt(n,e))return;St(t),bt(t)}),Rr(n.input,"paste",function(){n.pasteIncoming=!0,bt(t)}),Rr(n.input,"cut",o),Rr(n.input,"copy",o),f&&Rr(n.sizer,"mouseup",function(){document.activeElement==n.input&&n.input.blur(),St(t)})}function Nt(e,t){for(var n=Fr(t);n!=e.wrapper;n=n.parentNode){if(!n)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(n.className)||n.parentNode==e.sizer&&n!=e.mover)return!0}}function Ct(e,t,n){var r=e.display;if(!n){var i=Fr(t);if(i==r.scrollbarH||i==r.scrollbarH.firstChild||i==r.scrollbarV||i==r.scrollbarV.firstChild||i==r.scrollbarFiller)return null}var s,o,u=r.lineSpace.getBoundingClientRect();try{s=t.clientX,o=t.clientY}catch(t){return null}return ft(e,s-u.left,o-u.top)}function At(n){function g(e){if(c=="single"){an(r,on(a,f),e);return}v=on(a,v),m=on(a,m);if(c=="double"){var t=bn(Tr(a,e.line).text,e);nn(e,v)?an(r,t.from,m):an(r,v,t.to)}else c=="triple"&&(nn(e,v)?an(r,m,on(a,{line:e.line,ch:0})):an(r,v,on(a,{line:e.line+1,ch:0})))}function w(e){var t=++b,n=Ct(r,e,!0);if(!n)return;if(!tn(n,p)){o.focused||Vt(r),p=n,g(n);var i=P(s,a);(n.line>=i.to||n.line<i.from)&&setTimeout(mt(r,function(){b==t&&w(e)}),150)}else{var u=e.clientY<y.top?-20:e.clientY>y.bottom?20:0;u&&setTimeout(mt(r,function(){if(b!=t)return;s.scroller.scrollTop+=u,w(e)}),50)}}function E(e){b=Infinity;var t=Ct(r,e);t&&g(t),Hr(e),St(r),Ur(document,"mousemove",S),Ur(document,"mouseup",x)}var r=this,s=r.display,o=r.view,u=o.sel,a=o.doc;u.shift=qr(n,"shiftKey");if(Nt(s,n)){i||(s.scroller.draggable=!1,setTimeout(function(){s.scroller.draggable=!0},100));return}if(Mt(r,n))return;var f=Ct(r,n);switch(Ir(n)){case 3:e&&Kt.call(r,r,n);return;case 2:f&&an(r,f),setTimeout(ni(St,r),20),Hr(n);return}if(!f){Fr(n)==s.scroller&&Hr(n);return}o.focused||Vt(r);var l=+(new Date),c="single";if(Lt&&Lt.time>l-400&&tn(Lt.pos,f))c="triple",Hr(n),setTimeout(ni(St,r),20),wn(r,f.line);else if(kt&&kt.time>l-400&&tn(kt.pos,f)){c="double",Lt={time:l,pos:f},Hr(n);var h=bn(Tr(a,f.line).text,f);an(r,h.from,h.to)}else kt={time:l,pos:f};var p=f;if(r.options.dragDrop&&ci&&!xt(r)&&!tn(u.from,u.to)&&!nn(f,u.from)&&!nn(u.to,f)&&c=="single"){var d=mt(r,function(e){i&&(s.scroller.draggable=!1),o.draggingText=!1,Ur(document,"mouseup",d),Ur(s.scroller,"drop",d),Math.abs(n.clientX-e.clientX)+Math.abs(n.clientY-e.clientY)<10&&(Hr(e),an(r,f),St(r))});i&&(s.scroller.draggable=!0),o.draggingText=d,s.scroller.dragDrop&&s.scroller.dragDrop(),Rr(document,"mouseup",d),Rr(s.scroller,"drop",d);return}Hr(n),c=="single"&&an(r,on(a,f));var v=u.from,m=u.to,y=s.wrapper.getBoundingClientRect(),b=0,S=mt(r,function(e){!t&&!Ir(e)?E(e):w(e)}),x=mt(r,E);Rr(document,"mousemove",S),Rr(document,"mouseup",x)}function Ot(e){var t=this;if(Nt(t.display,e)||t.options.onDragEvent&&t.options.onDragEvent(t,Pr(e)))return;Hr(e);var n=Ct(t,e,!0),r=e.dataTransfer.files;if(!n||xt(t))return;if(r&&r.length&&window.FileReader&&window.File){var i=r.length,s=Array(i),o=0,u=function(e,r){var u=new FileReader;u.onload=function(){s[r]=u.result,++o==i&&(n=on(t.view.doc,n),mt(t,function(){var e=en(t,s.join(""),n,n,"paste");fn(t,n,e)})())},u.readAsText(e)};for(var a=0;a<i;++a)u(r[a],a)}else{if(t.view.draggingText&&!nn(n,t.view.sel.from)&&!nn(t.view.sel.to,n)){t.view.draggingText(e),setTimeout(ni(St,t),20);return}try{var s=e.dataTransfer.getData("Text");if(s){var f=t.view.sel.from,l=t.view.sel.to;fn(t,n,n),t.view.draggingText&&en(t,"",f,l,"paste"),t.replaceSelection(s,null,"paste"),St(t),Vt(t)}}catch(e){}}}function Mt(e,t){var n=e.display;try{var r=t.clientX,i=t.clientY}catch(t){return!1}if(r>=Math.floor(n.gutters.getBoundingClientRect().right))return!1;Hr(t);if(!Xr(e,"gutterClick"))return!0;var s=n.lineDiv.getBoundingClientRect();if(i>s.bottom)return!0;i-=s.top-n.viewOffset;for(var o=0;o<e.options.gutters.length;++o){var u=n.gutters.childNodes[o];if(u&&u.getBoundingClientRect().right>=r){var a=Lr(e.view.doc,i),f=e.options.gutters[o];Wr(e,e,"gutterClick",e,a,f,t);break}}return!0}function _t(e,t){if(Nt(e.display,t))return;var n=e.getSelection();t.dataTransfer.setData("Text",n);if(t.dataTransfer.setDragImage&&!a){var r=ui("img",null,null,"position: fixed; left: 0; top: 0;");u&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),u&&r.parentNode.removeChild(r)}}function Dt(t,n){if(Math.abs(t.view.scrollTop-n)<2)return;t.view.scrollTop=n,e||I(t,[],n),t.display.scroller.scrollTop!=n&&(t.display.scroller.scrollTop=n),t.display.scrollbarV.scrollTop!=n&&(t.display.scrollbarV.scrollTop=n),e&&I(t,[])}function Pt(e,t,n){if(n?t==e.view.scrollLeft:Math.abs(e.view.scrollLeft-t)<2)return;t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.view.scrollLeft=t,H(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t)}function jt(t,n){var r=n.wheelDeltaX,s=n.wheelDeltaY;r==null&&n.detail&&n.axis==n.HORIZONTAL_AXIS&&(r=n.detail),s==null&&n.detail&&n.axis==n.VERTICAL_AXIS?s=n.detail:s==null&&(s=n.wheelDelta);if(s&&v&&i)for(var o=n.target;o!=f;o=o.parentNode)if(o.lineObj){t.display.currentWheelTarget=o;break}var a=t.display,f=a.scroller;if(r&&!e&&!u&&Bt!=null){s&&Dt(t,Math.max(0,Math.min(f.scrollTop+s*Bt,f.scrollHeight-f.clientHeight))),Pt(t,Math.max(0,Math.min(f.scrollLeft+r*Bt,f.scrollWidth-f.clientWidth))),Hr(n),a.wheelStartX=null;return}if(s&&Bt!=null){var l=s*Bt,c=t.view.scrollTop,h=c+a.wrapper.clientHeight;l<0?c=Math.max(0,c+l-50):h=Math.min(t.view.doc.height,h+l+50),I(t,[],{top:c,bottom:h})}Ht<20&&(a.wheelStartX==null?(a.wheelStartX=f.scrollLeft,a.wheelStartY=f.scrollTop,a.wheelDX=r,a.wheelDY=s,setTimeout(function(){if(a.wheelStartX==null)return;var e=f.scrollLeft-a.wheelStartX,t=f.scrollTop-a.wheelStartY,n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null;if(!n)return;Bt=(Bt*Ht+n)/(Ht+1),++Ht},200)):(a.wheelDX+=r,a.wheelDY+=s))}function Ft(e,t,n){if(typeof t=="string"){t=Mn[t];if(!t)return!1}e.display.pollingFast&&wt(e)&&(e.display.pollingFast=!1);var r=e.view,i=r.sel.shift;try{xt(e)&&(r.suppressEdits=!0),n&&(r.sel.shift=!1),t(e)}catch(s){if(s!=$r)throw s;return!1}finally{r.sel.shift=i,r.suppressEdits=!1}return!0}function It(e){var t=e.view.keyMaps.slice(0);return t.push(e.options.keyMap),e.options.extraKeys&&t.unshift(e.options.extraKeys),t}function Rt(e,t){function a(){u=!0}var n=Dn(e.options.keyMap),i=n.auto;clearTimeout(qt),i&&!Hn(t)&&(qt=setTimeout(function(){Dn(e.options.keyMap)==n&&(e.options.keyMap=i.call?i.call(null,e):i)},50));var s=wi[qr(t,"keyCode")],o=!1;if(s==null||t.altGraphKey)return!1;qr(t,"altKey")&&(s="Alt-"+s),qr(t,y?"metaKey":"ctrlKey")&&(s="Ctrl-"+s),qr(t,y?"ctrlKey":"metaKey")&&(s="Cmd-"+s);var u=!1,f=It(e);return qr(t,"shiftKey")?o=Pn("Shift-"+s,f,function(t){return Ft(e,t,!0)},a)||Pn(s,f,function(t){if(typeof t=="string"&&/^go[A-Z]/.test(t))return Ft(e,t)},a):o=Pn(s,f,function(t){return Ft(e,t)},a),u&&(o=!1),o&&(Hr(t),K(e),r&&(t.oldKeyCode=t.keyCode,t.keyCode=0)),o}function Ut(e,t,n){var r=Pn("'"+n+"'",It(e),function(t){return Ft(e,t,!0)});return r&&(Hr(t),K(e)),r}function Wt(e){var n=this;n.view.focused||Vt(n),t&&e.keyCode==27&&(e.returnValue=!1);if(n.options.onKeyEvent&&
n.options.onKeyEvent(n,Pr(e)))return;var r=qr(e,"keyCode");n.view.sel.shift=r==16||qr(e,"shiftKey");var i=Rt(n,e);u&&(zt=i?r:null,!i&&r==88&&!bi&&qr(e,v?"metaKey":"ctrlKey")&&n.replaceSelection(""))}function Xt(e){var t=this;if(t.options.onKeyEvent&&t.options.onKeyEvent(t,Pr(e)))return;var n=qr(e,"keyCode"),r=qr(e,"charCode");if(u&&n==zt){zt=null,Hr(e);return}if((u&&(!e.which||e.which<10)||f)&&Rt(t,e))return;var i=String.fromCharCode(r==null?n:r);this.options.electricChars&&this.view.mode.electricChars&&this.options.smartIndent&&!xt(this)&&this.view.mode.electricChars.indexOf(i)>-1&&setTimeout(mt(t,function(){mn(t,t.view.sel.to.line,"smart")}),75);if(Ut(t,e,i))return;bt(t)}function Vt(e){if(e.options.readOnly=="nocursor")return;e.view.focused||(zr(e,"focus",e),e.view.focused=!0,e.display.scroller.className.search(/\bCodeMirror-focused\b/)==-1&&(e.display.scroller.className+=" CodeMirror-focused"),Et(e,!0)),yt(e),K(e)}function $t(e){e.view.focused&&(zr(e,"blur",e),e.view.focused=!1,e.display.scroller.className=e.display.scroller.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.view.focused||(e.view.sel.shift=!1)},150)}function Kt(t,n){function l(){i.inputDiv.style.position="relative",i.input.style.cssText=f,r&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=a),yt(t);if(i.input.selectionStart!=null){clearTimeout(Jt);var e=i.input.value=" "+(tn(s.from,s.to)?"":i.input.value),n=0;i.prevInput=" ",i.input.selectionStart=1,i.input.selectionEnd=e.length,Jt=setTimeout(function o(){i.prevInput==" "&&i.input.selectionStart==0?mt(t,Mn.selectAll)(t):n++<10?Jt=setTimeout(o,500):Et(t)},200)}}var i=t.display;if(Nt(i,n))return;var s=t.view.sel,o=Ct(t,n),a=i.scroller.scrollTop;if(!o||u)return;(tn(s.from,s.to)||nn(o,s.from)||!nn(o,s.to))&&mt(t,fn)(t,o,o);var f=i.input.style.cssText;i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(n.clientY-5)+"px; left: "+(n.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",St(t),Et(t,!0),tn(s.from,s.to)&&(i.input.value=i.prevInput=" "),e?(jr(n),Rr(window,"mouseup",function c(){Ur(window,"mouseup",c),setTimeout(l,20)})):setTimeout(l,50)}function Qt(e,t,n,r,i,s){var o=b&&Xn(e.view.doc,t,n);if(!o)return Gt(e,t,n,r,i,s);for(var u=o.length-1;u>=1;--u)Gt(e,o[u].from,o[u].to,[""],s);if(o.length)return Gt(e,o[0].from,o[0].to,r,i,s)}function Gt(e,t,n,r,i,s){if(e.view.suppressEdits)return;var o=e.view,u=o.doc,a=[];u.iter(t.line,n.line+1,function(e){a.push(er(e.text,e.markedSpans))});var f=o.sel.from,l=o.sel.to,c=Wn(Zn(a[0]),Zn(Yr(a)),t.ch,n.ch,r),h=Zt(e,t,n,c,i,s);return o.history&&_r(e,t.line,r.length,a,s,f,l,o.sel.from,o.sel.to),h}function Yt(e,t){var n=e.view.doc,r=e.view.history,i=(t=="undo"?r.done:r.undone).pop();if(!i)return;var s={events:[],fromBefore:i.fromAfter,toBefore:i.toAfter,fromAfter:i.fromBefore,toAfter:i.toBefore};for(var o=i.events.length-1;o>=0;o-=1){r.dirtyCounter+=t=="undo"?-1:1;var u=i.events[o],a=[],f=u.start+u.added;n.iter(u.start,f,function(e){a.push(er(e.text,e.markedSpans))}),s.events.push({start:u.start,added:u.old.length,old:a});var l=o?null:{from:i.fromBefore,to:i.toBefore};Zt(e,{line:u.start,ch:0},{line:f-1,ch:Tr(n,f-1).text.length},u.old,l,t)}(t=="undo"?r.undone:r.done).push(s)}function Zt(e,t,n,r,i,s){var o=e.view,u=o.doc,a=e.display;if(o.suppressEdits)return;var f=n.line-t.line,l=Tr(u,t.line),c=Tr(u,n.line),h=!1,p=t.line;e.options.lineWrapping||(p=Cr(Kn(u,l)),u.iter(p,n.line+1,function(e){if(e==o.maxLine)return h=!0,!0}));var d=Yr(r),v=ht(a);if(t.ch==0&&n.ch==0&&Yn(d)==""){var m=[];for(var g=0,y=r.length-1;g<y;++g)m.push(ur(Yn(r[g]),Zn(r[g]),v));ar(e,c,c.text,Zn(d)),f&&u.remove(t.line,f,e),m.length&&u.insert(t.line,m)}else if(l==c)if(r.length==1)ar(e,l,l.text.slice(0,t.ch)+Yn(r[0])+l.text.slice(n.ch),Zn(r[0]));else{for(var m=[],g=1,y=r.length-1;g<y;++g)m.push(ur(Yn(r[g]),Zn(r[g]),v));m.push(ur(Yn(d)+l.text.slice(n.ch),Zn(d),v)),ar(e,l,l.text.slice(0,t.ch)+Yn(r[0]),Zn(r[0])),u.insert(t.line+1,m)}else if(r.length==1)ar(e,l,l.text.slice(0,t.ch)+Yn(r[0])+c.text.slice(n.ch),Zn(r[0])),u.remove(t.line+1,f,e);else{var m=[];ar(e,l,l.text.slice(0,t.ch)+Yn(r[0]),Zn(r[0])),ar(e,c,Yn(d)+c.text.slice(n.ch),Zn(d));for(var g=1,y=r.length-1;g<y;++g)m.push(ur(Yn(r[g]),Zn(r[g]),v));f>1&&u.remove(t.line+1,f-1,e),u.insert(t.line+1,m)}if(e.options.lineWrapping){var b=Math.max(5,a.scroller.clientWidth/pt(a)-3);u.iter(t.line,t.line+r.length,function(e){if(e.height==0)return;var t=(Math.ceil(e.text.length/b)||1)*v;t!=e.height&&Nr(e,t)})}else u.iter(p,t.line+r.length,function(e){var t=O(u,e);t>o.maxLineLength&&(o.maxLine=e,o.maxLineLength=t,o.maxLineChanged=!0,h=!1)}),h&&(e.curOp.updateMaxLine=!0);o.frontier=Math.min(o.frontier,t.line),Q(e,400);var w=r.length-f-1;gt(e,t.line,n.line+1,w);if(Xr(e,"change")){for(var g=0;g<r.length;++g)typeof r[g]!="string"&&(r[g]=r[g].text);var E={from:t,to:n,text:r,origin:s};if(e.curOp.textChanged){for(var S=e.curOp.textChanged;S.next;S=S.next);S.next=E}else e.curOp.textChanged=E}var x,T,N={line:t.line+r.length-1,ch:Yn(d).length+(r.length==1?t.ch:0)};if(i&&typeof i!="string")i.from?(x=i.from,T=i.to):x=T=i;else if(i=="end")x=T=N;else if(i=="start")x=T=t;else if(i=="around")x=t,T=N;else{var C=function(e){if(nn(e,t))return e;if(!nn(n,e))return N;var r=e.line+w,i=e.ch;return e.line==n.line&&(i+=Yn(d).length-(n.ch-(n.line==t.line?t.ch:0))),{line:r,ch:i}};x=C(o.sel.from),T=C(o.sel.to)}return fn(e,x,T,null,!0),N}function en(e,t,n,r,i){r||(r=n);if(nn(r,n)){var s=r;r=n,n=s}return Qt(e,n,r,gi(t),null,i)}function tn(e,t){return e.line==t.line&&e.ch==t.ch}function nn(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function rn(e){return{line:e.line,ch:e.ch}}function sn(e,t){return Math.max(0,Math.min(t,e.size-1))}function on(e,t){if(t.line<0)return{line:0,ch:0};if(t.line>=e.size)return{line:e.size-1,ch:Tr(e,e.size-1).text.length};var n=t.ch,r=Tr(e,t.line).text.length;return n==null||n>r?{line:t.line,ch:r}:n<0?{line:t.line,ch:0}:t}function un(e,t){return t>=0&&t<e.size}function an(e,t,n,r){var i=e.view.sel;if(i.shift||i.extend){var s=i.anchor;if(n){var o=nn(t,s);o!=nn(n,s)?(s=t,t=n):o!=nn(t,n)&&(t=n)}fn(e,s,t,r)}else fn(e,t,n||t,r);e.curOp.userSelChange=!0}function fn(e,t,n,r,i){e.view.goalColumn=null;var s=e.view.sel;if(i||!tn(t,s.anchor))t=cn(e,t,r,i!="push");if(i||!tn(n,s.head))n=cn(e,n,r,i!="push");if(tn(s.anchor,t)&&tn(s.head,n))return;s.anchor=t,s.head=n;var o=nn(n,t);s.from=o?n:t,s.to=o?t:n,e.curOp.updateInput=!0,e.curOp.selectionChanged=!0}function ln(e){fn(e,e.view.sel.from,e.view.sel.to,null,"push")}function cn(e,t,n,r){var i=e.view.doc,s=!1,o=t,u=n||1;e.view.cantEdit=!1;e:for(;;){var a=Tr(i,o.line),f;if(a.markedSpans){for(var l=0;l<a.markedSpans.length;++l){var c=a.markedSpans[l],h=c.marker;if((c.from==null||(h.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(c.to==null||(h.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(r&&h.clearOnEnter){(f||(f=[])).push(h);continue}if(!h.atomic)continue;var p=h.find()[u<0?"from":"to"];if(tn(p,o)){p.ch+=u,p.ch<0?p.line?p=on(i,{line:p.line-1}):p=null:p.ch>a.text.length&&(p.line<i.size-1?p={line:p.line+1,ch:0}:p=null);if(!p){if(s)return r?(e.view.cantEdit=!0,{line:0,ch:0}):cn(e,t,n,!0);s=!0,p=t,u=-u}}o=p;continue e}}if(f)for(var l=0;l<f.length;++l)f[l].clear()}return o}}function hn(e){var t=e.view,n=pn(e,t.sel.head);if(!t.focused)return;var r=e.display,i=r.sizer.getBoundingClientRect(),s=null;n.top+i.top<0?s=!0:n.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(s=!1);if(s!=null&&!h){var o=r.cursor.style.display=="none";o&&(r.cursor.style.display="",r.cursor.style.left=n.left+"px",r.cursor.style.top=n.top-r.viewOffset+"px"),r.cursor.scrollIntoView(s),o&&(r.cursor.style.display="none")}}function pn(e,t){for(;;){var n=!1,r=at(e,t),i=vn(e,r.left,r.top,r.left,r.bottom),s=e.view.scrollTop,o=e.view.scrollLeft;i.scrollTop!=null&&(Dt(e,i.scrollTop),Math.abs(e.view.scrollTop-s)>1&&(n=!0)),i.scrollLeft!=null&&(Pt(e,i.scrollLeft),Math.abs(e.view.scrollLeft-o)>1&&(n=!0));if(!n)return r}}function dn(e,t,n,r,i){var s=vn(e,t,n,r,i);s.scrollTop!=null&&Dt(e,s.scrollTop),s.scrollLeft!=null&&Pt(e,s.scrollLeft)}function vn(e,t,n,r,i){var s=e.display,o=et(s);n+=o,i+=o;var u=s.scroller.clientHeight-Vr,a=s.scroller.scrollTop,f={},l=e.view.doc.height+2*o,c=n<o+10,h=i+o>l-10;n<a?f.scrollTop=c?0:Math.max(0,n):i>a+u&&(f.scrollTop=(h?l:i)-u);var p=s.scroller.clientWidth-Vr,d=s.scroller.scrollLeft;t+=s.gutters.offsetWidth,r+=s.gutters.offsetWidth;var v=s.gutters.offsetWidth,m=t<v+10;return t<d+v||m?(m&&(t=0),f.scrollLeft=Math.max(0,t-10-v)):r>p+d-3&&(f.scrollLeft=r+10-p),f}function mn(e,t,n,r){var i=e.view.doc;n||(n="add");if(n=="smart")if(!e.view.mode.indent)n="prev";else var s=Z(e,t);var o=e.options.tabSize,u=Tr(i,t),a=Kr(u.text,null,o),f=u.text.match(/^\s*/)[0],l;if(n=="smart"){l=e.view.mode.indent(s,u.text.slice(f.length),u.text);if(l==$r){if(!r)return;n="prev"}}n=="prev"?t?l=Kr(Tr(i,t-1).text,null,o):l=0:n=="add"?l=a+e.options.indentUnit:n=="subtract"&&(l=a-e.options.indentUnit),l=Math.max(0,l);var c="",h=0;if(e.options.indentWithTabs)for(var p=Math.floor(l/o);p;--p)h+=o,c+="	";h<l&&(c+=Gr(l-h)),c!=f&&en(e,c,{line:t,ch:0},{line:t,ch:f.length},"input"),u.stateAfter=null}function gn(e,t,n){var r=t,i=t,s=e.view.doc;return typeof t=="number"?i=Tr(s,sn(s,t)):r=Cr(t),r==null?null:n(i,r)?(gt(e,r,r+1),i):null}function yn(e,t,n,r){function f(){var e=o+t;return e<0||e==i.size?!1:(o=e,a=Tr(i,e))}function l(e){var n=(r?Li:Ai)(a,u,t,!0);if(n==null){if(!!e||!f())return!1;r?u=(t<0?Ni:Ti)(a):u=t<0?a.text.length:0}else u=n;return!0}var i=e.view.doc,s=e.view.sel.head,o=s.line,u=s.ch,a=Tr(i,o);if(n=="char")l();else if(n=="column")l(!0);else if(n=="word"){var c=!1;for(;;){if(t<0&&!l())break;if(ii(a.text.charAt(u)))c=!0;else if(c){t<0&&(t=1,l());break}if(t>0&&!l())break}}return cn(e,{line:o,ch:u},t,!0)}function bn(e,t){var n=t.ch,r=t.ch;if(e){t.after===!1||r==e.length?--n:++r;var i=e.charAt(n),s=ii(i)?ii:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ii(e)};while(n>0&&s(e.charAt(n-1)))--n;while(r<e.length&&s(e.charAt(r)))++r}return{from:{line:t.line,ch:n},to:{line:t.line,ch:r}}}function wn(e,t){an(e,{line:t,ch:0},on(e.view.doc,{line:t+1,ch:0}))}function xn(e,t,n,r){E.defaults[e]=t,n&&(En[e]=r?function(e,t,r){r!=Tn&&n(e,t,r)}:n)}function An(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function On(e,t,n){return e.startState?e.startState(t,n):!0}function Dn(e){return typeof e=="string"?_n[e]:e}function Pn(e,t,n,r){function i(t){t=Dn(t);var s=t[e];if(s===!1)return r&&r(),!0;if(s!=null&&n(s))return!0;if(t.nofallthrough)return r&&r(),!0;var o=t.fallthrough;if(o==null)return!1;if(Object.prototype.toString.call(o)!="[object Array]")return i(o);for(var u=0,a=o.length;u<a;++u)if(i(o[u]))return!0;return!1}for(var s=0;s<t.length;++s)if(i(t[s]))return!0}function Hn(e){var t=wi[qr(e,"keyCode")];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function Bn(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function jn(e,t){this.lines=[],this.type=t,this.cm=e}function Fn(e,t,n,r,i){var s=e.view.doc,o=new jn(e,i);if(i=="range"&&!nn(t,n))return o;if(r)for(var u in r)r.hasOwnProperty(u)&&(o[u]=r[u]);o.replacedWith&&(o.collapsed=!0,o.replacedWith=ui("span",[o.replacedWith],"CodeMirror-widget")),o.collapsed&&(w=!0);var a=t.line,f=0,l,c;s.iter(a,n.line+1,function(r){o.collapsed&&!e.options.lineWrapping&&Kn(s,r)==e.view.maxLine&&(e.curOp.updateMaxLine=!0);var i={from:null,to:null,marker:o};f+=r.text.length,a==t.line&&(i.from=t.ch,f-=t.ch),a==n.line&&(i.to=n.ch,f-=r.text.length-n.ch),o.collapsed&&(a==n.line&&(c=Vn(r,n.ch)),a==t.line?l=Vn(r,t.ch):Nr(r,0)),Rn(r,i),++a}),o.collapsed&&s.iter(t.line,n.line+1,function(e){Qn(e)&&Nr(e,0)}),o.readOnly&&(b=!0,(e.view.history.done.length||e.view.history.undone.length)&&e.clearHistory());if(o.collapsed){if(l!=c)throw new Error("Inserting collapsed marker overlapping an existing one");o.size=f,o.atomic=!0}return(o.className||o.startStyle||o.endStyle||o.collapsed)&&gt(e,t.line,n.line+1),o.atomic&&ln(e),o}function In(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function qn(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Rn(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.lines.push(e)}function Un(e,t){if(e)for(var n=0,r;n<e.length;++n){var i=e[n],s=i.marker,o=i.from==null||(s.inclusiveLeft?i.from<=t:i.from<t);if(o||s.type=="bookmark"&&i.from==t){var u=i.to==null||(s.inclusiveRight?i.to>=t:i.to>t);(r||(r=[])).push({from:i.from,to:u?null:i.to,marker:s})}}return r}function zn(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.to==null||(o.inclusiveRight?s.to>=n:s.to>n);if(u||o.type=="bookmark"&&s.from==n&&s.from!=t){var a=s.from==null||(o.inclusiveLeft?s.from<=n:s.from<n);(i||(i=[])).push({from:a?null:s.from-n,to:s.to==null?null:s.to-n,marker:o})}}return i}function Wn(e,t,n,r,i){if(!e&&!t)return i;var s=Un(e,n),o=zn(t,n,r),u=i.length==1,a=Yr(i).length+(u?n:0);if(s)for(var f=0;f<s.length;++f){var l=s[f];if(l.to==null){var c=In(o,l.marker);c?u&&(l.to=c.to==null?null:c.to+a):l.to=n}}if(o)for(var f=0;f<o.length;++f){var l=o[f];l.to!=null&&(l.to+=a);if(l.from==null){var c=In(s,l.marker);c||(l.from=a,u&&(s||(s=[])).push(l))}else l.from+=a,u&&(s||(s=[])).push(l)}var h=[er(i[0],s)];if(!u){var p=i.length-2,d;if(p>0&&s)for(var f=0;f<s.length;++f)s[f].to==null&&(d||(d=[])).push({from:null,to:null,marker:s[f].marker});for(var f=0;f<p;++f)h.push(er(i[f+1],d));h.push(er(Yr(i),o))}return h}function Xn(e,t,n){var r=null;e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;n.readOnly&&(!r||ei(r,n)==-1)&&(r||(r=[])).push(n)}});if(!r)return null;var i=[{from:t,to:n}];for(var s=0;s<r.length;++s){var o=r[s].find();for(var u=0;u<i.length;++u){var a=i[u];if(!nn(o.from,a.to)||nn(o.to,a.from))continue;var f=[u,1];nn(a.from,o.from)&&f.push({from:a.from,to:o.from}),nn(o.to,a.to)&&f.push({from:o.to,to:a.to}),i.splice.apply(i,f),u+=f.length-1}}return i}function Vn(e,t){var n=w&&e.markedSpans,r;if(n)for(var i,s=0;s<n.length;++s){i=n[s];if(!i.marker.collapsed)continue;(i.from==null||i.from<t)&&(i.to==null||i.to>t)&&(!r||r.width<i.marker.width)&&(r=i.marker)}return r}function $n(e){return Vn(e,-1)}function Jn(e){return Vn(e,e.text.length+1)}function Kn(e,t){var n;while(n=$n(t))t=Tr(e,n.find().from.line);return t}function Qn(e){var t=w&&e.markedSpans;if(t)for(var n,r=0;r<t.length;++r){n=t[r];if(!n.marker.collapsed)continue;if(n.from==null)return!0;if(n.from==0&&n.marker.inclusiveLeft&&Gn(e,n))return!0}}function Gn(e,t){if(t.to==null){var n=t.marker.find().to,r=Tr(kr(e),n.line);return Gn(r,In(r.markedSpans,t.marker))}if(t.marker.inclusiveRight&&t.to==e.text.length)return!0;for(var i,s=0;s<e.markedSpans.length;++s){i=e.markedSpans[s];if(i.marker.collapsed&&i.from==t.to&&(i.marker.inclusiveLeft||t.marker.inclusiveRight)&&Gn(e,i))return!0}}function Yn(e){return typeof e=="string"?e:e.text}function Zn(e){if(typeof e=="string")return null;var t=e.markedSpans,n=null;for(var r=0;r<t.length;++r)t[r].marker.explicitlyCleared?n||(n=t.slice(0,r)):n&&n.push(t[r]);return n?n.length?n:null:t}function er(e,t){return t?{text:e,markedSpans:t}:e}function tr(e){var t=e.markedSpans;if(!t)return;for(var n=0;n<t.length;++n){var r=t[n].marker.lines,i=ei(r,e);r.splice(i,1)}e.markedSpans=null}function nr(e,t){if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.lines.push(e);e.markedSpans=t}function ir(e){return function(){dt(this.cm);try{var t=e.apply(this,arguments)}finally{vt(this.cm)}return t}}function sr(e){return e.height!=null?e.height:((!e.node.parentNode||e.node.parentNode.nodeType!=1)&&fi(e.cm.display.measure,ui("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function or(e,t,n,r){var i=new rr(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),gn(e,t,function(t){(t.widgets||(t.widgets=[])).push(i),i.line=t;if(!Qn(t)||i.showIfHidden){var n=Ar(e,t)<e.display.scroller.scrollTop;Nr(t,t.height+sr(i)),n&&setTimeout(function(){e.display.scroller.scrollTop+=i.height})}return!0}),i}function ur(e,t,n){var r={text:e,height:n};return nr(r,t),Qn(r)&&(r.height=0),r}function ar(e,t,n,r){t.text=n,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),t.order!=null&&(t.order=null),tr(t),nr(t,r),Qn(t)?t.height=0:t.height||(t.height=ht(e.display)),Wr(e,t,"change")}function fr(e){e.parent=null,tr(e)}function lr(e,t,n,r,i){var s=e.options.flattenSpans,o="",u=null,a=new Bn(t,e.options.tabSize);t==""&&n.blankLine&&n.blankLine(r);while(!a.eol()){var f=n.token(a,r);a.pos>5e3&&(s=!1,a.pos=Math.min(t.length,a.start+5e4),f=null);var l=a.current();a.start=a.pos,!s||u!=f?(o&&i(o,u),o=l,u=f):o+=l}o&&i(o,u)}function cr(e,t,n){var r=[e.view.modeGen];lr(e,t.text,e.view.mode,n,function(e,t){r.push(e,t)});for(var i=0;i<e.view.overlays.length;++i){var s=e.view.overlays[i],o=1;lr(e,t.text,s.mode,!0,function(e,t){var n=o,i=e.length;while(i){var u=r[o],a=u.length;a<=i?i-=a:(r.splice(o,1,u.slice(0,i),r[o+1],u.slice(i)),i=0),o+=2}if(!t)return;if(s.opaque)r.splice(n,o-n,e,t),o=n+2;else for(;n<o;n+=2){var u=r[n+1];r[n+1]=u?u+" "+t:t}})}return r}function hr(e,t){if(!t.styles||t.styles[0]!=e.view.modeGen)t.styles=cr(e,t,t.stateAfter=Z(e,Cr(t)));return t.styles}function pr(e,t,n){var r=e.view.mode,i=new Bn(t.text,e.options.tabSize);t.text==""&&r.blankLine&&r.blankLine(n);while(!i.eol()&&i.pos<=5e3)r.token(i,n),i.start=i.pos}function vr(e){return e?dr[e]||(dr[e]="cm-"+e.replace(/ +/g," cm-")):null}function mr(e,t,n){var r,i=t,s,o,u=!0;while(r=$n(i))u=!1,i=Tr(e.view.doc,r.find().from.line),s||(s=i);var a={pre:ui("pre"),col:0,pos:0,display:!n,measure:null,addedOne:!1,cm:e};i.textClass&&(a.pre.className=i.textClass);do{a.measure=i==t&&n,a.pos=0,a.addToken=a.measure?br:yr,n&&o&&i!=t&&!a.addedOne&&(n[0]=a.pre.appendChild(mi(e.display.measure)),a.addedOne=!0);var f=Er(i,a,hr(e,i));o=i==s,f&&(i=Tr(e.view.doc,f.to.line),u=!1)}while(f);return n&&!a.addedOne&&(n[0]=a.pre.appendChild(u?ui("span"," "):mi(e.display.measure))),!a.pre.firstChild&&!Qn(t)&&a.pre.appendChild(document.createTextNode(" ")),a.pre}function yr(e,t,n,r,i){if(!t)return;if(!gr.test(t)){e.col+=t.length;var s=document.createTextNode(t)}else{var s=document.createDocumentFragment(),o=0;for(;;){gr.lastIndex=o;var u=gr.exec(t),a=u?u.index-o:t.length-o;a&&(s.appendChild(document.createTextNode(t.slice(o,o+a))),e.col+=a);if(!u)break;o+=a+1;if(u[0]=="	"){var f=e.cm.options.tabSize,l=f-e.col%f;s.appendChild(ui("span",Gr(l),"cm-tab")),e.col+=l}else{var c=ui("span","•","cm-invalidchar");c.title="\\u"+u[0].charCodeAt(0).toString(16),s.appendChild(c),e.col+=1}}}if(n||r||i||e.measure){var h=n||"";return r&&(h+=r),i&&(h+=i),e.pre.appendChild(ui("span",[s],h))}e.pre.appendChild(s)}function br(e,t,n,r,i){for(var s=0;s<t.length;++s)s&&s<t.length&&e.cm.options.lineWrapping&&hi.test(t.slice(s-1,s+1))&&e.pre.appendChild(ui("wbr")),e.measure[e.pos++]=yr(e,t.charAt(s),n,s==0&&r,s==t.length-1&&i);t.length&&(e.addedOne=!0)}function wr(e,t,n){n&&(e.display||(n=n.cloneNode(!0)),e.pre.appendChild(n),e.measure&&t&&(e.measure[e.pos]=n,e.addedOne=!0)),e.pos+=t}function Er(e,t,n){var r=e.markedSpans;if(!r){for(var i=1;i<n.length;i+=2)t.addToken(t,n[i],vr(n[i+1]));return}var s=e.text,o=s.length,u=0,i=1,a="",f,l=0,c,h,p,d;for(;;){if(l==u){c=h=p="",d=null,l=Infinity;var v=null;for(var m=0;m<r.length;++m){var g=r[m],y=g.marker;g.from<=u&&(g.to==null||g.to>u)?(g.to!=null&&l>g.to&&(l=g.to,h=""),y.className&&(c+=" "+y.className),y.startStyle&&g.from==u&&(p+=" "+y.startStyle),y.endStyle&&g.to==l&&(h+=" "+y.endStyle),y.collapsed&&(!d||d.marker.width<y.width)&&(d=g)):g.from>u&&l>g.from&&(l=g.from),y.type=="bookmark"&&g.from==u&&y.replacedWith&&(v=y.replacedWith)}if(d&&(d.from||0)==u){wr(t,(d.to==null?o:d.to)-u,d.from!=null&&d.marker.replacedWith);if(d.to==null)return d.marker.find()}v&&!d&&wr(t,0,v)}if(u>=o)break;var b=Math.min(o,l);for(;;){if(a){var w=u+a.length;if(!d){var E=w>b?a.slice(0,b-u):a;t.addToken(t,E,f+c,p,u+E.length==l?h:"")}if(w>=b){a=a.slice(b-u),u=b;break}u=w,p=""}a=n[i++],f=vr(n[i++])}}}function Sr(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;t<n;++t)e[t].parent=this,r+=e[t].height;this.height=r}function xr(e){this.children=e;var t=0,n=0;for(var r=0,i=e.length;r<i;++r){var s=e[r];t+=s.chunkSize(),n+=s.height,s.parent=this}this.size=t,this.height=n,this.parent=null}function Tr(e,t){while(!e.lines)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(t<i){e=r;break}t-=i}return e.lines[t]}function Nr(e,t){var n=t-e.height;for(var r=e;r;r=r.parent)r.height+=n}function Cr(e){if(e.parent==null)return null;var t=e.parent,n=ei(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent)for(var i=0;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}return n}function kr(e){for(var t=e.parent;t.parent;t=t.parent);return t}function Lr(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.height;if(t<o){e=s;continue e}t-=o,n+=s.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;r<i;++r){var u=e.lines[r],a=u.height;if(t<a)break;t-=a}return n+r}function Ar(e,t){t=Kn(e.view.doc,t);var n=0,r=t.parent;for(var i=0;i<r.lines.length;++i){var s=r.lines[i];if(s==t)break;n+=s.height}for(var o=r.parent;o;r=o,o=r.parent)for(var i=0;i<o.children.length;++i){var u=o.children[i];if(u==r)break;n+=u.height}return n}function Or(e){var t=e.order;return t==null&&(t=e.order=Oi(e.text)),t}function Mr(){return{done:[],undone:[],lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function _r(e,t,n,r,i,s,o,u,a){var f=e.view.history;f.undone.length=0;var l=+(new Date),c=Yr(f.done);if(c&&(f.lastOp==e.curOp.id||f.lastOrigin==i&&(i=="input"||i=="delete")&&f.lastTime>l-600)){var h=Yr(c.events);if(h.start>t+r.length||h.start+h.added<t)c.events.push({start:t,added:n,old:r});else{var p=Math.max(0,h.start-t),d=Math.max(0,t+r.length-(h.start+h.added));for(var v=p;v>0;--v)h.old.unshift(r[v-1]);for(var v=d;v>0;--v)h.old.push(r[r.length-v]);p&&(h.start=t),h.added+=n-(r.length-p-d)}c.fromAfter=u,c.toAfter=a}else{c={events:[{start:t,added:n,old:r}],fromBefore:s,toBefore:o,fromAfter:u,toAfter:a},f.done.push(c);while(f.done.length>e.options.undoDepth)f.done.shift();f.dirtyCounter<0?f.dirtyCounter=NaN:f.dirtyCounter++}f.lastTime=l,f.lastOp=e.curOp.id,f.lastOrigin=i}function Dr(){jr(this)}function Pr(e){return e.stop||(e.stop=Dr),e}function Hr(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Br(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function jr(e){Hr(e),Br(e)}function Fr(e){return e.target||e.srcElement}function Ir(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),v&&e.ctrlKey&&t==1&&(t=3),t}function qr(e,t){var n=e.override&&e.override.hasOwnProperty(t);return n?e.override[t]:e[t]}function Rr(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}}function Ur(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}}function zr(e,t){var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2);for(var i=0;i<n.length;++i)n[i].apply(null,r)}function Wr(e,t,n){function o(e){return function(){e.apply(null,i)}}var r=t._handlers&&t._handlers[n];if(!r)return;var i=Array.prototype.slice.call(arguments,3),s=e.curOp&&e.curOp.delayedCallbacks;for(var u=0;u<r.length;++u)s?s.push(o(r[u])):r[u].apply(null,i)}function Xr(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function Jr(){this.id=null}function Kr(e,t,n){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var r=0,i=0;r<t;++r)e.charAt(r)=="	"?i+=n-i%n:++i;return i}function Gr(e){while(Qr.length<=e)Qr.push(Yr(Qr)+" ");return Qr[e]}function Yr(e){return e[e.length-1]}function Zr(e){p?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function ei(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function ti(e){for(var t=[],n=0;n<e;++n)t.push(undefined);return t}function ni(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function ii(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ri.test(e))}function si(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&e[n]&&++t;return!t}function ui(e,t,n,r){var i=document.createElement(e);n&&(i.className=n),r&&(i.style.cssText=r);if(typeof t=="string")li(i,t);else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function ai(e){if(!t)e.innerHTML="";else while(e.firstChild)e.removeChild(e.firstChild);return e}function fi(e,t){return ai(e).appendChild(t)}function li(e,t){r?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function di(e){if(pi!=null)return pi;var t=ui("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return fi(e,t),t.offsetWidth&&(pi=t.offsetHeight-t.clientHeight),pi||0}function mi(e){if(vi==null){var t=ui("span","​");fi(e,ui("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(vi=t.offsetWidth<=1&&t.offsetHeight>2&&!n)}return vi?ui("span","​"):ui("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function Ei(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=0;i<e.length;++i){var s=e[i];(s.from<n&&s.to>t||t==n&&s.to==t)&&r(Math.max(s.from,t),Math.min(s.to,n),s.level==1?"rtl":"ltr")}}function Si(e){return e.level%2?e.to:e.from}function xi(e){return e.level%2?e.from:e.to}function Ti(e){var t=Or(e);return t?Si(t[0]):0}function Ni(e){var t=Or(e);return t?xi(Yr(t)):e.text.length}function Ci(e,t){var n=Tr(e.view.doc,t),r=Kn(e.view.doc,n);r!=n&&(t=Cr(r));var i=Or(r),s=i?i[0].level%2?Ni(r):Ti(r):0;return{line:t,ch:s}}function ki(e,t){var n,r;while(n=Jn(r=Tr(e.view.doc,t)))t=n.find().to.line;var i=Or(r),s=i?i[0].level%2?Ti(r):Ni(r):r.text.length;return{line:t,ch:s}}function Li(e,t,n,r){var i=Or(e);if(!i)return Ai(e,t,n,r);var s=r?function(t,n){do t+=n;while(t>0&&oi.test(e.text.charAt(t)));return t}:function(e,t){return e+t},o=i[0].level;for(var u=0;u<i.length;++u){var a=i[u],f=a.level%2==o;if(a.from<t&&a.to>t||f&&(a.from==t||a.to==t))break}var l=s(t,a.level%2?-n:n);while(l!=null)if(a.level%2==o){if(!(l<a.from||l>a.to))break;a=i[u+=n],l=a&&(n>0==a.level%2?s(a.to,-1):s(a.from,1))}else if(l==Si(a))a=i[--u],l=a&&xi(a);else{if(l!=xi(a))break;a=i[++u],l=a&&Si(a)}return l<0||l>e.text.length?null:l}function Ai(e,t,n,r){var i=t+n;if(r)while(i>0&&oi.test(e.text.charAt(i)))i+=n;return i<0||i>e.text.length?null:i}var e=/gecko\/\d/i.test(navigator.userAgent),t=/MSIE \d/.test(navigator.userAgent),n=t&&(document.documentMode==null||document.documentMode<8),r=t&&(document.documentMode==null||document.documentMode<9),i=/WebKit\//.test(navigator.userAgent),s=i&&/Qt\/\d+\.\d+/.test(navigator.userAgent),o=/Chrome\//.test(navigator.userAgent),u=/Opera\//.test(navigator.userAgent),a=/Apple Computer/.test(navigator.vendor),f=/KHTML\//.test(navigator.userAgent),l=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),c=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),h=/PhantomJS/.test(navigator.userAgent),p=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),d=p||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),v=p||/Mac/.test(navigator.platform),m=/windows/i.test(navigator.platform),g=u&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);g&&(g=Number(g[1]));var y=v&&(s||u&&(g==null||g<12.11)),b=!1,w=!1,ct,kt,Lt,Ht=0,Bt=null;t?Bt=-0.53:e?Bt=15:o?Bt=-0.7:a&&(Bt=-1/3);var qt,zt=null,Jt;E.prototype={getValue:function(e){var t=[],n=this.view.doc;return n.iter(0,n.size,function(e){t.push(e.text)}),t.join(e||"\n")},setValue:mt(null,function(e){var t=this.view.doc,n={line:0,ch:0},r=Tr(t,t.size-1).text.length;Gt(this,n,{line:t.size-1,ch:r},gi(e),n,n,"setValue")}),getSelection:function(e){return this.getRange(this.view.sel.from,this.view.sel.to,e)},replaceSelection:mt(null,function(e,t,n){var r=this.view.sel;Qt(this,r.from,r.to,gi(e),t||"around",n)}),focus:function(){window.focus(),St(this),Vt(this),bt(this)},setOption:function(e,t){var n=this.options,r=n[e];if(n[e]==t&&e!="mode")return;n[e]=t,En.hasOwnProperty(e)&&mt(this,En[e])(this,t,r)},getOption:function(e){return this.options[e]},getMode:function(){return this.view.mode},addKeyMap:function(e){this.view.keyMaps.push(e)},removeKeyMap:function(e){var t=this.view.keyMaps;for(var n=0;n<t.length;++n)if((typeof e=="string"?t[n].name:t[n])==e)return t.splice(n,1),!0},addOverlay:mt(null,function(e,t){var n=e.token?e:E.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.view.overlays.push({mode:n,modeSpec:e,opaque:t&&t.opaque}),this.view.modeGen++,gt(this,0,this.view.doc.size)}),removeOverlay:mt(null,function(e){var t=this.view.overlays;for(var n=0;n<t.length;++n)if(t[n].modeSpec==e){t.splice(n,1),this.view.modeGen++,gt(this,0,this.view.doc.size);return}}),undo:mt(null,function(){Yt(this,"undo")}),redo:mt(null,function(){Yt(this,"redo")}),indentLine:mt(null,function(e,t,n){typeof t!="string"&&(t==null?t=this.options.smartIndent?"smart":"prev":t=t?"add":"subtract"),un(this.view.doc,e)&&mn(this,e,t,n)}),indentSelection:mt(null,function(e){var t=this.view.sel;if(tn(t.from,t.to))return mn(this,t.from.line,e);var n=t.to.line-(t.to.ch?0:1);for(var r=t.from.line;r<=n;++r)mn(this,r,e)}),historySize:function(){var e=this.view.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.view.history=Mr()},markClean:function(){this.view.history.dirtyCounter=0,this.view.history.lastOp=this.view.history.lastOrigin=null},isClean:function(){return this.view.history.dirtyCounter==0},getHistory:function(){function t(e){for(var t=0,n=[],r;t<e.length;++t){var i=e[t];n.push({events:r=[],fromBefore:i.fromBefore,toBefore:i.toBefore,fromAfter:i.fromAfter,toAfter:i.toAfter});for(var s=0,o=i.events;s<o.length;++s){var u=[],a=o[s];r.push({start:a.start,added:a.added,old:u});for(var f=0;f<a.old.length;++f)u.push(Yn(a.old[f]))}}return n}var e=this.view.history;return{done:t(e.done),undone:t(e.undone)}},setHistory:function(e){var t=this.view.history=Mr();t.done=e.done,t.undone=e.undone},getTokenAt:function(e){var t=this.view.doc;e=on(t,e);var n=Z(this,e.line),r=this.view.mode,i=Tr(t,e.line),s=new Bn(i.text,this.options.tabSize);while(s.pos<e.ch&&!s.eol()){s.start=s.pos;var o=r.token(s,n)}return{start:s.start,end:s.pos,string:s.current(),className:o||null,type:o||null,state:n}},getStateAfter:function(e){var t=this.view.doc;return e=sn(t,e==null?t.size-1:e),Z(this,e+1)},cursorCoords:function(e,t){var n,r=this.view.sel;return e==null?n=r.head:typeof e=="object"?n=on(this.view.doc,e):n=e?r.from:r.to,at(this,n,t||"page")},charCoords:function(e,t){return ut(this,on(this.view.doc,e),t||"page")},coordsChar:function(e){var t=this.display.lineSpace.getBoundingClientRect();return ft(this,e.left-t.left,e.top-t.top)},defaultTextHeight:function(){return ht(this.display)},markText:mt(null,function(e,t,n){return Fn(this,on(this.view.doc,e),on(this.view.doc,t),n,"range")}),setBookmark:mt(null,function(e,t){return e=on(this.view.doc,e),Fn(this,e,e,t?{replacedWith:t}:{},"bookmark")}),findMarksAt:function(e){var t=this.view.doc;e=on(t,e);var n=[],r=Tr(t,e.line).markedSpans;if(r)for(var i=0;i<r.length;++i){var s=r[i];(s.from==null||s.from<=e.ch)&&(s.to==null||s.to>=e.ch)&&n.push(s.marker)}return n},setGutterMarker:mt(null,function(e,t,n){return gn(this,e,function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&si(r)&&(e.gutterMarkers=null),!0})}),clearGutter:mt(null,function(e){var t=0,n=this,r=n.view.doc;r.iter(0,r.size,function(r){r.gutterMarkers&&r.gutterMarkers[e]&&(r.gutterMarkers[e]=null,gt(n,t,t+1),si(r.gutterMarkers)&&(r.gutterMarkers=null)),++t})}),addLineClass:mt(null,function(e,t,n){return gn(this,e,function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass";if(!e[r])e[r]=n;else{if((new RegExp("\\b"+n+"\\b")).test(e[r]))return!1;e[r]+=" "+n}return!0})}),removeLineClass:mt(null,function(e,t,n){return gn(this,e,function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(n==null)e[r]=null;else{var s=i.replace(new RegExp("^"+n+"\\b\\s*|\\s*\\b"+n+"\\b"),"");if(s==i)return!1;e[r]=s||null}return!0})}),addLineWidget:mt
(null,function(e,t,n){return or(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if(typeof e=="number"){if(!un(this.view.doc,e))return null;var t=e;e=Tr(this.view.doc,e);if(!e)return null}else{var t=Cr(e);if(t==null)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,n,r,i){var s=this.display;e=at(this,on(this.view.doc,e));var o=e.top,u=e.left;t.style.position="absolute",s.sizer.appendChild(t);if(r=="over")o=e.top;else if(r=="near"){var a=Math.max(s.wrapper.clientHeight,this.view.doc.height),f=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);e.bottom+t.offsetHeight>a&&e.top>t.offsetHeight&&(o=e.top-t.offsetHeight),u+t.offsetWidth>f&&(u=f-t.offsetWidth)}t.style.top=o+et(s)+"px",t.style.left=t.style.right="",i=="right"?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):(i=="left"?u=0:i=="middle"&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&dn(this,u,o,u+t.offsetWidth,o+t.offsetHeight)},lineCount:function(){return this.view.doc.size},clipPos:function(e){return on(this.view.doc,e)},getCursor:function(e){var t=this.view.sel,n;return e==null||e=="head"?n=t.head:e=="anchor"?n=t.anchor:e=="end"||e===!1?n=t.to:n=t.from,rn(n)},somethingSelected:function(){return!tn(this.view.sel.from,this.view.sel.to)},setCursor:mt(null,function(e,t,n){var r=on(this.view.doc,typeof e=="number"?{line:e,ch:t||0}:e);n?an(this,r):fn(this,r,r)}),setSelection:mt(null,function(e,t){var n=this.view.doc;fn(this,on(n,e),on(n,t||e))}),extendSelection:mt(null,function(e,t){var n=this.view.doc;an(this,on(n,e),t&&on(n,t))}),setExtending:function(e){this.view.sel.extend=e},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){var t=this.view.doc;if(un(t,e))return Tr(t,e)},getLineNumber:function(e){return Cr(e)},setLine:mt(null,function(e,t){un(this.view.doc,e)&&en(this,t,{line:e,ch:0},{line:e,ch:Tr(this.view.doc,e).text.length})}),removeLine:mt(null,function(e){un(this.view.doc,e)&&en(this,"",{line:e,ch:0},on(this.view.doc,{line:e+1,ch:0}))}),replaceRange:mt(null,function(e,t,n){var r=this.view.doc;return t=on(r,t),n=n?on(r,n):t,en(this,e,t,n)}),getRange:function(e,t,n){var r=this.view.doc;e=on(r,e),t=on(r,t);var i=e.line,s=t.line;if(i==s)return Tr(r,i).text.slice(e.ch,t.ch);var o=[Tr(r,i).text.slice(e.ch)];return r.iter(i+1,s,function(e){o.push(e.text)}),o.push(Tr(r,s).text.slice(0,t.ch)),o.join(n||"\n")},triggerOnKeyDown:mt(null,Wt),execCommand:function(e){return Mn[e](this)},moveH:mt(null,function(e,t){var n=this.view.sel,r=e<0?n.from:n.to;if(n.shift||n.extend||tn(n.from,n.to))r=yn(this,e,t,this.options.rtlMoveVisually);an(this,r,r,e)}),deleteH:mt(null,function(e,t){var n=this.view.sel;tn(n.from,n.to)?en(this,"",n.from,yn(this,e,t,!1),"delete"):en(this,"",n.from,n.to,"delete"),this.curOp.userSelChange=!0}),moveV:mt(null,function(e,t){var n=this.view,r=n.doc,i=this.display,s=n.sel.head,o=at(this,s,"div"),u=o.left,a;n.goalColumn!=null&&(u=n.goalColumn);if(t=="page"){var f=Math.min(i.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);a=o.top+e*f}else t=="line"&&(a=e>0?o.bottom+3:o.top-3);do{var l=ft(this,u,a);a+=e*5}while(l.outside&&(e<0?a>0:a<r.height));t=="page"&&(i.scrollbarV.scrollTop+=ut(this,l,"div").top-o.top),an(this,l,l,e),n.goalColumn=u}),toggleOverwrite:function(){(this.view.overwrite=!this.view.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},posFromIndex:function(e){var t=0,n,r=this.view.doc;return r.iter(0,r.size,function(r){var i=r.text.length+1;if(i>e)return n=e,!0;e-=i,++t}),on(r,{line:t,ch:n})},indexFromPos:function(e){e=on(this.view.doc,e);var t=e.ch;return this.view.doc.iter(0,e.line,function(e){t+=e.text.length+1}),t},scrollTo:function(e,t){e!=null&&(this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=e),t!=null&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=t),I(this,[])},getScrollInfo:function(){var e=this.display.scroller,t=Vr;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:function(e){typeof e=="number"&&(e={line:e,ch:0}),!e||e.line!=null?(e=e?on(this.view.doc,e):this.view.sel.head,pn(this,e)):dn(this,e.left,e.top,e.right,e.bottom)},setSize:function(e,t){function n(e){return typeof e=="number"||/^\d+$/.test(String(e))?e+"px":e}e!=null&&(this.display.wrapper.style.width=n(e)),t!=null&&(this.display.wrapper.style.height=n(t)),this.refresh()},on:function(e,t){Rr(this,e,t)},off:function(e,t){Ur(this,e,t)},operation:function(e){return mt(this,e)()},refresh:function(){st(this);var e=this.view.scrollTop,t=this.view.scrollLeft;this.display.scroller.scrollHeight>e&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=e),this.display.scroller.scrollWidth>t&&(this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=t),I(this,!0)},getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var En=E.optionHandlers={},Sn=E.defaults={},Tn=E.Init={toString:function(){return"CodeMirror.Init"}};xn("value","",function(e,t){e.setValue(t)},!0),xn("mode",null,T,!0),xn("indentUnit",2,T,!0),xn("indentWithTabs",!1),xn("smartIndent",!0),xn("tabSize",4,function(e){T(e),st(e),I(e,!0)},!0),xn("electricChars",!0),xn("rtlMoveVisually",!m),xn("theme","default",function(e){k(e),L(e)},!0),xn("keyMap","default",C),xn("extraKeys",null),xn("onKeyEvent",null),xn("onDragEvent",null),xn("lineWrapping",!1,N,!0),xn("gutters",[],function(e){_(e.options),L(e)},!0),xn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?F(e.display)+"px":"0",e.refresh()},!0),xn("lineNumbers",!1,function(e){_(e.options),L(e)},!0),xn("firstLineNumber",1,L,!0),xn("lineNumberFormatter",function(e){return e},L,!0),xn("showCursorWhenSelecting",!1,V,!0),xn("readOnly",!1,function(e,t){t=="nocursor"?($t(e),e.display.input.blur()):t||Et(e,!0)}),xn("dragDrop",!0),xn("cursorBlinkRate",530),xn("cursorHeight",1),xn("workTime",100),xn("workDelay",100),xn("flattenSpans",!0),xn("pollInterval",100),xn("undoDepth",40),xn("viewportMargin",10,function(e){e.refresh()},!0),xn("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),xn("autofocus",null);var Nn=E.modes={},Cn=E.mimeModes={};E.defineMode=function(e,t){!E.defaults.mode&&e!="null"&&(E.defaults.mode=e);if(arguments.length>2){t.dependencies=[];for(var n=2;n<arguments.length;++n)t.dependencies.push(arguments[n])}Nn[e]=t},E.defineMIME=function(e,t){Cn[e]=t},E.resolveMode=function(e){if(typeof e=="string"&&Cn.hasOwnProperty(e))e=Cn[e];else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return E.resolveMode("application/xml");return typeof e=="string"?{name:e}:e||{name:"null"}},E.getMode=function(e,t){t=E.resolveMode(t);var n=Nn[t.name];if(!n)return E.getMode(e,"text/plain");var r=n(e,t);if(kn.hasOwnProperty(t.name)){var i=kn[t.name];for(var s in i){if(!i.hasOwnProperty(s))continue;r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=i[s]}}return r.name=t.name,r},E.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),E.defineMIME("text/plain","null");var kn=E.modeExtensions={};E.extendMode=function(e,t){var n=kn.hasOwnProperty(e)?kn[e]:kn[e]={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},E.defineExtension=function(e,t){E.prototype[e]=t},E.defineOption=xn;var Ln=[];E.defineInitHook=function(e){Ln.push(e)},E.copyState=An,E.startState=On,E.innerMode=function(e,t){while(e.innerMode){var n=e.innerMode(t);t=n.state,e=n.mode}return n||{mode:e,state:t}};var Mn=E.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!tn(t,n);!r&&e.getLine(t.line).length==t.ch?e.replaceRange("",t,{line:t.line+1,ch:0},"delete"):e.replaceRange("",t,r?n:{line:t.line},"delete")},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t},"delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection({line:0,ch:0})},goDocEnd:function(e){e.extendSelection({line:e.lineCount()-1})},goLineStart:function(e){e.extendSelection(Ci(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),n=Ci(e,t.line),r=e.getLineHandle(n.line),i=Or(r);if(!i||i[0].level==0){var s=Math.max(0,r.text.search(/\S/)),o=t.line==n.line&&t.ch<=s&&t.ch;e.extendSelection({line:n.line,ch:o?0:s})}else e.extendSelection(n)},goLineEnd:function(e){e.extendSelection(ki(e,e.getCursor().line))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end","input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end","input")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){mt(e,function(){e.replaceSelection("\n","end","input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},_n=E.keyMap={};_n.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},_n.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordBefore","Ctrl-Delete":"delWordAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},_n.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordBefore","Ctrl-Alt-Backspace":"delWordAfter","Alt-Delete":"delWordAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},_n["default"]=v?_n.macDefault:_n.pcDefault,_n.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},E.isModifierKey=Hn,E.fromTextArea=function(e,t){function i(){e.value=u.getValue()}t||(t={}),t.value=e.value,!t.tabindex&&e.tabindex&&(t.tabindex=e.tabindex);if(t.autofocus==null){var n=document.body;try{n=document.activeElement}catch(r){}t.autofocus=n==e||e.getAttribute("autofocus")!=null&&n==document.body}if(e.form){Rr(e.form,"submit",i);var s=e.form,o=s.submit;try{s.submit=function a(){i(),s.submit=o,s.submit(),s.submit=a}}catch(r){}}e.style.display="none";var u=E(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return u.save=i,u.getTextArea=function(){return e},u.toTextArea=function(){i(),e.parentNode.removeChild(u.getWrapperElement()),e.style.display="",e.form&&(Ur(e.form,"submit",i),typeof e.form.submit=="function"&&(e.form.submit=o))},u},Bn.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return Kr(this.string,this.start,this.tabSize)},indentation:function(){return Kr(this.string,null,this.tabSize)},match:function(e,t,n){if(typeof e!="string"){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string).indexOf(r(e),this.pos)==this.pos)return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},E.StringStream=Bn,E.TextMarker=jn,jn.prototype.clear=function(){if(this.explicitlyCleared)return;dt(this.cm);var e=this.cm.view,t=null,n=null;for(var r=0;r<this.lines.length;++r){var i=this.lines[r],s=In(i.markedSpans,this);s.to!=null&&(n=Cr(i)),i.markedSpans=qn(i.markedSpans,s),s.from!=null?t=Cr(i):this.collapsed&&!Qn(i)&&Nr(i,ht(this.cm.display))}if(this.collapsed&&!this.cm.options.lineWrapping)for(var r=0;r<this.lines.length;++r){var o=Kn(e.doc,this.lines[r]),u=O(e.doc,o);u>e.maxLineLength&&(e.maxLine=o,e.maxLineLength=u,e.maxLineChanged=!0)}t!=null&&gt(this.cm,t,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.cm.view.cantEdit&&(this.cm.view.cantEdit=!1,ln(this.cm)),vt(this.cm),Wr(this.cm,this,"clear")},jn.prototype.find=function(){var e,t;for(var n=0;n<this.lines.length;++n){var r=this.lines[n],i=In(r.markedSpans,this);if(i.from!=null||i.to!=null){var s=Cr(r);i.from!=null&&(e={line:s,ch:i.from}),i.to!=null&&(t={line:s,ch:i.to})}}return this.type=="bookmark"?e:e&&{from:e,to:t}},jn.prototype.getOptions=function(e){var t=this.replacedWith;return{className:this.className,inclusiveLeft:this.inclusiveLeft,inclusiveRight:this.inclusiveRight,atomic:this.atomic,collapsed:this.collapsed,clearOnEnter:this.clearOnEnter,replacedWith:e?t&&t.cloneNode(!0):t,readOnly:this.readOnly,startStyle:this.startStyle,endStyle:this.endStyle}};var rr=E.LineWidget=function(e,t,n){for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this.node=t};rr.prototype.clear=ir(function(){var e=this.line.widgets,t=Cr(this.line);if(t==null||!e)return;for(var n=0;n<e.length;++n)e[n]==this&&e.splice(n--,1);Nr(this.line,Math.max(0,this.line.height-sr(this))),gt(this.cm,t,t+1)}),rr.prototype.changed=ir(function(){var e=this.height;this.height=null;var t=sr(this)-e;if(!t)return;Nr(this.line,this.line.height+t);var n=Cr(this.line);gt(this.cm,n,n+1)});var dr={},gr=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;Sr.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var r=e,i=e+t;r<i;++r){var s=this.lines[r];this.height-=s.height,fr(s),Wr(n,s,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0,i=t.length;r<i;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},xr.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<s){var o=Math.min(t,s-e),u=i.height;i.remove(e,o,n),this.height-=u-i.height,s==o&&(this.children.splice(r--,1),i.parent=null);if((t-=o)==0)break;e=0}else e-=s}if(this.size-t<25){var a=[];this.collapse(a),this.children=[new Sr(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;t<n;++t)this.children[t].collapse(e)},insert:function(e,t){var n=0;for(var r=0,i=t.length;r<i;++r)n+=t[r].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<=o){s.insertHeight(e,t,n);if(s.lines&&s.lines.length>50){while(s.lines.length>50){var u=s.lines.splice(s.lines.length-25,25),a=new Sr(u);s.height-=a.height,this.children.splice(r+1,0,a),a.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new xr(t);if(!e.parent){var r=new xr(e.children);r.parent=e,e.children=[r,n],e=r}else{e.size-=n.size,e.height-=n.height;var i=ei(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<o){var u=Math.min(t,o-e);if(s.iterN(e,u,n))return!0;if((t-=u)==0)break;e=0}else e-=o}}},E.e_stop=jr,E.e_preventDefault=Hr,E.e_stopPropagation=Br,E.on=Rr,E.off=Ur,E.signal=zr;var Vr=30,$r=E.Pass={toString:function(){return"CodeMirror.Pass"}};Jr.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},E.countColumn=Kr;var Qr=[""],ri=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,oi=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F]/,ci=function(){if(r)return!1;var e=ui("div");return"draggable"in e||"dragDrop"in e}(),hi=/^$/;e?hi=/$'/:a?hi=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:o&&(hi=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var pi,vi,gi="\n\nb".split(/\n/).length!=3?function(e){var t=0,n=[],r=e.length;while(t<=r){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var s=e.slice(t,e.charAt(i-1)=="\r"?i-1:i),o=s.indexOf("\r");o!=-1?(n.push(s.slice(0,o)),t+=o+1):(n.push(s),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)};E.splitLines=gi;var yi=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},bi=function(){var e=ui("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),wi={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};E.keyNames=wi,function(){for(var e=0;e<10;e++)wi[e+48]=String(e);for(var e=65;e<=90;e++)wi[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)wi[e+111]=wi[e+63235]="F"+e}();var Oi=function(){function n(n){return n<=255?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1791?t.charAt(n-1536):1792<=n&&n<=2220?"r":"L"}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,s=/[LRr]/,o=/[Lb1n]/,u=/[1n]/,a="L";return function(t){if(!r.test(t))return!1;var f=t.length,l=[];for(var c=0,h;c<f;++c)l.push(h=n(t.charCodeAt(c)));for(var c=0,p=a;c<f;++c){var h=l[c];h=="m"?l[c]=p:p=h}for(var c=0,d=a;c<f;++c){var h=l[c];h=="1"&&d=="r"?l[c]="n":s.test(h)&&(d=h,h=="r"&&(l[c]="R"))}for(var c=1,p=l[0];c<f-1;++c){var h=l[c];h=="+"&&p=="1"&&l[c+1]=="1"?l[c]="1":h==","&&p==l[c+1]&&(p=="1"||p=="n")&&(l[c]=p),p=h}for(var c=0;c<f;++c){var h=l[c];if(h==",")l[c]="N";else if(h=="%"){for(var v=c+1;v<f&&l[v]=="%";++v);var m=c&&l[c-1]=="!"||v<f-1&&l[v]=="1"?"1":"N";for(var g=c;g<v;++g)l[g]=m;c=v-1}}for(var c=0,d=a;c<f;++c){var h=l[c];d=="L"&&h=="1"?l[c]="L":s.test(h)&&(d=h)}for(var c=0;c<f;++c)if(i.test(l[c])){for(var v=c+1;v<f&&i.test(l[v]);++v);var y=(c?l[c-1]:a)=="L",b=(v<f-1?l[v]:a)=="L",m=y||b?"L":"R";for(var g=c;g<v;++g)l[g]=m;c=v-1}var w=[],E;for(var c=0;c<f;)if(o.test(l[c])){var S=c;for(++c;c<f&&o.test(l[c]);++c);w.push({from:S,to:c,level:0})}else{var x=c,T=w.length;for(++c;c<f&&l[c]!="L";++c);for(var g=x;g<c;)if(u.test(l[g])){x<g&&w.splice(T,0,{from:x,to:g,level:1});var N=g;for(++g;g<c&&u.test(l[g]);++g);w.splice(T,0,{from:N,to:g,level:2}),x=g}else++g;x<c&&w.splice(T,0,{from:x,to:c,level:1})}return w[0].level==1&&(E=t.match(/^\s+/))&&(w[0].from=E[0].length,w.unshift({from:0,to:E[0].length,level:0})),Yr(w).level==1&&(E=t.match(/\s+$/))&&(Yr(w).to-=E[0].length,w.push({from:f-E[0].length,to:f,level:0})),w[0].level!=Yr(w).level&&w.push({from:f,to:f,level:w[0].level}),w}}();return E.version="3.02",E}(),CodeMirror.defineMode("css",function(e){function a(e){var t={};for(var n=0;n<e.length;++n)t[e[n]]=!0;return t}function f(e,t){return n=t,e}function l(e,t){var n=e.next();if(n=="@")return e.eatWhile(/[\w\\\-]/),f("def",e.current());if(n=="/"&&e.eat("*"))return t.tokenize=c,c(e,t);if(n=="<"&&e.eat("!"))return t.tokenize=h,h(e,t);if(n=="=")f(null,"compare");else{if(!(n!="~"&&n!="|"||!e.eat("=")))return f(null,"compare");if(n=='"'||n=="'")return t.tokenize=p(n),t.tokenize(e,t);if(n=="#")return e.eatWhile(/[\w\\\-]/),f("atom","hash");if(n=="!")return e.match(/^\s*\w*/),f("keyword","important");if(/\d/.test(n))return e.eatWhile(/[\w.%]/),f("number","unit");if(n!=="-")return/[,+>*\/]/.test(n)?f(null,"select-op"):n=="."&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?f("qualifier","qualifier"):n==":"?f("operator",n):/[;{}\[\]\(\)]/.test(n)?f(null,n):n=="u"&&e.match("rl(")?(e.backUp(1),t.tokenize=d,f("property","variable")):(e.eatWhile(/[\w\\\-]/),f("property","variable"));if(/\d/.test(e.peek()))return e.eatWhile(/[\w.%]/),f("number","unit");if(e.match(/^[^-]+-/))return f("meta","meta")}}function c(e,t){var n=!1,r;while((r=e.next())!=null){if(n&&r=="/"){t.tokenize=l;break}n=r=="*"}return f("comment","comment")}function h(e,t){var n=0,r;while((r=e.next())!=null){if(n>=2&&r==">"){t.tokenize=l;break}n=r=="-"?n+1:0}return f("comment","comment")}function p(e,t){return function(n,r){var i=!1,s;while((s=n.next())!=null){if(s==e&&!i)break;i=!i&&s=="\\"}return i||(t&&n.backUp(1),r.tokenize=l),f("string","string")}}function d(e,t){return e.next(),e.match(/\s*[\"\']/,!1)?t.tokenize=l:t.tokenize=p(")",!0),f(null,"(")}var t=e.indentUnit,n,r=a(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]),i=a(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]),s=a(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-shadow","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"]),o=a(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua"]),u=a(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist"
,"menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","navy","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","overlay","overline","padding","padding-box","painted","paused","persian","plus-darker","plus-lighter","pointer","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","white","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small","yellow"]);return{startState:function(e){return{tokenize:l,baseIndent:e||0,stack:[]}},token:function(e,t){if(t.tokenize==l&&e.eatSpace())return null;var a=t.tokenize(e,t),f=t.stack[t.stack.length-1];return a=="property"?f=="propertyValue"?u[e.current()]?a="string-2":o[e.current()]?a="keyword":a="variable-2":f=="rule"?s[e.current()]||(a+=" error"):!f||f=="@media{"?a="tag":f=="@media"?r[e.current()]?a="attribute":/^(only|not)$/i.test(e.current())?a="keyword":e.current().toLowerCase()=="and"?a="error":i[e.current()]?a="error":a="attribute error":f=="@mediaType"?r[e.current()]?a="attribute":e.current().toLowerCase()=="and"?a="operator":/^(only|not)$/i.test(e.current())?a="error":i[e.current()]?a="error":a="error":f=="@mediaType("?s[e.current()]||(r[e.current()]?a="error":e.current().toLowerCase()=="and"?a="operator":/^(only|not)$/i.test(e.current())?a="error":a+=" error"):a="error":a=="atom"?!f||f=="@media{"?a="builtin":f=="propertyValue"?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e.current())||(a+=" error"):a="error":f=="@media"&&n=="{"&&(a="error"),n=="{"?f=="@media"||f=="@mediaType"?(t.stack.pop(),t.stack[t.stack.length-1]="@media{"):t.stack.push("rule"):n=="}"?(t.stack.pop(),f=="propertyValue"&&t.stack.pop()):n=="@media"?t.stack.push("@media"):f=="@media"&&/\b(keyword|attribute)\b/.test(a)?t.stack.push("@mediaType"):f=="@mediaType"&&e.current()==","?t.stack.pop():f=="@mediaType"&&n=="("?t.stack.push("@mediaType("):f=="@mediaType("&&n==")"?t.stack.pop():f=="rule"&&n==":"?t.stack.push("propertyValue"):f=="propertyValue"&&n==";"&&t.stack.pop(),a},indent:function(e,n){var r=e.stack.length;return/^\}/.test(n)&&(r-=e.stack[e.stack.length-1]=="propertyValue"?2:1),e.baseIndent+r*t},electricChars:"}"}}),CodeMirror.defineMIME("text/css","css"),CodeMirror.defineMode("coffeescript",function(e){function n(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function y(e,n){if(e.sol()){var c=n.scopes[0].offset;if(e.eatSpace()){var h=e.indentation();return h>c?"indent":h<c?"dedent":null}c>0&&S(e,n)}if(e.eatSpace())return null;var m=e.peek();if(e.match("####"))return e.skipToEnd(),"comment";if(e.match("###"))return n.tokenize=w,n.tokenize(e,n);if(m==="#")return e.skipToEnd(),"comment";if(e.match(/^-?[0-9\.]/,!1)){var y=!1;e.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)&&(y=!0),e.match(/^-?\d+\.\d*/)&&(y=!0),e.match(/^-?\.\d+/)&&(y=!0);if(y)return e.peek()=="."&&e.backUp(1),"number";var E=!1;e.match(/^-?0x[0-9a-f]+/i)&&(E=!0),e.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)&&(E=!0),e.match(/^-?0(?![\dx])/i)&&(E=!0);if(E)return"number"}if(e.match(d))return n.tokenize=b(e.current(),"string"),n.tokenize(e,n);if(e.match(v)){if(e.current()!="/"||e.match(/^.*\//,!1))return n.tokenize=b(e.current(),"string-2"),n.tokenize(e,n);e.backUp(1)}return e.match(u)||e.match(o)?"punctuation":e.match(s)||e.match(r)||e.match(l)?"operator":e.match(i)?"punctuation":e.match(g)?"atom":e.match(p)?"keyword":e.match(a)?"variable":e.match(f)?"property":(e.next(),t)}function b(n,r){var i=n.length==1;return function(o,u){while(!o.eol()){o.eatWhile(/[^'"\/\\]/);if(o.eat("\\")){o.next();if(i&&o.eol())return r}else{if(o.match(n))return u.tokenize=y,r;o.eat(/['"\/]/)}}return i&&(e.mode.singleLineStringErrors?r=t:u.tokenize=y),r}}function w(e,t){while(!e.eol()){e.eatWhile(/[^#]/);if(e.match("###")){t.tokenize=y;break}e.eatWhile("#")}return"comment"}function E(t,n,r){r=r||"coffee";var i=0;if(r==="coffee"){for(var s=0;s<n.scopes.length;s++)if(n.scopes[s].type==="coffee"){i=n.scopes[s].offset+e.indentUnit;break}}else i=t.column()+t.current().length;n.scopes.unshift({offset:i,type:r})}function S(e,t){if(t.scopes.length==1)return;if(t.scopes[0].type==="coffee"){var n=e.indentation(),r=-1;for(var i=0;i<t.scopes.length;++i)if(n===t.scopes[i].offset){r=i;break}if(r===-1)return!0;while(t.scopes[0].offset!==n)t.scopes.shift();return!1}return t.scopes.shift(),!1}function x(e,n){var r=n.tokenize(e,n),i=e.current();if(i===".")return r=n.tokenize(e,n),i=e.current(),r==="variable"?"variable":t;i==="return"&&(n.dedent+=1),((i==="->"||i==="=>")&&!n.lambda&&n.scopes[0].type=="coffee"&&e.peek()===""||r==="indent")&&E(e,n);var s="[({".indexOf(i);return s!==-1&&E(e,n,"])}".slice(s,s+1)),c.exec(i)&&E(e,n),i=="then"&&S(e,n),r==="dedent"&&S(e,n)?t:(s="])}".indexOf(i),s!==-1&&S(e,n)?t:(n.dedent>0&&e.eol()&&n.scopes[0].type=="coffee"&&(n.scopes.length>1&&n.scopes.shift(),n.dedent-=1),r))}var t="error",r=new RegExp("^[\\+\\-\\*/%&|\\^~<>!?]"),i=new RegExp("^[\\(\\)\\[\\]\\{\\},:`=;\\.]"),s=new RegExp("^((->)|(=>)|(\\+\\+)|(\\+\\=)|(\\-\\-)|(\\-\\=)|(\\*\\*)|(\\*\\=)|(\\/\\/)|(\\/\\=)|(==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//))"),o=new RegExp("^((\\.\\.)|(\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),u=new RegExp("^((\\.\\.\\.)|(//=)|(>>=)|(<<=)|(\\*\\*=))"),a=new RegExp("^[_A-Za-z$][_A-Za-z$0-9]*"),f=new RegExp("^(@|this.)[_A-Za-z$][_A-Za-z$0-9]*"),l=n(["and","or","not","is","isnt","in","instanceof","typeof"]),c=["for","while","loop","if","unless","else","switch","try","catch","finally","class"],h=["break","by","continue","debugger","delete","do","in","of","new","return","then","this","throw","when","until"],p=n(c.concat(h));c=n(c);var d=new RegExp("^('{3}|\"{3}|['\"])"),v=new RegExp("^(/{3}|/)"),m=["Infinity","NaN","undefined","null","true","false","on","off","yes","no"],g=n(m),T={startState:function(e){return{tokenize:y,scopes:[{offset:e||0,type:"coffee"}],lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var n=x(e,t);return t.lastToken={style:n,content:e.current()},e.eol()&&e.lambda&&(t.lambda=!1),n},indent:function(e){return e.tokenize!=y?0:e.scopes[0].offset}};return T}),CodeMirror.defineMIME("text/x-coffeescript","coffeescript"),CodeMirror.defineMode("javascript",function(e,t){function u(e,t,n){return t.tokenize=n,n(e,t)}function a(e,t){var n=!1,r;while((r=e.next())!=null){if(r==t&&!n)return!1;n=!n&&r=="\\"}return n}function c(e,t,n){return f=e,l=n,t}function h(e,t){var n=e.next();if(n=='"'||n=="'")return u(e,t,p(n));if(/[\[\]{}\(\),;\:\.]/.test(n))return c(n);if(n=="0"&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),c("number","number");if(/\d/.test(n)||n=="-"&&e.eat(/\d/))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),c("number","number");if(n=="/")return e.eat("*")?u(e,t,d):e.eat("/")?(e.skipToEnd(),c("comment","comment")):t.lastType=="operator"||t.lastType=="keyword c"||/^[\[{}\(,;:]$/.test(t.lastType)?(a(e,"/"),e.eatWhile(/[gimy]/),c("regexp","string-2")):(e.eatWhile(o),c("operator",null,e.current()));if(n=="#")return e.skipToEnd(),c("error","error");if(o.test(n))return e.eatWhile(o),c("operator",null,e.current());e.eatWhile(/[\w\$_]/);var r=e.current(),i=s.propertyIsEnumerable(r)&&s[r];return i&&t.lastType!="."?c(i.type,i.style,r):c("variable","variable",r)}function p(e){return function(t,n){return a(t,e)||(n.tokenize=h),c("string","string")}}function d(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=h;break}n=r=="*"}return c("comment","comment")}function m(e,t,n,r,i,s){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=s,r!=null&&(this.align=r)}function g(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function y(e,t,n,i,s){var o=e.cc;b.state=e,b.stream=s,b.marked=null,b.cc=o,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);for(;;){var u=o.length?o.pop():r?O:A;if(u(n,i)){while(o.length&&o[o.length-1].lex)o.pop()();return b.marked?b.marked:n=="variable"&&g(e,i)?"variable-2":t}}}function w(){for(var e=arguments.length-1;e>=0;e--)b.cc.push(arguments[e])}function E(){return w.apply(null,arguments),!0}function S(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var n=b.state;if(n.context){b.marked="def";if(t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;n.globalVars={name:e,next:n.globalVars}}}function T(){b.state.context={prev:b.state.context,vars:b.state.localVars},b.state.localVars=x}function N(){b.state.localVars=b.state.context.vars,b.state.context=b.state.context.prev}function C(e,t){var n=function(){var n=b.state;n.lexical=new m(n.indented,b.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function k(){var e=b.state;e.lexical.prev&&(e.lexical.type==")"&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function L(e){return function(n){return n==e?E():e==";"?w():E(arguments.callee)}}function A(e){return e=="var"?E(C("vardef"),q,L(";"),k):e=="keyword a"?E(C("form"),O,A,k):e=="keyword b"?E(C("form"),A,k):e=="{"?E(C("}"),j,k):e==";"?E():e=="function"?E(V):e=="for"?E(C("form"),L("("),C(")"),U,L(")"),k,A,k):e=="variable"?E(C("stat"),D):e=="switch"?E(C("form"),O,C("}","switch"),L("{"),j,k,k):e=="case"?E(O,L(":")):e=="default"?E(L(":")):e=="catch"?E(C("form"),T,L("("),$,L(")"),A,k,N):w(C("stat"),O,L(";"),k)}function O(e){return v.hasOwnProperty(e)?E(_):e=="function"?E(V):e=="keyword c"?E(M):e=="("?E(C(")"),M,L(")"),k,_):e=="operator"?E(O):e=="["?E(C("]"),B(O,"]"),k,_):e=="{"?E(C("}"),B(H,"}"),k,_):E()}function M(e){return e.match(/[;\}\)\],]/)?w():w(O)}function _(e,t){if(e=="operator"&&/\+\+|--/.test(t))return E(_);if(e=="operator"&&t=="?")return E(O,L(":"),O);if(e==";")return;if(e=="(")return E(C(")"),B(O,")"),k,_);if(e==".")return E(P,_);if(e=="[")return E(C("]"),O,L("]"),k,_)}function D(e){return e==":"?E(k,A):w(_,L(";"),k)}function P(e){if(e=="variable")return b.marked="property",E()}function H(e){e=="variable"&&(b.marked="property");if(v.hasOwnProperty(e))return E(L(":"),O)}function B(e,t){function n(r){return r==","?E(e,n):r==t?E():E(L(t))}return function(i){return i==t?E():w(e,n)}}function j(e){return e=="}"?E():w(A,j)}function F(e){return e==":"?E(I):w()}function I(e){return e=="variable"?(b.marked="variable-3",E()):w()}function q(e,t){return e=="variable"?(S(t),i?E(F,R):E(R)):w()}function R(e,t){if(t=="=")return E(O,R);if(e==",")return E(q)}function U(e){return e=="var"?E(q,L(";"),W):e==";"?E(W):e=="variable"?E(z):E(W)}function z(e,t){return t=="in"?E(O):E(_,W)}function W(e,t){return e==";"?E(X):t=="in"?E(O):E(O,L(";"),X)}function X(e){e!=")"&&E(O)}function V(e,t){if(e=="variable")return S(t),E(V);if(e=="(")return E(C(")"),T,B($,")"),k,A,N)}function $(e,t){if(e=="variable")return S(t),i?E(F):E()}var n=e.indentUnit,r=t.json,i=t.typescript,s=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),s=e("operator"),o={type:"atom",style:"atom"},u={"if":t,"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":s,"typeof":s,"instanceof":s,"true":o,"false":o,"null":o,"undefined":o,NaN:o,Infinity:o};if(i){var a={type:"variable",style:"variable-3"},f={"interface":e("interface"),"class":e("class"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),"super":e("super"),string:a,number:a,bool:a,any:a};for(var l in f)u[l]=f[l]}return u}(),o=/[+\-*&%=<>!?|]/,f,l,v={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},b={state:null,column:null,marked:null,cc:null},x={name:"this",next:{name:"arguments"}};return k.lex=!0,{startState:function(e){return{tokenize:h,lastType:null,cc:[],lexical:new m((e||0)-n,0,"block",!1),localVars:t.localVars,globalVars:t.globalVars,context:t.localVars&&{vars:t.localVars},indented:0}},token:function(e,t){e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation());if(e.eatSpace())return null;var n=t.tokenize(e,t);return f=="comment"?n:(t.lastType=f,y(t,n,f,l,e))},indent:function(e,t){if(e.tokenize==d)return CodeMirror.Pass;if(e.tokenize!=h)return 0;var r=t&&t.charAt(0),i=e.lexical;i.type=="stat"&&r=="}"&&(i=i.prev);var s=i.type,o=r==s;return s=="vardef"?i.indented+(e.lastType=="operator"||e.lastType==","?4:0):s=="form"&&r=="{"?i.indented:s=="form"?i.indented+n:s=="stat"?i.indented+(e.lastType=="operator"||e.lastType==","?n:0):i.info=="switch"&&!o?i.indented+(/^(?:case|default)\b/.test(t)?n:2*n):i.align?i.column+(o?0:1):i.indented+(o?0:n)},electricChars:":{}",jsonMode:r}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0}),function(){"use strict";var e=[{keys:["Left"],type:"keyToKey",toKeys:["h"]},{keys:["Right"],type:"keyToKey",toKeys:["l"]},{keys:["Up"],type:"keyToKey",toKeys:["k"]},{keys:["Down"],type:"keyToKey",toKeys:["j"]},{keys:["Space"],type:"keyToKey",toKeys:["l"]},{keys:["Backspace"],type:"keyToKey",toKeys:["h"]},{keys:["Ctrl-Space"],type:"keyToKey",toKeys:["W"]},{keys:["Ctrl-Backspace"],type:"keyToKey",toKeys:["B"]},{keys:["Shift-Space"],type:"keyToKey",toKeys:["w"]},{keys:["Shift-Backspace"],type:"keyToKey",toKeys:["b"]},{keys:["Ctrl-n"],type:"keyToKey",toKeys:["j"]},{keys:["Ctrl-p"],type:"keyToKey",toKeys:["k"]},{keys:["Ctrl-["],type:"keyToKey",toKeys:["Esc"]},{keys:["Ctrl-c"],type:"keyToKey",toKeys:["Esc"]},{keys:["s"],type:"keyToKey",toKeys:["c","l"]},{keys:["S"],type:"keyToKey",toKeys:["c","c"]},{keys:["Home"],type:"keyToKey",toKeys:["0"]},{keys:["End"],type:"keyToKey",toKeys:["$"]},{keys:["PageUp"],type:"keyToKey",toKeys:["Ctrl-b"]},{keys:["PageDown"],type:"keyToKey",toKeys:["Ctrl-f"]},{keys:["h"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:["l"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:["j"],type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:["k"],type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:["w"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:["W"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:["e"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:["E"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:["b"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:["B"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:["g","e"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:["g","E"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:["{"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1}},{keys:["}"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0}},{keys:["Ctrl-f"],type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:["Ctrl-b"],type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:["g","g"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0}},{keys:["G"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0}},{keys:["0"],type:"motion",motion:"moveToStartOfLine"},{keys:["^"],type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["$"],type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:["%"],type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0}},{keys:["f","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:["F","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:["t","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:["T","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:["'","character"],type:"motion",motion:"goToMark"},{keys:["`","character"],type:"motion",motion:"goToMark"},{keys:["|"],type:"motion",motion:"moveToColumn",motionArgs:{}},{keys:["d"],type:"operator",operator:"delete"},{keys:["y"],type:"operator",operator:"yank"},{keys:["c"],type:"operator",operator:"change",operatorArgs:{enterInsertMode:!0}},{keys:[">"],type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:["<"],type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:["g","~"],type:"operator",operator:"swapcase"},{keys:["n"],type:"motion",motion:"findNext"},{keys:["N"],type:"motion",motion:"findPrev"},{keys:["x"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:["X"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:["D"],type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["Y"],type:"operatorMotion",operator:"yank",motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["C"],type:"operatorMotion",operator:"change",operatorArgs:{enterInsertMode:!0},motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["~"],type:"operatorMotion",operator:"swapcase",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:["a"],type:"action",action:"enterInsertMode",actionArgs:{insertAt:"charAfter"}},{keys:["A"],type:"action",action:"enterInsertMode",actionArgs:{insertAt:"eol"}},{keys:["i"],type:"action",action:"enterInsertMode"},{keys:["I"],type:"action",action:"enterInsertMode",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["o"],type:"action",action:"newLineAndEnterInsertMode",actionArgs:{after:!0}},{keys:["O"],type:"action",action:"newLineAndEnterInsertMode",actionArgs:{after:!1}},{keys:["v"],type:"action",action:"toggleVisualMode"},{keys:["V"],type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:["J"],type:"action",action:"joinLines"},{keys:["p"],type:"action",action:"paste",actionArgs:{after:!0}},{keys:["P"],type:"action",action:"paste",actionArgs:{after:!1}},{keys:["r","character"],type:"action",action:"replace"},{keys:["u"],type:"action",action:"undo"},{keys:["Ctrl-r"],type:"action",action:"redo"},{keys:["m","character"],type:"action",action:"setMark"},{keys:['"',"character"],type:"action",action:"setRegister"},{keys:[",","/"],type:"action",action:"clearSearchHighlight"},{keys:["a","character"],type:"motion",motion:"textObjectManipulation"},{keys:["i","character"],type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:["/"],type:"search",searchArgs:{forward:!0,querySrc:"prompt"}},{keys:["?"],type:"search",searchArgs:{forward:!1,querySrc:"prompt"}},{keys:["*"],type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor"}},{keys:["#"],type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor"}},{keys:[":"],type:"ex"}],t=function(){function a(e,t){var n=[];for(var r=e;r<e+t;r++)n.push(String.fromCharCode(r));return n}function g(e){return r.test(e)}function y(e,t){return t>=0&&t<e.lineCount()}function b(e){return/^[a-z]$/.test(e)}function w(e){return"()[]{}".indexOf(e)!=-1}function E(e){return i.test(e)}function S(e){return/^[A-Z]$/.test(e)}function x(e){return/^[\w]$/.test(e)}function T(e){return s.test(e)}function N(e){return/^\s*$/.test(e)}function C(e,t,n){return e>=t&&e<=n}function k(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function A(){return L||(L={searchQuery:null,searchIsReversed:!1,registerController:new P({})}),L}function O(e){return e.vimState||(e.vimState={inputState:new _,lastHPos:-1,lastMotion:null,marks:{},visualMode:!1,visualLine:!1}),e.vimState}function _(){this.reset()}function D(e,t){this.clear(),e&&this.set(e,t)}function P(e){this.registers=e,this.unamedRegister=e['"']=new D}function q(e,t,n){var r=Math.min(Math.max(0,t.line),e.lineCount()-1),i=G(e,r)-1;i=n?i+1:i;var s=Math.min(Math.max(0,t.ch),i);return{line:r,ch:s}}function R(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function U(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function z(e,t,n){return{line:e.line+t,ch:e.ch+n}}function W(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function X(e,t){for(var n=0;n<e.length;n++)if(e[n]!=t[n]&&t[n]!="character")return!1;return!0}function V(e,t){for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function $(e,t,n){return function(){for(var r=0;r<n;r++)t(e)}}function J(e){return{line:e.line,ch:e.ch}}function K(e,t){return e.ch==t.ch&&e.line==t.line}function Q(e,t){return e.line<t.line?!0:e.line==t.line&&e.ch<t.ch?!0:!1}function G(e,t){return e.getLine(t).length}function Y(e){return e.split("").reverse().join("")}function Z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function et(e){return e.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function tt(e,t){t.visualMode=!1,t.visualLine=!1;var n=e.getCursor("anchor"),r=e.getCursor("head");K(n,r)||e.setCursor(q(e,r))}function nt(e,t,n){var r=e.getRange(t,n),i=r.split("\n");i.length>1&&N(i.pop())&&(n.line--,n.ch=G(e,n.line))}function rt(e,t,n){t.ch=0,n.ch=0,n.line++}function it(e){if(!e)return 0;var t=e.search(/\S/);return t==-1?e.length:t}function st(e,t,n,r,i){var s=e.getCursor(),o=e.getLine(s.line),u=s.ch,a=o.substring(u),f;i?f=a.search(/\w/):f=a.search(/\S/);if(f==-1)return null;u+=f,a=o.substring(u);var l=o.substring(0,u),c;r?c=/^\S+/:/\w/.test(o.charAt(u))?c=/^\w+/:c=/^[^\w\s]+/;var h=c.exec(a),p=u,d=u+h[0].length-1,v=c.exec(Y(l));return v&&(p-=v[0].length),t&&d++,{start:{line:s.line,ch:p},end:{line:s.line,ch:d}}}function ot(e,t,n,r){var i=t.line,s=t.ch,a=e.getLine(i),f=n?1:-1,l=r?u:o;for(;;){var c=f>0?a.length:-1,h=c,p=c;while(s!=c){var d=!1;for(var v=0;v<l.length&&!d;++v)if(l[v].test(a.charAt(s))){h=s;while(s!=c&&l[v].test(a.charAt(s)))s+=f;p=s,d=h!=p;if(h==t.ch&&i==t.line&&p==h+f)continue;return{from:Math.min(h,p+1),to:Math.max(h,p),line:i}}d||(s+=f)}i+=f;if(!y(e,i))return null;a=e.getLine(i),s=f>0?0:a.length}throw"The impossible happened."}function ut(e,t,n,r,i){var s=e.getCursor();for(var o=0;o<t;o++){var u=s.ch,a=s.line,f,l=!1;while(!l){f=ot(e,s,n,i),l=!0;if(!f)return n?{line:s.line,ch:G(e,s.line)}:{line:s.line,ch:0};s.line=f.line,n&&r?s.ch=f.to-1:n&&!r?C(s.ch,f.from,f.to)&&f.line==a?(l=!1,s.ch=f.to-1):s.ch=f.from:!n&&r?C(s.ch,f.from,f.to)&&f.line==a?(l=!1,s.ch=f.from):s.ch=f.to:!n&&!r&&(s.ch=f.from)}}return s}function at(e,t,n,r){var i=e.getCursor(),s=i.ch,o;for(var u=0;u<t;u++){var a=e.getLine(i.line);o=ct(s,a,r,n,!0);if(o==-1)return i;s=o}return{line:e.getCursor().line,ch:o}}function ft(e,t){var n=e.getCursor().line;return q(e,{line:n,ch:t-1})}function lt(e,t,n,r){if(!k(n,v))return;t.marks[n]&&t.marks[n].clear(),t.marks[n]=e.setBookmark(r)}function ct(e,t,n,r,i){var s;return r?(s=t.indexOf(n,e+1),s!=-1&&!i&&(s-=1)):(s=t.lastIndexOf(n,e-1),s!=-1&&!i&&(s+=1)),s}function ht(e,t,n){var r=t.line;n=n?n:e.getLine(r).charAt(t.ch);var i=k(n,["(","[","{"]),s={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{"}[n];if(!s)return t;var o={"(":1,"{":1,"[":1}[n]||-1,u=1,a=n,f=t.ch,l=e.getLine(r);while(a&&u>0)f+=o,a=l.charAt(f),a||(r+=o,f=0,l=e.getLine(r)||"",a=l.charAt(f)),a===n?u++:a===s&&u--;return a?{line:r,ch:f}:t}function pt(e,t,n){var r=e.getCursor(),i=ht(e,r,t),s=ht(e,i);return s.ch+=n?1:0,i.ch+=n?0:1,{start:s,end:i}}function dt(e,t,n){for(var r=n?n:e.length;r>=0;--r)if(t.test(e.charAt(r)))return r;return-1}function vt(e,t,n){var r=e.getCursor(),i=e.getLine(r.line),s=i.split(""),o,u,a,f,l=s.indexOf(t);r.ch<l?r.ch=l:l<r.ch&&s[r.ch]==t&&(u=r.ch,--r.ch);if(s[r.ch]==t&&!u)o=r.ch+1;else for(a=r.ch;a>-1&&!o;a--)s[a]==t&&(o=a+1);if(o&&!u)for(a=o,f=s.length;a<f&&!u;a++)s[a]==t&&(u=a);return!o||!u?{start:r,end:r}:(n&&(--o,++u),{start:{line:r.line,ch:o},end:{line:r.line,ch:u}})}function mt(){this.marked=null}function gt(e){var t=O(e);return t.searchState_||(t.searchState_=new mt)}function yt(e,t,n,r,i){e.openDialog?e.openDialog(t,r,{bottom:!0,value:i}):r(prompt(n,""))}function bt(e){var t=!1,n=[];for(var r=0;r<e.length;r++){var i=e.charAt(r);!t&&i=="/"&&n.push(r),t=i=="\\"}return n}function wt(e,t,n,r){var i=bt(t),s,o;if(!i.length)s=t;else{s=t.substring(0,i[0]);var u=t.substring(i[0]);o=u.indexOf("i")!=-1}if(!s)return null;r&&(n=/^[^A-Z]*$/.test(s));try{var a=new RegExp(s,n||o?"i":undefined);return a}catch(f){Et(e,"Invalid regex: "+s)}}function Et(e,t){e.openConfirm?e.openConfirm('<span style="color: red">'+t+'</span> <button type="button">OK</button>',function(){},{bottom:!0}):alert(t)}function St(e,t){var n="";return e&&(n+='<span style="font-family: monospace">'+e+"</span>"),n+='<input type="text"/> <span style="color: #888">',t&&(n+='<span style="color: #888">',n+=t,n+="</span>"),n}function Tt(e,t,n,r,i){var s=(n||"")+" "+(r||"");yt(e,St(n,r),s,t,i)}function Nt(e,t){if(e instanceof RegExp&&t instanceof RegExp){var n=["global","multiline","ignoreCase","source"];for(var r=0;r<n.length;r++){var i=n[r];if(e[i]!==t[i])return!1}return!0}return!1}function Ct(e,t,n,r){e.operation(function(){var i=gt(e);if(!t)return;var s=wt(e,t,!!n,!!r);if(!s)return;if(Nt(s,i.getQuery()))return;Ot(e),Lt(e,s),i.setQuery(s)})}function kt(e){return{token:function(t){var n=t.match(e,!1);if(n){if(!t.sol()){t.backUp(1);if(!e.exec(t.next()+n[0]))return t.next(),null}return t.match(e),"searching"}while(!t.eol()){t.next();if(t.match(e,!1))break}},query:e}}function Lt(e,t){if(e.addOverlay){var n=gt(e).getOverlay();if(!n||t!=n.query)n&&e.removeOverlay(n),n=kt(t),e.addOverlay(n),gt(e).setOverlay(n)}else if(e.lineCount()<2e3){var r=[];for(var i=e.getSearchCursor(t);i.findNext();)r.push(e.markText(i.from(),i.to(),{className:"cm-searching"}));gt(e).setMarked(r)}}function At(e,t,n){return e.operation(function(){var r=gt(e),i=r.getQuery();if(!i)return;r.getMarked()||Lt(e,i);var s=e.getCursor();t=r.isReversed()?!t:t,t||(s.ch+=1);var o=e.getSearchCursor(i,s);for(var u=0;u<n;u++)if(!o.find(t)){o=e.getSearchCursor(i,t?{line:e.lineCount()-1}:{line:0,ch:0});if(!o.find(t))return}return o.from()})}function Ot(e){e.addOverlay?(e.removeOverlay(gt(e).getOverlay()),gt(e).setOverlay(null)):e.operation(function(){var t=gt(e);if(!t.getQuery())return;var n=t.getMarked();if(!n)return;for(var r=0;r<n.length;++r)n[r].clear();t.setMarked(null)})}function Mt(e,t,n){return typeof e!="number"&&(e=e.line),t instanceof Array?k(e,t):n?e>=t&&e<=n:e==t}function Dt(e){var t=0,n=[];while(t<e.length){if(e.charAt(t)!="<"){n.push(e.charAt(t)),t++;continue}var r=++t;while(e.charAt(t++)!=">");var i=e.substring(r,t-1),s=/^C-(.+)$/.exec(i);if(s){var o;switch(s[1]){case"BS":o="Backspace";break;case"CR":o="Enter";break;case"Del":o="Delete";break;default:o=s[1]}n.push("Ctrl-"+o)}}return n}function Bt(){function e(e,t,r){S(t)&&(r=="Shift"?r=null:t=t.toLowerCase()),r&&(t=r+"-"+t),n.handleKey(e,t)}function t(t,n){return function(r){e(r,t,n)}}function s(e,n){for(var r=0;r<e.length;r++){var s=e[r];!n&&k(s,p)&&(s="'"+s+"'"),n?i[n+"-"+s]=t(e[r],n):i[s]=t(e[r])}}var r=["Shift","Ctrl"],i={nofallthrough:!0,style:"fat-cursor"};return s(f),s(f,"Shift"),s(f,"Ctrl"),s(p),s(p,"Ctrl"),s(c),s(c,"Ctrl"),s(d),s(d,"Ctrl"),i}function jt(e){e.setCursor(e.getCursor().line,e.getCursor().ch-1,!0),e.setOption("keyMap","vim")}var r=/[A-Za-z]/,i=/[\d]/,s=/\s/,o=[/\w/,/[^\w\s]/],u=[/\S/],f=a(65,26),l=a(97,26),c=a(48,10),h="~`!@#$%^&*()_-+=[{}]\\|/?.,<>:;\"'",p=h.split(""),d=["Left","Right","Up","Down","Space","Backspace","Esc","Home","End","PageUp","PageDown"],v=f.concat(l).concat(c).concat(["<",">"]),m=f.concat(l).concat(c).concat('-"'.split("")),L,M={buildKeyMap:function(){},getRegisterController:function(){return A().registerController},clearVimGlobalState_:function(){L=null},map:function(e,t){Ht.map(e,t)},maybeInitState:function(e){O(e)},handleKey:function(t,n){var r,i=O(t);if(n=="Esc"){i.inputState.reset(),i.visualMode&&tt(t,i);return}i.visualMode&&K(t.getCursor("head"),t.getCursor("anchor"))&&tt(t,i),!i.visualMode&&!K(t.getCursor("head"),t.getCursor("anchor"))&&(i.visualMode=!0,i.visualLine=!1);if(n!="0"||n=="0"&&i.inputState.getRepeat()===0)r=H.matchCommand(n,e,i);if(!r){E(n)&&i.inputState.pushRepeatDigit(n);return}if(r.type=="keyToKey")for(var s=0;s<r.toKeys.length;s++)this.handleKey(t,r.toKeys[s]);else H.processCommand(t,i,r)}};_.prototype.reset=function(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null},_.prototype.pushRepeatDigit=function(e){this.operator?this.motionRepeat=this.motionRepeat.concat(e):this.prefixRepeat=this.prefixRepeat.concat(e)},_.prototype.getRepeat=function(){var e=0;if(this.prefixRepeat.length>0||this.motionRepeat.length>0)e=1,this.prefixRepeat.length>0&&(e*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(e*=parseInt(this.motionRepeat.join(""),10));return e},D.prototype={set:function(e,t){this.text=e,this.linewise=!!t},append:function(e,t){t||this.linewise?(this.text+="\n"+e,this.linewise=!0):this.text+=e},clear:function(){this.text="",this.linewise=!1},toString:function(){return this.text}},P.prototype={pushText:function(e,t,n,r){var i=this.isValidRegister(e)?this.getRegister(e):null;if(!i){switch(t){case"yank":this.registers[0]=new D(n,r);break;case"delete":case"change":n.indexOf("\n")==-1?this.registers["-"]=new D(n,r):(this.shiftNumericRegisters_(),this.registers[1]=new D(n,r))}this.unamedRegister.set(n,r);return}var s=S(e);s?(i.append(n,r),this.unamedRegister.append(n,r)):(i.set(n,r),this.unamedRegister.set(n,r))},getRegister:function(e){return this.isValidRegister(e)?(e=e.toLowerCase(),this.registers[e]||(this.registers[e]=new D),this.registers[e]):this.unamedRegister},isValidRegister:function(e){return e&&k(e,m)},shiftNumericRegisters_:function(){for(var e=9;e>=2;e--)this.registers[e]=this.getRegister(""+(e-1))}};var H={matchCommand:function(e,t,n){var r=n.inputState,i=r.keyBuffer.concat(e);for(var s=0;s<t.length;s++){var o=t[s];if(X(i,o.keys)){if(i.length<o.keys.length)return r.keyBuffer.push(e),null;if(r.operator&&o.type=="action")continue;return o.keys[i.length-1]=="character"&&(r.selectedCharacter=i[i.length-1]),r.keyBuffer=[],o}}return r.keyBuffer=[],null},processCommand:function(e,t,n){switch(n.type){case"motion":this.processMotion(e,t,n);break;case"operator":this.processOperator(e,t,n);break;case"operatorMotion":this.processOperatorMotion(e,t,n);break;case"action"
:this.processAction(e,t,n);break;case"search":this.processSearch(e,t,n);break;case"ex":case"keyToEx":this.processEx(e,t,n);break;default:}},processMotion:function(e,t,n){t.inputState.motion=n.motion,t.inputState.motionArgs=U(n.motionArgs),this.evalInput(e,t)},processOperator:function(e,t,n){var r=t.inputState;if(r.operator){if(r.operator==n.operator){r.motion="expandToLine",r.motionArgs={linewise:!0},this.evalInput(e,t);return}r.reset()}r.operator=n.operator,r.operatorArgs=U(n.operatorArgs),t.visualMode&&this.evalInput(e,t)},processOperatorMotion:function(e,t,n){var r=t.visualMode,i=U(n.operatorMotionArgs);i&&r&&i.visualLine&&(t.visualLine=!0),this.processOperator(e,t,n),r||this.processMotion(e,t,n)},processAction:function(e,t,n){var r=t.inputState,i=r.getRepeat(),s=!!i,o=U(n.actionArgs)||{};r.selectedCharacter&&(o.selectedCharacter=r.selectedCharacter),n.operator&&this.processOperator(e,t,n),n.motion&&this.processMotion(e,t,n),(n.motion||n.operator)&&this.evalInput(e,t),o.repeat=i||1,o.repeatIsExplicit=s,o.registerName=r.registerName,r.reset(),t.lastMotion=null,F[n.action](e,o,t)},processSearch:function(e,t,n){function s(n,r,i){Ct(e,n,r,i),H.processMotion(e,t,{type:"motion",motion:"findNext"})}function o(e){s(e,!0,!0)}if(!e.getSearchCursor)return;var r=n.searchArgs.forward;gt(e).setReversed(!r);var i=r?"/":"?";switch(n.searchArgs.querySrc){case"prompt":Tt(e,o,i,xt);break;case"wordUnderCursor":var u=st(e,!1,!0,!1,!0),a=!0;u||(u=st(e,!1,!0,!1,!1),a=!1);if(!u)return;var f=e.getLine(u.start.line).substring(u.start.ch,u.end.ch+1);a?f="\\b"+f+"\\b":f=et(f),e.setCursor(u.start),s(f,!0,!1)}},processEx:function(e,t,n){function r(t){Ht.processCommand(e,t)}n.type=="keyToEx"?Ht.processCommand(e,n.exArgs.input):t.visualMode?Tt(e,r,":",undefined,"'<,'>"):Tt(e,r,":")},evalInput:function(e,t){var n=t.inputState,r=n.motion,i=n.motionArgs||{},s=n.operator,o=n.operatorArgs||{},u=n.registerName,a=e.getCursor("head"),f=e.getCursor("anchor"),l=J(a),c=J(l),h,p;i.repeat!==undefined?p=n.motionArgs.repeat:p=n.getRepeat();if(p>0&&i.explicitRepeat)i.repeatIsExplicit=!0;else if(i.noRepeat||!i.explicitRepeat&&p===0)p=1,i.repeatIsExplicit=!1;n.selectedCharacter&&(i.selectedCharacter=o.selectedCharacter=n.selectedCharacter),i.repeat=p,n.reset();if(r){var d=B[r](e,i,t);t.lastMotion=B[r];if(!d)return;d instanceof Array?(l=d[0],h=d[1]):h=d,h||(h={ch:l.ch,line:l.line}),t.visualMode?(Q(f,a)&&(K(f,h)||Q(h,f))?f.ch+=1:Q(a,f)&&(K(f,h)||Q(f,h))&&(f.ch-=1),a=h,t.visualLine&&(Q(f,a)?(f.ch=0,a.ch=G(e,a.line)):(a.ch=0,f.ch=G(e,f.line))),e.setCursor(f),e.setSelection(f,a),lt(e,t,"<",Q(f,a)?f:a),lt(e,t,">",Q(f,a)?a:f)):s||(h=q(e,h),e.setCursor(h.line,h.ch))}if(s){var v=!1;t.lastMotion=null,o.repeat=p,t.visualMode&&(l=f,h=a,i.inclusive=!0);if(Q(h,l)){var m=l;l=h,h=m,v=!0}i.inclusive&&(!t.visualMode||!v)&&h.ch++;var g=i.linewise||t.visualMode&&t.visualLine;g?rt(e,l,h):i.forward&&nt(e,l,h),o.registerName=u,o.linewise=g,j[s](e,o,t,l,h,c),t.visualMode&&tt(e,t),o.enterInsertMode&&F.enterInsertMode(e)}}},B={expandToLine:function(e,t){var n=e.getCursor();return{line:n.line+t.repeat-1,ch:Infinity}},findNext:function(e,t,n){return At(e,!1,t.repeat)},findPrev:function(e,t,n){return At(e,!0,t.repeat)},goToMark:function(e,t,n){var r=n.marks[t.selectedCharacter];return r?r.find():null},moveByCharacters:function(e,t){var n=e.getCursor(),r=t.repeat,i=t.forward?n.ch+r:n.ch-r;return{line:n.line,ch:i}},moveByLines:function(e,t,n){var r=e.getCursor().ch;switch(n.lastMotion){case this.moveByLines:case this.moveToColumn:case this.moveToEol:r=n.lastHPos;break;default:n.lastHPos=r}var i=e.getCursor(),s=t.repeat,o=t.forward?i.line+s:i.line-s;return o<0||o>e.lineCount()-1?null:{line:o,ch:r}},moveByPage:function(e,t){var n=e.getCursor(),r=t.repeat;e.moveV(t.forward?r:-r,"page");var i=e.getCursor();return e.setCursor(n),i},moveByParagraph:function(e,t){var n=e.getCursor().line,r=t.repeat,i=t.forward?1:-1;for(var s=0;s<r;s++){if(!t.forward&&n===0||t.forward&&n==e.lineCount()-1)break;n+=i;while(n!==0&&n!=e.lineCount-1&&e.getLine(n))n+=i}return{line:n,ch:0}},moveByWords:function(e,t){return ut(e,t.repeat,!!t.forward,!!t.wordEnd,!!t.bigWord)},moveTillCharacter:function(e,t){var n=t.repeat,r=at(e,n,t.forward,t.selectedCharacter),i=t.forward?-1:1;return r.ch+=i,r},moveToCharacter:function(e,t){var n=t.repeat;return at(e,n,t.forward,t.selectedCharacter)},moveToColumn:function(e,t,n){var r=t.repeat;return n.lastHPos=r-1,ft(e,r)},moveToEol:function(e,t,n){var r=e.getCursor();return n.lastHPos=Infinity,{line:r.line+t.repeat-1,ch:Infinity}},moveToFirstNonWhiteSpaceCharacter:function(e){var t=e.getCursor(),n=e.getLine(t.line);return{line:t.line,ch:it(e.getLine(t.line))}},moveToMatchedSymbol:function(e,t){var n=e.getCursor(),r=e.getLine(n.line).charAt(n.ch);return w(r)?ht(e,e.getCursor(),t.symbol):n},moveToStartOfLine:function(e){var t=e.getCursor();return{line:t.line,ch:0}},moveToLineOrEdgeOfDocument:function(e,t){var n=t.forward?e.lineCount()-1:0;return t.repeatIsExplicit&&(n=t.repeat-1),{line:n,ch:it(e.getLine(n))}},textObjectManipulation:function(e,t){var n=t.selectedCharacter,r=!t.textObjectInner;if(!I[n])return null;var i=I[n](e,r),s=i.start,o=i.end;return[s,o]}},j={change:function(e,t,n,r,i){A().registerController.pushText(t.registerName,"change",e.getRange(r,i),t.linewise),t.linewise?(r.ch=it(e.getLine(r.line)),e.replaceRange("\n",r,i)):e.replaceRange("",r,i),e.setCursor(r)},"delete":function(e,t,n,r,i){A().registerController.pushText(t.registerName,"delete",e.getRange(r,i),t.linewise),e.replaceRange("",r,i),t.linewise?e.setCursor(B.moveToFirstNonWhiteSpaceCharacter(e)):e.setCursor(r)},indent:function(e,t,n,r,i){var s=r.line,o=i.line,u=n.visualMode?t.repeat:1;t.linewise&&o--;for(var a=s;a<=o;a++)for(var f=0;f<u;f++)e.indentLine(a,t.indentRight);e.setCursor(r),e.setCursor(B.moveToFirstNonWhiteSpaceCharacter(e))},swapcase:function(e,t,n,r,i,s){var o=e.getRange(r,i),u="";for(var a=0;a<o.length;a++){var f=o.charAt(a);u+=S(f)?f.toLowerCase():f.toUpperCase()}e.replaceRange(u,r,i),e.setCursor(s)},yank:function(e,t,n,r,i,s){A().registerController.pushText(t.registerName,"yank",e.getRange(r,i),t.linewise),e.setCursor(s)}},F={clearSearchHighlight:Ot,enterInsertMode:function(e,t){var n=t?t.insertAt:null;if(n=="eol"){var r=e.getCursor();r={line:r.line,ch:G(e,r.line)},e.setCursor(r)}else n=="charAfter"&&e.setCursor(z(e.getCursor(),0,1));e.setOption("keyMap","vim-insert")},toggleVisualMode:function(e,t,n){var r=t.repeat,i=e.getCursor(),s;n.visualMode?(i=e.getCursor("anchor"),s=e.getCursor("head"),!n.visualLine&&t.linewise?(n.visualLine=!0,i.ch=Q(i,s)?0:G(e,i.line),s.ch=Q(i,s)?G(e,s.line):0,e.setSelection(i,s)):n.visualLine&&!t.linewise?n.visualLine=!1:tt(e,n)):(n.visualMode=!0,n.visualLine=!!t.linewise,n.visualLine?(i.ch=0,s=q(e,{line:i.line+r-1,ch:G(e,i.line)},!0)):s=q(e,{line:i.line,ch:i.ch+r},!0),!t.repeatIsExplicit&&!n.visualLine?(e.setCursor(s),e.setSelection(s,i)):e.setSelection(i,s)),lt(e,n,"<",Q(i,s)?i:s),lt(e,n,">",Q(i,s)?s:i)},joinLines:function(e,t,n){var r,i;if(n.visualMode)r=e.getCursor("anchor"),i=e.getCursor("head"),i.ch=G(e,i.line)-1;else{var s=Math.max(t.repeat,2);r=e.getCursor(),i=q(e,{line:r.line+s-1,ch:Infinity})}var o=0;e.operation(function(){for(var t=r.line;t<i.line;t++){o=G(e,r.line);var n={line:r.line+1,ch:G(e,r.line+1)},s=e.getRange(r,n);s=s.replace(/\n\s*/g," "),e.replaceRange(s,r,n)}var u={line:r.line,ch:o};e.setCursor(u)})},newLineAndEnterInsertMode:function(e,t){var n=e.getCursor();if(n.line===0&&!t.after)e.replaceRange("\n",{line:0,ch:0}),e.setCursor(0,0);else{n.line=t.after?n.line:n.line-1,n.ch=G(e,n.line),e.setCursor(n);var r=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;r(e)}this.enterInsertMode(e)},paste:function(e,t,n){var r=e.getCursor(),i=A().registerController.getRegister(t.registerName);if(!i.text)return;for(var s="",o=0;o<t.repeat;o++)s+=i.text;var u=i.linewise;u?t.after?(s="\n"+s.slice(0,s.length-1),r.ch=G(e,r.line)):r.ch=0:r.ch+=t.after?1:0,e.replaceRange(s,r);var a,f;u&&t.after?a={line:r.line+1,ch:it(e.getLine(r.line+1))}:u&&!t.after?a={line:r.line,ch:it(e.getLine(r.line))}:!u&&t.after?(f=e.indexFromPos(r),a=e.posFromIndex(f+s.length-1)):(f=e.indexFromPos(r),a=e.posFromIndex(f+s.length)),e.setCursor(a)},undo:function(e,t){$(e,CodeMirror.commands.undo,t.repeat)()},redo:function(e,t){$(e,CodeMirror.commands.redo,t.repeat)()},setRegister:function(e,t,n){n.inputState.registerName=t.selectedCharacter},setMark:function(e,t,n){var r=t.selectedCharacter;lt(e,n,r,e.getCursor())},replace:function(e,t){var n=t.selectedCharacter,r=e.getCursor(),i=e.getLine(r.line),s=r.ch+t.repeat;if(s>i.length)return;var o={line:r.line,ch:s},u="";for(var a=0;a<o.ch-r.ch;a++)u+=n;e.replaceRange(u,r,o),e.setCursor(z(o,0,-1))}},I={w:function(e,t){return st(e,t,!0,!1)},W:function(e,t){return st(e,t,!0,!0)},"{":function(e,t){return pt(e,"}",t)},"(":function(e,t){return pt(e,")",t)},"[":function(e,t){return pt(e,"]",t)},"'":function(e,t){return vt(e,"'",t)},'"':function(e,t){return vt(e,'"',t)}};mt.prototype={getQuery:function(){return A().query},setQuery:function(e){A().query=e},getMarked:function(){return this.marked},setMarked:function(e){this.marked=e},getOverlay:function(){return this.searchOverlay},setOverlay:function(e){this.searchOverlay=e},isReversed:function(){return A().isReversed},setReversed:function(e){A().isReversed=e}};var xt="(Javascript regexp)",_t=[{name:"map",type:"builtIn"},{name:"write",shortName:"w",type:"builtIn"},{name:"undo",shortName:"u",type:"builtIn"},{name:"redo",shortName:"red",type:"builtIn"},{name:"substitute",shortName:"s",type:"builtIn"}];t.ExCommandDispatcher=function(){this.buildCommandMap_()},t.ExCommandDispatcher.prototype={processCommand:function(e,t){var r=new CodeMirror.StringStream(t),i={};i.input=t;try{this.parseInput_(e,r,i)}catch(s){Et(e,s);return}var o;if(!i.commandName)i.line!==undefined&&(o="move");else{var u=this.matchCommand_(i.commandName);if(u){o=u.name,this.parseCommandArgs_(r,i,u);if(u.type=="exToKey"){for(var a=0;a<u.toKeys.length;a++)n.handleKey(e,u.toKeys[a]);return}if(u.type=="exToEx"){this.processCommand(e,u.toInput);return}}}if(!o){Et(e,'Not an editor command ":'+t+'"');return}Pt[o](e,i)},parseInput_:function(e,t,n){t.eatWhile(":"),t.eat("%")?(n.line=0,n.lineEnd=e.lineCount()-1):(n.line=this.parseLineSpec_(e,t),n.line!==undefined&&t.eat(",")&&(n.lineEnd=this.parseLineSpec_(e,t)));var r=t.match(/^(\w+)/);return r?n.commandName=r[1]:n.commandName=t.match(/.*/)[0],n},parseLineSpec_:function(e,t){var n=t.match(/^(\d+)/);if(n)return parseInt(n[1],10)-1;switch(t.next()){case".":return e.getCursor().line;case"$":return e.lineCount()-1;case"'":var r=O(e).marks[t.next()];if(r&&r.find())return r.find().line;throw"Mark not set";default:return t.backUp(1),e.getCursor().line}},parseCommandArgs_:function(e,t,n){if(e.eol())return;t.argString=e.match(/.*/)[0];var r=n.argDelimiter||/\s+/,i=Z(t.argString).split(r);i.length&&i[0]&&(t.args=i)},matchCommand_:function(e){for(var t=e.length;t>0;t--){var n=e.substring(0,t);if(this.commandMap_[n]){var r=this.commandMap_[n];if(r.name.indexOf(e)===0)return r}}return null},buildCommandMap_:function(){this.commandMap_={};for(var e=0;e<_t.length;e++){var t=_t[e],n=t.shortName||t.name;this.commandMap_[n]=t}},map:function(t,n){if(t!=":"&&t.charAt(0)==":"){var r=t.substring(1);n!=":"&&n.charAt(0)==":"?this.commandMap_[r]={name:r,type:"exToEx",toInput:n.substring(1)}:this.commandMap_[r]={name:r,type:"exToKey",toKeys:Dt(n)}}else n!=":"&&n.charAt(0)==":"?e.unshift({keys:Dt(t),type:"keyToEx",exArgs:{input:n.substring(1)}}):e.unshift({keys:Dt(t),type:"keyToKey",toKeys:Dt(n)})}};var Pt={map:function(e,t){var n=t.args;if(!n||n.length<2){e&&Et(e,"Invalid mapping: "+t.input);return}Ht.map(n[0],n[1],e)},move:function(e,t){H.processMotion(e,O(e),{motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,repeat:t.line}})},substitute:function(e,t){function d(){for(var t=e.getSearchCursor(l,p);t.findNext()&&Mt(t.from(),c,h);){var n=e.getRange(t.from(),t.to()),r=n.replace(l,s);t.replace(r)}var i=O(e);i.visualMode&&tt(e,i)}var n=t.argString,r=bt(n);if(r[0]!==0){Et(e,"Substitutions should be of the form :s/pattern/replace/");return}var i=n.substring(r[0]+1,r[1]),s="",o,u;r[1]&&(s=n.substring(r[1]+1,r[2]));if(r[2]){var a=n.substring(r[2]+1).split(" ");o=a[0],u=parseInt(a[1])}o&&(i=i+"/"+o),i&&Ct(e,i,!0,!0);var f=gt(e),l=f.getQuery(),c=t.line||0,h=t.lineEnd||c;u&&(c=h,h=c+u-1);var p=q(e,{line:c,ch:0});e.compoundChange?e.compoundChange(d):e.operation(d)},redo:CodeMirror.commands.redo,undo:CodeMirror.commands.undo,write:function(e){CodeMirror.commands.save?CodeMirror.commands.save(e):e.save()}},Ht=new t.ExCommandDispatcher;return CodeMirror.keyMap.vim=Bt(),CodeMirror.keyMap["vim-insert"]={Esc:jt,"Ctrl-[":jt,"Ctrl-C":jt,"Ctrl-N":"autocomplete","Ctrl-P":"autocomplete",Enter:function(e){var t=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;t(e)},fallthrough:["default"]},M},n=t();CodeMirror.Vim=n}(),CodeMirror.defineMode("htmlmixed",function(e){function i(e,i){var s=t.token(e,i.htmlState);return/(?:^|\s)tag(?:\s|$)/.test(s)&&e.current()==">"&&i.htmlState.context&&(/^script$/i.test(i.htmlState.context.tagName)?(i.token=o,i.localState=n.startState(t.indent(i.htmlState,""))):/^style$/i.test(i.htmlState.context.tagName)&&(i.token=u,i.localState=r.startState(t.indent(i.htmlState,"")))),s}function s(e,t,n){var r=e.current(),i=r.search(t),s;if(i>-1)e.backUp(r.length-i);else if(s=r.match(/<\/?$/))e.backUp(r.length),e.match(t,!1)||e.match(r[0]);return n}function o(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=i,t.localState=null,i(e,t)):s(e,/<\/\s*script\s*>/,n.token(e,t.localState))}function u(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=i,t.localState=null,i(e,t)):s(e,/<\/\s*style\s*>/,r.token(e,t.localState))}var t=CodeMirror.getMode(e,{name:"xml",htmlMode:!0}),n=CodeMirror.getMode(e,"javascript"),r=CodeMirror.getMode(e,"css");return{startState:function(){var e=t.startState();return{token:i,localState:null,mode:"html",htmlState:e}},copyState:function(e){if(e.localState)var i=CodeMirror.copyState(e.token==u?r:n,e.localState);return{token:e.token,localState:i,mode:e.mode,htmlState:CodeMirror.copyState(t,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,s){return e.token==i||/^\s*<\//.test(s)?t.indent(e.htmlState,s):e.token==o?n.indent(e.localState,s):r.indent(e.localState,s)},electricChars:"/{}:",innerMode:function(e){var s=e.token==i?t:e.token==o?n:r;return{state:e.localState||e.htmlState,mode:s}}}},"xml","javascript","css"),CodeMirror.defineMIME("text/html","htmlmixed"),function(){}.call(this);